(function(){/*

 Copyright (C) 2004-2010 Alex Gorbatchev.

 @license
 Dual licensed under the MIT and GPL licenses.

 Copyright (C) 2004-2010 Alex Gorbatchev.

 @license
 Dual licensed under the MIT and GPL licenses.
*/
function n(a,m){a.prototype=Object.create(m.prototype);a.prototype.constructor=a}function v(a,m,h){Object.defineProperty(a,m,{get:h,set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:m})})}function A(a,m){Object.defineProperty(a,"propagating",{get:m,set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:"propagating"})})}
function F(a,m,h){Object.defineProperty(a,m,{get:function(){return h},set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:m})})}function BotanEvent(a,m){var h=!1,k=!1;F(this,"propagate",function(){k||(h=!0);k=!0});F(this,"stopPropagating",function(){h=!1});F(this,"type",a);A(this,function(){return h});F(this,"data",m);this.setTarget=function(a){F(this,"target",a);this.setTarget=void 0}.bind(this)}
function L(){function a(){this.ia.propagate();for(var a in this.stack)if(this.ia.propagating)this.stack[a](this.ia);this.ia.stopPropagating()}function m(a){h[a]||(h[a]=[]);return h[a]}var h={},k=this;this.addEventListener=function(a,d){var e=m(a);e[e.length]=d};this.removeEventListener=function(a,d){var e=m(a),b=e.indexOf(d);0>b||delete e[b]};this.dispatchEvent=function(f){var d=m(f.type);f.setTarget&&f.setTarget(k);setTimeout(a.bind({ia:f,stack:d}),0)}}function M(){L.call(this)}M.prototype=[];
var N={},O={},P={},R=window.BotanJS,BotanJS=null,S=null,U=null;R&&(BotanJS=R.sg[0],S=R.sg[1],U=R.sg[2]);BotanJS=BotanJS||function(){var a=0,m=[],h=[],k=new L,f={write:function(a){m[m.length]=a}};F(f,"read",function(){return m[a++]});F(f,"end",function(){return m.length<=a});F(k,"log",f);F(k,"define",function(a){h[h.length]=a});F(k,"getDef",function(){return h.slice()});return k}();
S=S||function(a){if(O[a])return O[a];for(var m=a.split("."),h=m.length,k=N,f=0;f<h;f++)k[m[f]]=k[m[f]]||{},k=k[m[f]];k.gb=[];nsObj=new M;nsObj[1]=function(a,e,b){this.m[e]||(this.m[e]=[a,b],a=new BotanEvent("NS_EXPORT",{name:this.V+"."+e,type:a}),BotanJS.dispatchEvent(a))}.bind({m:k,V:a});nsObj[0]=function(a){if(!this.m[a])throw Error("["+this.V+"] Invoke failed: "+a+" does not exists");return this.m[a][1]}.bind({m:k,V:a});nsObj[10]=function(a,e){this.gb[a]=e}.bind(k);nsObj[11]=function(a,e){throw Error("["+
this.V+(e?"."+e:"")+"] "+a);}.bind({V:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return O[a]=nsObj};
U=U||function(a,m){var h=a.replace(".*","");O[h]&&O[h].dispatchEvent(new BotanEvent("NS_IMPORT",d));if(!m&&P[a])return P[a];for(var k=a.split("."),f=k.length,d=N,h=!1,e=0;e<f;e++){if("*"==k[e]){h=!0;break}d=d[k[e]];if(!d)throw Error("No such class: "+a);}if(d instanceof Array&&"*"!=k[e])return h=null,h=10==d[0]?d[1]():d[1],P[a]=h;k={};for(e in d)f=d[e],f instanceof Array&&(h&&2==f[0]?k[e]=f[1]:3==f[0]?k[e]=f[1]:0==f[0]?Object.defineProperty(k,e,{get:function(){return this.m[this.e][1]}.bind({e:e,
m:d}),set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:e})}):1==f[0]?Object.defineProperty(k,e,{get:function(){return this.m[this.e][1]()}.bind({e:e,m:d}),set:function(b){this.m[this.e][1](b)}.bind({e:e,m:d})}):10==f[0]&&Object.defineProperty(k,e,{get:f[1],set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:e})}));return P[a]=k};window.BotanJS={};window.BotanJS.version="1.0.0b";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return U(a)}catch(m){if(R)return R["import"](a);throw m;}};window.BotanJS.sg=[BotanJS,S,U];BotanJS.define("System.utils.Perf");
(function(){for(var a=S("System.utils.Perf"),m=[],h=0;256>h;h++)m[h]=(16>h?"0":"")+h.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,f=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return m[a&255]+m[a>>8&255]+m[a>>16&255]+m[a>>24&255]+"-"+m[f&255]+m[f>>8&255]+"-"+m[f>>16&15|64]+m[f>>24&255]+"-"+m[d&63|128]+m[d>>8&255]+"-"+m[d>>16&255]+m[d>>24&255]+m[e&255]+m[e>>8&255]+m[e>>16&255]+m[e>>24&255]});a[1](3,"CountSubstr",function(a,f){if(0>=
f.length)return a.length+1;for(var d=0,e=a.indexOf(f);0<=e;e=a.indexOf(f,e))d++,e++;return d});a[1](3,"ArrayReverse",function(a){for(var f=null,d=a.length,e=null,f=0,e=d-1;f<e;f+=1,--e){var d=a[f],b=a[e],d=d^b,b=b^d,d=d^b;a[f]=d;a[e]=b}})})();BotanJS.define("System.Global");
(function(){var a=S("System.Global"),m=Boolean(document.all),h=window.allowed_origins||[],k=window.location.href.match(/^https:\/\//),f=navigator.userAgent,f=Boolean(~f.indexOf("Android")||~f.indexOf("webOS")||~f.indexOf("iPhone")||~f.indexOf("iPad")||~f.indexOf("iPod")||~f.indexOf("BlackBerry")||~f.indexOf("Windows Phone"));a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",m);a[1](0,"ALLOWED_ORIGINS",h);a[1](0,"SECURE_HTTP",k);a[1](0,"MOBILE",f)})();BotanJS.define("System.utils");
(function(){var a=S("System.utils"),m=U("System.Global");a[1](3,"objGetProp",function(a,k,f){if(a&&a[k]){var d=a[k].constructor.toString().match(/function ([^\(]+)/);if(d&&2==d.length&&d[1].toUpperCase()==f.toUpperCase())return a[k]}return null});a[1](3,"objSearch",function(a,k,f){for(var d in a)if(k(a[d]))return a[d][f]||a[d];return null});a[1](3,"objMap",function(a,k){for(var f in a)a[f]=k(a[f])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?m.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(m.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.T=!1;this.loop=function(){for(var k in this.steppers)this.steppers[k]();a++};v(this,"count",function(){return a})}var m=S("System");a.prototype.putStepper=function(a){var k=this.steppers.length;this.steppers[k]=a;return k};a.prototype.start=function(){this.T||(this.id=setInterval(this.loop.bind(this),0),this.T=!0)};a.prototype.stop=function(){this.T&&(this.T=!1,clearInterval(this.id))};a.prototype.steppers=[];v(a.prototype,"started",function(){return this.T});
m[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=S("System.Log"),m=[];a[1](3,"writeLine",function(a,k){k=void 0===k?16:k;var f=!1,d;for(d in m)m[d](a,k),f=!0;!f&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var k=-1;m[k=m.length]=a;return k});a[1](3,"removeHandler",function(a){delete m[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){k&&h.writeLine(Array.prototype.join.call(arguments," "),h.INFO)}var m=S("System.Debug"),h=U("System.Log"),k=U("System.Global").debug,f=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());m[1](3,"Error",function(a){f&&h.writeLine(a.name+"\n\t"+a.message+"\n\t"+a.stack,h.ERROR)});m[1](3,"Info",a);m[1](3,"turnOff",function(a){"info"==a?k=!1:"error"==a&&(f=!1)});m[1](3,"turnOn",function(a){"info"==a?k=!0:"error"==a&&(f=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(e){e.target.removeEventListener("NS_IMPORT",a);e=U("System.Cycle.TICK",!0);e!=d&&e.fb?(k.Info("[System.Cycle] Global Tick exists"),d=null):(k.Info("[System.Cycle] Creating global Tick"),d.start())}var m=S("System.Cycle");U("System.utils");var h=U("System.Tick"),k=U("System.Debug"),f=[],d=new h;d.putStepper(function(){var a=(new Date).getTime(),b;for(b in f){var c=f[b];if(c&&a>c[1]){try{c[0]()}catch(g){k.Error(g);delete f[b];continue}c[2]?delete f[b]:c[1]=a+c[4]}}});m.addEventListener("NS_IMPORT",
a);m[1](3,"next",function(a){var b=[];b[0]=a;b[1]=0;b[2]=!0;f[f.length]=b});m[1](3,"delay",function(a,b){var c=[];c[0]=a;c[1]=(new Date).getTime()+b;c[2]=!0;f[f.length]=c});m[1](3,"perma",function(a,b,c){for(var g in f)if(f[g][3]==a)return!1;g=[];g[0]=b;g[1]=(new Date).getTime()+c;g[2]=!1;g[3]=a;g[4]=c;f[f.length]=g});m[1](3,"permaRemove",function(a){for(var b in f)f[b][3]==a&&delete f[b]});m[1](10,"TICK",function(){return d})})();BotanJS.define("System.utils.IKey");
(function(){function a(h,k){h&&"string"!=typeof h||(this.keyName=h,this.keyValue=k instanceof a?k:void 0!=k?String(k):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var m=S("System.utils");a.prototype.keyName="";a.prototype.keyValue="";F(a,"quickDef",function(){var h=arguments.length;if(0!=h%2)m[11]("Invalid Definition Count","IKey");for(var k=[],f=0;f<h;f+=2)k[k.length]=new a(arguments[f],arguments[f+1]);return k});m[1](2,"IKey",a)})();BotanJS.define("Dandelion");
(function(){function a(){if(r)return!0;try{return r=U("Dandelion.IDOMElement"),!0}catch(g){}return!1}function m(g,b){if(b&&a()){for(var c=g.length,e=[],d=0;d<c;d++)e[d]=r(g[d]);return e}return g}function h(g,a){g&&a(g)&&g.parentNode&&h(g.parentNode,a)}function k(g,a){return a(g)?g:g.parentNode&&k(g.parentNode,a)}function f(g){return document.createTextNode(g)}function d(a,b,r,d,f){a=document.createElement(a||"div");b&&(a.id=b);r&&(c?a.className=r:a.setAttribute("class",r));if(f)if(f instanceof Array)for(var k in f)a.setAttribute(f[k].keyName,
f[k].keyValue);else f instanceof g&&a.setAttribute(f.keyName,f.keyValue);d&&e(a,d);return a}function e(g,a){if(a instanceof Array)for(var b=a.length,c=0;c<b;c++)a[c]&&e(g,a[c]);else"string"==typeof a?g.appendChild(f(a)):a&&g.appendChild(a)}var b=S("Dandelion"),c=U("System.Global.IE"),g=U("System.utils.IKey"),r;b[1](3,"wrap",d);b[1](3,"wrapc",function(g,a,b){return d(!1,!1,g,a,b)});b[1](3,"wrape",function(g,a){return d(!1,!1,!1,g,a)});b[1](3,"wrapne",function(g,a,b){return d(g,!1,!1,a,b)});b[1](3,
"wrapna",function(g,a){return d(g,!1,!1,!1,a)});b[1](3,"textNode",f);b[1](3,"bubbleUp",k);b[1](3,"chainUpApply",h);b[1](3,"id",function(g,b){var c=document.getElementById(g);return c?b&&a()?r(c):c:c});b[1](3,"tag",function(g,a,b){b=void 0===b?document:b;return m(b.getElementsByTagName(g),a)});b[1](3,"name",function(g,a,b){b=void 0===b?document:b;return m(b.getElementsByName(g),a)});b[1](3,"glass",function(g,a,b){b=void 0===b?document:b;return m(b.getElementsByClassName(g),a)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,f){h.call(this,a,f);this.type=a.toLowerCase();this.handler=f}var m=S("System.utils"),h=m[0]("IKey");n(a,h);a.prototype.type="";a.prototype.handler=null;m[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(f,d){if(f instanceof a)return f;if(d)this.addEventListener=this.addEventListener.bind(f),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(f),this.removeEventListener=this.removeEventListener.bind(f);else{if(f)return new a(f,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function m(){}var h=S("Dandelion"),k=U("System.utils.EventKey");m.prototype.indexOf=function(a){for(var d=this.length,e=0;e<d;e++){var b=this[e];if(b.type==
a.type&&b.handler==a.handler)return e}return-1};n(m,Array);a.prototype.hasListener=function(a){return a instanceof k&&this.l&&-1!=this.l.indexOf(a)?this.l[this.l.indexOf(a)]:null};a.prototype.addEventListener=function(a,d){var e;if("string"==typeof a&&d)e=new k(a,d);else if(a instanceof k)e=a;else return!1;if(this.l)if(0>this.l.indexOf(e))this.l.push(e);else return!1;else this.l=new m,this.l[0]=e;this.addEventListener?this.addEventListener(e.type,e.handler,!1):this.attachEvent?this.attachEvent("on"+
e.type,e.handler):this["on"+e.type]=e.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var d in a)this.addEventListener(a[d])};a.prototype.removeEventListener=function(a,d){d&&(a=new k(a,d));this.l&&delete this.l[this.l.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};h[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(a){a=typeof a;return"number"==a?h:"string"==a?m:k}function m(a,b){return a.nodeName==b}function h(a,b){return a.nodeType==b}function k(){return!1}function f(a,r){if(a instanceof f)return a;if(r)c.call(this,a,!0),this.getDAttribute=this.getDAttribute.bind(a),this.loot=this.loot.bind(a),this.foreach=this.foreach.bind(a),this.reverseChild=this.reverseChild.bind(a),this.clear=this.clear.bind(a),this.first=this.first.bind(a),this.last=this.last.bind(a),this.contains=this.contains.bind(a),
this.style=a.style,this.hasAttribute=function(){}.bind(a),this.removeAttribute=function(a){this.removeAttribute(a)}.bind(a),this.element=a,this.setAttribute=this.setAttribute.bind(a);else{if(a&&void 0!=a.nodeType&&1==a.nodeType)return new f(a,!0);if(void 0===a)return new f(b(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var d=S("Dandelion"),e=U("System.utils.IKey");U("System.utils.Perf");var b=d[0]("wrap"),c=d[0]("IDOMObject");n(f,c);f.prototype.setAttribute=function(a,
b){if(a instanceof e)this.setAttribute(a.keyName,a.keyValue);else if(a instanceof Array)for(var c in a)a[c]instanceof e&&this.setAttribute(a[c].keyName,a[c].keyValue);else this.setAttribute(a,b)};f.prototype.loot=function(a){for(var b=a.childNodes;b.length;)this.appendChild(a.removeChild(b[0]))};f.prototype.clear=function(){for(var a=this.childNodes;a.length;)this.removeChild(a[0])};f.prototype.getDAttribute=function(a){return(a=this.getAttribute("data-"+a))&&decodeURIComponent(a)};f.prototype.foreach=
function(a,b){for(var c=Array.apply([],this.childNodes),e=c.length,d=0;d<e;d++)c[d].nodeType==a&&b(c[d],this)};f.prototype.first=function(g,b){for(var c=this.childNodes,e=c.length,d=null,f=a(g),k=0;k<e;k++)if(f(c[k],g)&&(void 0===b||b(c[k],this))){d=c[k];break}return d};f.prototype.last=function(g,b){for(var c=this.childNodes,e=null,d=a(g),f=c.length-1;-1<f;f--)if(d(c[f],g)&&(void 0===b||b(c[f],this))){e=c[f];break}return e};f.prototype.contains=function(a){return a.parentElement?a==this?!0:this.contains(a.parentElement):
!1};f.prototype.aKeys=function(){for(var a=[],b=this.element.attributes,c=b.length,d=0;d<c;d++)a.push(new e(b[d].name,b[d].value));return a};f.prototype.reverseChild=function(){for(var a=this.childNodes.length-1;-1<--a;)this.appendChild(this.childNodes[a])};d[1](2,"IDOMElement",f)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,f){h.call(this,"data-"+a,f?encodeURIComponent(String(f)):"")}var m=S("System.utils"),h=m[0]("IKey");n(a,h);m[1](2,"DataKey",a)})();BotanJS.define("Components.DockPanel");
(function(){var a=S("Components"),m=U("System.Cycle"),h=U("System.utils.DataKey"),k=U("Dandelion"),f=U("Dandelion.IDOMElement");a[1](2,"DockPanel",function(a,e,b,c){var g=k.wrapc("window");e=k.wrapc("titleBar",e);-1!=c.indexOf("top")?(g.appendChild(k.wrapc("contentPanel",b)),g.appendChild(e),g.style.position="absolute",m.next(function(){g.style.transition="none";g.style.top=-b.clientHeight+"px";f(g).setAttribute(new h("top",g.style.top));m.next(function(){g.style.transition=""})})):-1!=c.indexOf("bottom")&&
(g.appendChild(e),g.appendChild(k.wrapc("contentPanel",b)),m.next(function(){g.style.transition="none";m.next(function(){g.style.transition=""})}));g=k.wrap(null,a,"fdock "+c,g);document.body.appendChild(g);return g})})();BotanJS.define("Components.Console");
(function(){function a(){function a(b){var g=h;g.value+="\n"+(b=void 0!=b?b.toString():"undefined");t.textContent=t.innerText=b;u.style.color="";z&&(q.style.top=z);g.scrollTop=g.scrollHeight}function s(){debugEnv&&(x.innerHTML=d.count-y+" cps, Sampling 500ms",y=d.count,u&&(u.style.color="yellowgreen"))}var q=null,h=null,t=null,x=null,z="",y=0,u=null,h=c.wrap("textarea",null,"response"),x=c.wrap("span","time_stmp");document.body.appendChild(x);h.readOnly=!0;var q=new r("debugCons",c.wrapc("dbg_statusbar",
[c.wrapc("dbg_title","Debug Console(Press F9)"),t=c.wrapc("dbg_lastMsg"),u=c.wrap("div","dbg_led","dbg_led","\u25cf")]),c.wrap(null,"debugWrap",null,h),"dtop"),B=g(q);f.next(function(){z=this.getDAttribute("top")}.bind(B));B=function(){this.style.top=""}.bind(q);f.perma("gTicker"+k.uuid,s,500);f.perma("gTicker"+k.uuid,B,3E3);debugEnv=!0;s();B=function(a){a=a||window.event;a.keyCode?code=a.keyCode:a.which&&(code=a.which);120==code&&(this.hasAttribute("expanded")?(this.removeAttribute("expanded"),u.hasAttribute("error")&&
u.removeAttribute("error"),this.style.top=z):this.setAttribute("expanded","1"))}.bind(q);document.addEventListener?document.addEventListener("keydown",B,!1):document.attachEvent?document.attachEvent("onkeydown",B):document.onkeydown=B;this.log=a;e.registerHandler(function(b,g){g==e.ERROR?(a(b),u.setAttribute("error",1),q.setAttribute("expanded",1)):a(b)});window.debug_info&&b.Info(m(debug_info,0,"[Server] "))}function m(a,b,g){var c="",e;for(e in a)c="object"==typeof a[e]?c+(g+Array(b+1).join(" ")+
e+":\n"+m(a[e],b+2,0<b?g:Array(g.length).join(" "))):c+(g+Array(b+1).join(" ")+e+": "+a[e]+"\n");return c}var h=S("Components"),k=U("System.utils.Perf"),f=U("System.Cycle"),d=U("System.Cycle.TICK");U("System.Global");var e=U("System.Log"),b=U("System.Debug"),c=U("Dandelion"),g=U("Dandelion.IDOMElement"),r=U("Components.DockPanel");F(a,"objTreeView",m);h[1](2,"Console",a)})();BotanJS.define("Astro.Starfall.Element.Header");BotanJS.define("Dandelion.Window");
(function(){var a=S("Dandelion.Window");a[1](10,"scrollTop",function(){return window.pageYOffset||document.documentElement.scrollTop});a[1](10,"scrollLeft",function(){return window.pageXOffset||document.documentElement.scrollLeft});a[1](10,"scrollHeight",function(){return window.scrollHeight||document.documentElement.scrollHeight});a[1](10,"clientHeight",function(){return window.clientHeight||document.documentElement.clientHeight});a[1](10,"scrollWidth",function(){return window.scrollWidth||document.documentElement.scrollWidth});
a[1](10,"clientWidth",function(){return window.clientWidth||document.documentElement.clientWidth})})();BotanJS.define("Dandelion.CSSReset");BotanJS.define("Dandelion.CSSAnimations");BotanJS.define("Astro.Bootstrap");
(function(){var a=S("Astro.Bootstrap"),m=U("System.Debug"),h=[],k=!1,f=!1;BotanJS.addEventListener("NS_EXPORT",function(a){switch(a.data.name){case "Components.Console":f=!0;break;case "Libraries.SyntaxHighlighter":m.Info("[SyntaxHighlighter] Initializing"),a=U("Libraries.SyntaxHighlighter"),a.defaults.toolbar=!1,a.defaults["quick-code"]=!1,a.highlight()}});try{U("Components.Console"),f=!0}catch(d){}a[1](3,"init",function(){if(!k){k=!0;f&&new (U("Components.Console"));var a=h.length;m.Info("[Astro.Blog] init("+
a+")");for(var b=0;b<a;b++)h[b]()}});a[1](3,"regInit",function(a){h[h.length]=a})})();BotanJS.define("Astro.Starfall.Element.Layer");BotanJS.define("Astro.Starfall.Layout.MainFrame");
(function(){function a(a,b){var c=k.clientWidth/k.clientHeight;if(1.2>c&&1.2<d||1.2<c&&1.2>d||b)d=c,f.Info("Responsive Event: R = "+c),BotanJS.dispatchEvent(new BotanEvent("Responsive",{ratio:c}))}S("Astro.Starfall.Layout.MainFrame");var m=U("Dandelion"),h=U("Dandelion.IDOMObject"),k=U("Dandelion.Window"),f=U("System.Debug"),d=0;U("Astro.Bootstrap").regInit(function(){var e=m.wrap(),b=m.id("begin-wrapper"),c=m.id("mbody"),g=m.tag("footer"),r=m.id("fhorizon");g.length&&(g=g[0],g=g.scrollHeight||g.offsetHeight,
e.style.height=g+(r.scrollHeight||r.offsetHeight)+"px",b.style.marginBottom="-"+g+"px");c.appendChild(e);h(window).addEventListener("Resize",a);a(0,!0)})})();BotanJS.define("Astro.Common.Element.Footer");BotanJS.define("Astro.Starfall.Element.Footer");BotanJS.define("System.Cycle.Trigger");
(function(){function a(){0>b&&(b=f.TICK.putStepper(h))}function m(a,b,r){e[e.length]=[a,b,(new Date).getTime()+r,r]}function h(){var a=(new Date).getTime(),b;for(b in e){var r=e[b];if(r&&a>r[2])try{r[0]()?(r[1](),delete e[b]):r[2]=a+r[3]}catch(p){d.Error(p),delete e[b]}}}var k=S("System.Cycle.Trigger"),f=U("System.Cycle"),d=U("System.Debug"),e=[],b=-1;k.addEventListener("NS_IMPORT",a);k[1](3,"register",m);k[1](3,"transition",function(a,b,e){m(function(){return this.wa.transition==this.xa}.bind({wa:a,
xa:b}),e,50)});k[1](3,"height",function(a,b,e){m(function(){return this.wa.clientHeight==this.xa}.bind({wa:a,xa:b}),e,50)});k[10](0,a)})();BotanJS.define("Astro.Blog.SharedStyle");BotanJS.define("Astro.Penguin.Layout.MainFrame");
(function(){function a(){var a=h.id("fhorizon");h.id("horizon").style.backgroundColor=a.style.backgroundColor="navy";h.id("menu",!0).foreach(1,function(a){a=k(a);f.push(a);null!==a.getDAttribute("active")&&a.setAttribute(new m("master",!0))})}S("Astro.Penguin.Layout.MainFrame");U("System.Cycle");U("System.Cycle.Trigger");U("System.utils.IKey");var m=U("System.utils.DataKey"),h=U("Dandelion");U("Dandelion.IDOMObject");var k=U("Dandelion.IDOMElement");U("Dandelion.Window");U("System.Debug");var f=[];
U("Astro.Bootstrap").regInit(function(){a()})})();BotanJS.define("Astro.Penguin.Page.Docs");BotanJS.define("Libraries.SyntaxHighlighter");
(function(){var a=S("Libraries");eval(function(a,h,k,f,d,e){d=function(a){return(a<h?"":d(parseInt(a/h)))+(35<(a%=h)?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){for(;k--;)e[d(k)]=f[k]||d(k);f=[function(a){return e[a]}];d=function(){return"\\w+"};k=1}for(;k--;)f[k]&&(a=a.replace(new RegExp("\\b"+d(k)+"\\b","g"),f[k]));return a}('K M;I(M)1S 2U("2a\'t 4k M 4K 2g 3l 4G 4H");(6(){6 r(f,e){I(!M.1R(f))1S 3m("3s 15 4R");K a=f.1w;f=M(f.1m,t(f)+(e||""));I(a)f.1w={1m:a.1m,19:a.19?a.19.1a(0):N};H f}6 t(f){H(f.1J?"g":"")+(f.4s?"i":"")+(f.4p?"m":"")+(f.4v?"x":"")+(f.3n?"y":"")}6 B(f,e,a,b){K c=u.L,d,h,g;v=R;5K{O(;c--;){g=u[c];I(a&g.3r&&(!g.2p||g.2p.W(b))){g.2q.12=e;I((h=g.2q.X(f))&&h.P===e){d={3k:g.2b.W(b,h,a),1C:h};1N}}}}5v(i){1S i}5q{v=11}H d}6 p(f,e,a){I(3b.Z.1i)H f.1i(e,a);O(a=a||0;a<f.L;a++)I(f[a]===e)H a;H-1}M=6(f,e){K a=[],b=M.1B,c=0,d,h;I(M.1R(f)){I(e!==1d)1S 3m("2a\'t 5r 5I 5F 5B 5C 15 5E 5p");H r(f)}I(v)1S 2U("2a\'t W 3l M 59 5m 5g 5x 5i");e=e||"";O(d={2N:11,19:[],2K:6(g){H e.1i(g)>-1},3d:6(g){e+=g}};c<f.L;)I(h=B(f,c,b,d)){a.U(h.3k);c+=h.1C[0].L||1}Y I(h=n.X.W(z[b],f.1a(c))){a.U(h[0]);c+=h[0].L}Y{h=f.3a(c);I(h==="[")b=M.2I;Y I(h==="]")b=M.1B;a.U(h);c++}a=15(a.1K(""),n.Q.W(e,w,""));a.1w={1m:f,19:d.2N?d.19:N};H a};M.3v="1.5.0";M.2I=1;M.1B=2;K C=/\\$(?:(\\d\\d?|[$&`\'])|{([$\\w]+)})/g,w=/[^5h]+|([\\s\\S])(?=[\\s\\S]*\\1)/g,A=/^(?:[?*+]|{\\d+(?:,\\d*)?})\\??/,v=11,u=[],n={X:15.Z.X,1A:15.Z.1A,1C:1r.Z.1C,Q:1r.Z.Q,1e:1r.Z.1e},x=n.X.W(/()??/,"")[1]===1d,D=6(){K f=/^/g;n.1A.W(f,"");H!f.12}(),y=6(){K f=/x/g;n.Q.W("x",f,"");H!f.12}(),E=15.Z.3n!==1d,z={};z[M.2I]=/^(?:\\\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S]))/;z[M.1B]=/^(?:\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\\d*|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S])|\\(\\?[:=!]|[?*+]\\?|{\\d+(?:,\\d*)?}\\??)/;M.1h=6(f,e,a,b){u.U({2q:r(f,"g"+(E?"y":"")),2b:e,3r:a||M.1B,2p:b||N})};M.2n=6(f,e){K a=f+"/"+(e||"");H M.2n[a]||(M.2n[a]=M(f,e))};M.3c=6(f){H r(f,"g")};M.5l=6(f){H f.Q(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,"\\\\$&")};M.5e=6(f,e,a,b){e=r(e,"g"+(b&&E?"y":""));e.12=a=a||0;f=e.X(f);H b?f&&f.P===a?f:N:f};M.3q=6(){M.1h=6(){1S 2U("2a\'t 55 1h 54 3q")}};M.1R=6(f){H 53.Z.1q.W(f)==="[2m 15]"};M.3p=6(f,e,a,b){O(K c=r(e,"g"),d=-1,h;h=c.X(f);){a.W(b,h,++d,f,c);c.12===h.P&&c.12++}I(e.1J)e.12=0};M.57=6(f,e){H 6 a(b,c){K d=e[c].1I?e[c]:{1I:e[c]},h=r(d.1I,"g"),g=[],i;O(i=0;i<b.L;i++)M.3p(b[i],h,6(k){g.U(d.3j?k[d.3j]||"":k[0])});H c===e.L-1||!g.L?g:a(g,c+1)}([f],0)};15.Z.1p=6(f,e){H J.X(e[0])};15.Z.W=6(f,e){H J.X(e)};15.Z.X=6(f){K e=n.X.1p(J,14),a;I(e){I(!x&&e.L>1&&p(e,"")>-1){a=15(J.1m,n.Q.W(t(J),"g",""));n.Q.W(f.1a(e.P),a,6(){O(K c=1;c<14.L-2;c++)I(14[c]===1d)e[c]=1d})}I(J.1w&&J.1w.19)O(K b=1;b<e.L;b++)I(a=J.1w.19[b-1])e[a]=e[b];!D&&J.1J&&!e[0].L&&J.12>e.P&&J.12--}H e};I(!D)15.Z.1A=6(f){(f=n.X.W(J,f))&&J.1J&&!f[0].L&&J.12>f.P&&J.12--;H!!f};1r.Z.1C=6(f){M.1R(f)||(f=15(f));I(f.1J){K e=n.1C.1p(J,14);f.12=0;H e}H f.X(J)};1r.Z.Q=6(f,e){K a=M.1R(f),b,c;I(a&&1j e.58()==="3f"&&e.1i("${")===-1&&y)H n.Q.1p(J,14);I(a){I(f.1w)b=f.1w.19}Y f+="";I(1j e==="6")c=n.Q.W(J,f,6(){I(b){14[0]=1f 1r(14[0]);O(K d=0;d<b.L;d++)I(b[d])14[0][b[d]]=14[d+1]}I(a&&f.1J)f.12=14[14.L-2]+14[0].L;H e.1p(N,14)});Y{c=J+"";c=n.Q.W(c,f,6(){K d=14;H n.Q.W(e,C,6(h,g,i){I(g)5b(g){24"$":H"$";24"&":H d[0];24"`":H d[d.L-1].1a(0,d[d.L-2]);24"\'":H d[d.L-1].1a(d[d.L-2]+d[0].L);5a:i="";g=+g;I(!g)H h;O(;g>d.L-3;){i=1r.Z.1a.W(g,-1)+i;g=1Q.3i(g/10)}H(g?d[g]||"":"$")+i}Y{g=+i;I(g<=d.L-3)H d[g];g=b?p(b,i):-1;H g>-1?d[g+1]:h}})})}I(a&&f.1J)f.12=0;H c};1r.Z.1e=6(f,e){I(!M.1R(f))H n.1e.1p(J,14);K a=J+"",b=[],c=0,d,h;I(e===1d||+e<0)e=5D;Y{e=1Q.3i(+e);I(!e)H[]}O(f=M.3c(f);d=f.X(a);){I(f.12>c){b.U(a.1a(c,d.P));d.L>1&&d.P<a.L&&3b.Z.U.1p(b,d.1a(1));h=d[0].L;c=f.12;I(b.L>=e)1N}f.12===d.P&&f.12++}I(c===a.L){I(!n.1A.W(f,"")||h)b.U("")}Y b.U(a.1a(c));H b.L>e?b.1a(0,e):b};M.1h(/\\(\\?#[^)]*\\)/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"});M.1h(/\\((?!\\?)/,6(){J.19.U(N);H"("});M.1h(/\\(\\?<([$\\w]+)>/,6(f){J.19.U(f[1]);J.2N=R;H"("});M.1h(/\\\\k<([\\w$]+)>/,6(f){K e=p(J.19,f[1]);H e>-1?"\\\\"+(e+1)+(3R(f.2S.3a(f.P+f[0].L))?"":"(?:)"):f[0]});M.1h(/\\[\\^?]/,6(f){H f[0]==="[]"?"\\\\b\\\\B":"[\\\\s\\\\S]"});M.1h(/^\\(\\?([5A]+)\\)/,6(f){J.3d(f[1]);H""});M.1h(/(?:\\s+|#.*)+/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"},M.1B,6(){H J.2K("x")});M.1h(/\\./,6(){H"[\\\\s\\\\S]"},M.1B,6(){H J.2K("s")})})();1j 2e!="1d"&&(2e.M=M);K 1v=6(){6 r(a,b){a.1l.1i(b)!=-1||(a.1l+=" "+b)}6 t(a){H a.1i("3e")==0?a:"3e"+a}6 B(a){H e.1Y.2A[t(a)]}6 p(a,b,c){I(a==N)H N;K d=c!=R?a.3G:[a.2G],h={"#":"1c",".":"1l"}[b.1o(0,1)]||"3h",g,i;g=h!="3h"?b.1o(1):b.5u();I((a[h]||"").1i(g)!=-1)H a;O(a=0;d&&a<d.L&&i==N;a++)i=p(d[a],b,c);H i}6 C(a,b){K c={},d;O(d 2g a)c[d]=a[d];O(d 2g b)c[d]=b[d];H c}6 w(a,b,c,d){6 h(g){g=g||1P.5y;I(!g.1F){g.1F=g.52;g.3N=6(){J.5w=11}}c.W(d||1P,g)}a.3g?a.3g("4U"+b,h):a.4y(b,h,11)}6 A(a,b){K c=e.1Y.2j,d=N;I(c==N){c={};O(K h 2g e.1U){K g=e.1U[h];d=g.4x;I(d!=N){g.1V=h.4w();O(g=0;g<d.L;g++)c[d[g]]=h}}e.1Y.2j=c}d=e.1U[c[a]];d==N&&b!=11&&1P.1X(e.13.1x.1X+(e.13.1x.3E+a));H d}6 v(a,b){O(K c=a.1e("\\n"),d=0;d<c.L;d++)c[d]=b(c[d],d);H c.1K("\\n")}6 u(a,b){I(a==N||a.L==0||a=="\\n")H a;a=a.Q(/</g,"&1y;");a=a.Q(/ {2,}/g,6(c){O(K d="",h=0;h<c.L-1;h++)d+=e.13.1W;H d+" "});I(b!=N)a=v(a,6(c){I(c.L==0)H"";K d="";c=c.Q(/^(&2s;| )+/,6(h){d=h;H""});I(c.L==0)H d;H d+\'<17 1g="\'+b+\'">\'+c+"</17>"});H a}6 n(a,b){a.1e("\\n");O(K c="",d=0;d<50;d++)c+="                    ";H a=v(a,6(h){I(h.1i("\\t")==-1)H h;O(K g=0;(g=h.1i("\\t"))!=-1;)h=h.1o(0,g)+c.1o(0,b-g%b)+h.1o(g+1,h.L);H h})}6 x(a){H a.Q(/^\\s+|\\s+$/g,"")}6 D(a,b){I(a.P<b.P)H-1;Y I(a.P>b.P)H 1;Y I(a.L<b.L)H-1;Y I(a.L>b.L)H 1;H 0}6 y(a,b){6 c(k){H k[0]}O(K d=N,h=[],g=b.2D?b.2D:c;(d=b.1I.X(a))!=N;){K i=g(d,b);I(1j i=="3f")i=[1f e.2L(i,d.P,b.23)];h=h.1O(i)}H h}6 E(a){K b=/(.*)((&1G;|&1y;).*)/;H a.Q(e.3A.3M,6(c){K d="",h=N;I(h=b.X(c)){c=h[1];d=h[2]}H\'<a 2h="\'+c+\'">\'+c+"</a>"+d})}6 z(){O(K a=1E.36("1k"),b=[],c=0;c<a.L;c++)a[c].3s=="20"&&b.U(a[c]);H b}6 f(a){a=a.1F;K b=p(a,".20",R);a=p(a,".3O",R);K c=1E.4i("3t");I(!(!a||!b||p(a,"3t"))){B(b.1c);r(b,"1m");O(K d=a.3G,h=[],g=0;g<d.L;g++)h.U(d[g].4z||d[g].4A);h=h.1K("\\r");c.39(1E.4D(h));a.39(c);c.2C();c.4C();w(c,"4u",6(){c.2G.4E(c);b.1l=b.1l.Q("1m","")})}}I(1j 3F!="1d"&&1j M=="1d")M=3F("M").M;K e={2v:{"1g-27":"","2i-1s":1,"2z-1s-2t":11,1M:N,1t:N,"42-45":R,"43-22":4,1u:R,16:R,"3V-17":R,2l:11,"41-40":R,2k:11,"1z-1k":11},13:{1W:"&2s;",2M:R,46:11,44:11,34:"4n",1x:{21:"4o 1m",2P:"?",1X:"1v\\n\\n",3E:"4r\'t 4t 1D O: ",4g:"4m 4B\'t 51 O 1z-1k 4F: ",37:\'<!4T 1z 4S "-//4V//3H 4W 1.0 4Z//4Y" "1Z://2y.3L.3K/4X/3I/3H/3I-4P.4J"><1z 4I="1Z://2y.3L.3K/4L/5L"><3J><4N 1Z-4M="5G-5M" 6K="2O/1z; 6J=6I-8" /><1t>6L 1v</1t></3J><3B 1L="25-6M:6Q,6P,6O,6N-6F;6y-2f:#6x;2f:#6w;25-22:6v;2O-3D:3C;"><T 1L="2O-3D:3C;3w-32:1.6z;"><T 1L="25-22:6A-6E;">1v</T><T 1L="25-22:.6C;3w-6B:6R;"><T>3v 3.0.76 (72 73 3x)</T><T><a 2h="1Z://3u.2w/1v" 1F="38" 1L="2f:#3y">1Z://3u.2w/1v</a></T><T>70 17 6U 71.</T><T>6T 6X-3x 6Y 6D.</T></T><T>6t 61 60 J 1k, 5Z <a 2h="6u://2y.62.2w/63-66/65?64=5X-5W&5P=5O" 1L="2f:#3y">5R</a> 5V <2R/>5U 5T 5S!</T></T></3B></1z>\'}},1Y:{2j:N,2A:{}},1U:{},3A:{6n:/\\/\\*[\\s\\S]*?\\*\\//2c,6m:/\\/\\/.*$/2c,6l:/#.*$/2c,6k:/"([^\\\\"\\n]|\\\\.)*"/g,6o:/\'([^\\\\\'\\n]|\\\\.)*\'/g,6p:1f M(\'"([^\\\\\\\\"]|\\\\\\\\.)*"\',"3z"),6s:1f M("\'([^\\\\\\\\\']|\\\\\\\\.)*\'","3z"),6q:/(&1y;|<)!--[\\s\\S]*?--(&1G;|>)/2c,3M:/\\w+:\\/\\/[\\w-.\\/?%&=:@;]*/g,6a:{18:/(&1y;|<)\\?=?/g,1b:/\\?(&1G;|>)/g},69:{18:/(&1y;|<)%=?/g,1b:/%(&1G;|>)/g},6d:{18:/(&1y;|<)\\s*1k.*?(&1G;|>)/2T,1b:/(&1y;|<)\\/\\s*1k\\s*(&1G;|>)/2T}},16:{1H:6(a){6 b(i,k){H e.16.2o(i,k,e.13.1x[k])}O(K c=\'<T 1g="16">\',d=e.16.2x,h=d.2X,g=0;g<h.L;g++)c+=(d[h[g]].1H||b)(a,h[g]);c+="</T>";H c},2o:6(a,b,c){H\'<2W><a 2h="#" 1g="6e 6h\'+b+" "+b+\'">\'+c+"</a></2W>"},2b:6(a){K b=a.1F,c=b.1l||"";b=B(p(b,".20",R).1c);K d=6(h){H(h=15(h+"6f(\\\\w+)").X(c))?h[1]:N}("6g");b&&d&&e.16.2x[d].2B(b);a.3N()},2x:{2X:["21","2P"],21:{1H:6(a){I(a.V("2l")!=R)H"";K b=a.V("1t");H e.16.2o(a,"21",b?b:e.13.1x.21)},2B:6(a){a=1E.6j(t(a.1c));a.1l=a.1l.Q("47","")}},2P:{2B:6(){K a="68=0";a+=", 18="+(31.30-33)/2+", 32="+(31.2Z-2Y)/2+", 30=33, 2Z=2Y";a=a.Q(/^,/,"");a=1P.6Z("","38",a);a.2C();K b=a.1E;b.6W(e.13.1x.37);b.6V();a.2C()}}}},35:6(a,b){K c;I(b)c=[b];Y{c=1E.36(e.13.34);O(K d=[],h=0;h<c.L;h++)d.U(c[h]);c=d}c=c;d=[];I(e.13.2M)c=c.1O(z());I(c.L===0)H d;O(h=0;h<c.L;h++){O(K g=c[h],i=a,k=c[h].1l,j=3W 0,l={},m=1f M("^\\\\[(?<2V>(.*?))\\\\]$"),s=1f M("(?<27>[\\\\w-]+)\\\\s*:\\\\s*(?<1T>[\\\\w-%#]+|\\\\[.*?\\\\]|\\".*?\\"|\'.*?\')\\\\s*;?","g");(j=s.X(k))!=N;){K o=j.1T.Q(/^[\'"]|[\'"]$/g,"");I(o!=N&&m.1A(o)){o=m.X(o);o=o.2V.L>0?o.2V.1e(/\\s*,\\s*/):[]}l[j.27]=o}g={1F:g,1n:C(i,l)};g.1n.1D!=N&&d.U(g)}H d},1M:6(a,b){K c=J.35(a,b),d=N,h=e.13;I(c.L!==0)O(K g=0;g<c.L;g++){b=c[g];K i=b.1F,k=b.1n,j=k.1D,l;I(j!=N){I(k["1z-1k"]=="R"||e.2v["1z-1k"]==R){d=1f e.4l(j);j="4O"}Y I(d=A(j))d=1f d;Y 6H;l=i.3X;I(h.2M){l=l;K m=x(l),s=11;I(m.1i("<![6G[")==0){m=m.4h(9);s=R}K o=m.L;I(m.1i("]]\\>")==o-3){m=m.4h(0,o-3);s=R}l=s?m:l}I((i.1t||"")!="")k.1t=i.1t;k.1D=j;d.2Q(k);b=d.2F(l);I((i.1c||"")!="")b.1c=i.1c;i.2G.74(b,i)}}},2E:6(a){w(1P,"4k",6(){e.1M(a)})}};e.2E=e.2E;e.1M=e.1M;e.2L=6(a,b,c){J.1T=a;J.P=b;J.L=a.L;J.23=c;J.1V=N};e.2L.Z.1q=6(){H J.1T};e.4l=6(a){6 b(j,l){O(K m=0;m<j.L;m++)j[m].P+=l}K c=A(a),d,h=1f e.1U.5Y,g=J,i="2F 1H 2Q".1e(" ");I(c!=N){d=1f c;O(K k=0;k<i.L;k++)(6(){K j=i[k];g[j]=6(){H h[j].1p(h,14)}})();d.28==N?1P.1X(e.13.1x.1X+(e.13.1x.4g+a)):h.2J.U({1I:d.28.17,2D:6(j){O(K l=j.17,m=[],s=d.2J,o=j.P+j.18.L,F=d.28,q,G=0;G<s.L;G++){q=y(l,s[G]);b(q,o);m=m.1O(q)}I(F.18!=N&&j.18!=N){q=y(j.18,F.18);b(q,j.P);m=m.1O(q)}I(F.1b!=N&&j.1b!=N){q=y(j.1b,F.1b);b(q,j.P+j[0].5Q(j.1b));m=m.1O(q)}O(j=0;j<m.L;j++)m[j].1V=c.1V;H m}})}};e.4j=6(){};e.4j.Z={V:6(a,b){K c=J.1n[a];c=c==N?b:c;K d={"R":R,"11":11}[c];H d==N?c:d},3Y:6(a){H 1E.4i(a)},4c:6(a,b){K c=[];I(a!=N)O(K d=0;d<a.L;d++)I(1j a[d]=="2m")c=c.1O(y(b,a[d]));H J.4e(c.6b(D))},4e:6(a){O(K b=0;b<a.L;b++)I(a[b]!==N)O(K c=a[b],d=c.P+c.L,h=b+1;h<a.L&&a[b]!==N;h++){K g=a[h];I(g!==N)I(g.P>d)1N;Y I(g.P==c.P&&g.L>c.L)a[b]=N;Y I(g.P>=c.P&&g.P<d)a[h]=N}H a},4d:6(a){K b=[],c=2u(J.V("2i-1s"));v(a,6(d,h){b.U(h+c)});H b},3U:6(a){K b=J.V("1M",[]);I(1j b!="2m"&&b.U==N)b=[b];a:{a=a.1q();K c=3W 0;O(c=c=1Q.6c(c||0,0);c<b.L;c++)I(b[c]==a){b=c;1N a}b=-1}H b!=-1},2r:6(a,b,c){a=["1s","6i"+b,"P"+a,"6r"+(b%2==0?1:2).1q()];J.3U(b)&&a.U("67");b==0&&a.U("1N");H\'<T 1g="\'+a.1K(" ")+\'">\'+c+"</T>"},3Q:6(a,b){K c="",d=a.1e("\\n").L,h=2u(J.V("2i-1s")),g=J.V("2z-1s-2t");I(g==R)g=(h+d-1).1q().L;Y I(3R(g)==R)g=0;O(K i=0;i<d;i++){K k=b?b[i]:h+i,j;I(k==0)j=e.13.1W;Y{j=g;O(K l=k.1q();l.L<j;)l="0"+l;j=l}a=j;c+=J.2r(i,k,a)}H c},49:6(a,b){a=x(a);K c=a.1e("\\n");J.V("2z-1s-2t");K d=2u(J.V("2i-1s"));a="";O(K h=J.V("1D"),g=0;g<c.L;g++){K i=c[g],k=/^(&2s;|\\s)+/.X(i),j=N,l=b?b[g]:d+g;I(k!=N){j=k[0].1q();i=i.1o(j.L);j=j.Q(" ",e.13.1W)}i=x(i);I(i.L==0)i=e.13.1W;a+=J.2r(g,l,(j!=N?\'<17 1g="\'+h+\' 5N">\'+j+"</17>":"")+i)}H a},4f:6(a){H a?"<4a>"+a+"</4a>":""},4b:6(a,b){6 c(l){H(l=l?l.1V||g:g)?l+" ":""}O(K d=0,h="",g=J.V("1D",""),i=0;i<b.L;i++){K k=b[i],j;I(!(k===N||k.L===0)){j=c(k);h+=u(a.1o(d,k.P-d),j+"48")+u(k.1T,j+k.23);d=k.P+k.L+(k.75||0)}}h+=u(a.1o(d),c()+"48");H h},1H:6(a){K b="",c=["20"],d;I(J.V("2k")==R)J.1n.16=J.1n.1u=11;1l="20";J.V("2l")==R&&c.U("47");I((1u=J.V("1u"))==11)c.U("6S");c.U(J.V("1g-27"));c.U(J.V("1D"));a=a.Q(/^[ ]*[\\n]+|[\\n]*[ ]*$/g,"").Q(/\\r/g," ");b=J.V("43-22");I(J.V("42-45")==R)a=n(a,b);Y{O(K h="",g=0;g<b;g++)h+=" ";a=a.Q(/\\t/g,h)}a=a;a:{b=a=a;h=/<2R\\s*\\/?>|&1y;2R\\s*\\/?&1G;/2T;I(e.13.46==R)b=b.Q(h,"\\n");I(e.13.44==R)b=b.Q(h,"");b=b.1e("\\n");h=/^\\s*/;g=4Q;O(K i=0;i<b.L&&g>0;i++){K k=b[i];I(x(k).L!=0){k=h.X(k);I(k==N){a=a;1N a}g=1Q.4q(k[0].L,g)}}I(g>0)O(i=0;i<b.L;i++)b[i]=b[i].1o(g);a=b.1K("\\n")}I(1u)d=J.4d(a);b=J.4c(J.2J,a);b=J.4b(a,b);b=J.49(b,d);I(J.V("41-40"))b=E(b);1j 2H!="1d"&&2H.3S&&2H.3S.1C(/5s/)&&c.U("5t");H b=\'<T 1c="\'+t(J.1c)+\'" 1g="\'+c.1K(" ")+\'">\'+(J.V("16")?e.16.1H(J):"")+\'<3Z 5z="0" 5H="0" 5J="0">\'+J.4f(J.V("1t"))+"<3T><3P>"+(1u?\'<2d 1g="1u">\'+J.3Q(a)+"</2d>":"")+\'<2d 1g="17"><T 1g="3O">\'+b+"</T></2d></3P></3T></3Z></T>"},2F:6(a){I(a===N)a="";J.17=a;K b=J.3Y("T");b.3X=J.1H(a);J.V("16")&&w(p(b,".16"),"5c",e.16.2b);J.V("3V-17")&&w(p(b,".17"),"56",f);H b},2Q:6(a){J.1c=""+1Q.5d(1Q.5n()*5k).1q();e.1Y.2A[t(J.1c)]=J;J.1n=C(e.2v,a||{});I(J.V("2k")==R)J.1n.16=J.1n.1u=11},5j:6(a){a=a.Q(/^\\s+|\\s+$/g,"").Q(/\\s+/g,"|");H"\\\\b(?:"+a+")\\\\b"},5f:6(a){J.28={18:{1I:a.18,23:"1k"},1b:{1I:a.1b,23:"1k"},17:1f M("(?<18>"+a.18.1m+")(?<17>.*?)(?<1b>"+a.1b.1m+")","5o")}}};H e}();1j 2e!="1d"&&(2e.1v=1v);',62,
441,"      function                                     return if this var length XRegExp null for index replace true  div push getParam call exec else prototype  false lastIndex config arguments RegExp toolbar code left captureNames slice right id undefined split new class addToken indexOf typeof script className source params substr apply toString String line title gutter SyntaxHighlighter _xregexp strings lt html test OUTSIDE_CLASS match brush document target gt getHtml regex global join style highlight break concat window Math isRegExp throw value brushes brushName space alert vars http syntaxhighlighter expandSource size css case font Fa name htmlScript dA can handler gm td exports color in href first discoveredBrushes light collapse object cache getButtonHtml trigger pattern getLineHtml nbsp numbers parseInt defaults com items www pad highlighters execute focus func all getDiv parentNode navigator INSIDE_CLASS regexList hasFlag Match useScriptTags hasNamedCapture text help init br input gi Error values span list 250 height width screen top 500 tagName findElements getElementsByTagName aboutDialog _blank appendChild charAt Array copyAsGlobal setFlag highlighter_ string attachEvent nodeName floor backref output the TypeError sticky Za iterate freezeTokens scope type textarea alexgorbatchev version margin 2010 005896 gs regexLib body center align noBrush require childNodes DTD xhtml1 head org w3 url preventDefault container tr getLineNumbersHtml isNaN userAgent tbody isLineHighlighted quick void innerHTML create table links auto smart tab stripBrs tabs bloggerMode collapsed plain getCodeLinesHtml caption getMatchesHtml findMatches figureOutLineNumbers removeNestedMatches getTitleHtml brushNotHtmlScript substring createElement Highlighter load HtmlScript Brush pre expand multiline min Can ignoreCase find blur extended toLowerCase aliases addEventListener innerText textContent wasn select createTextNode removeChild option same frame xmlns dtd twice 1999 equiv meta htmlscript transitional 1E3 expected PUBLIC DOCTYPE on W3C XHTML TR EN Transitional  configured srcElement Object after run dblclick matchChain valueOf constructor default switch click round execAt forHtmlScript token gimy functions getKeywords 1E6 escape within random sgi another finally supply MSIE ie toUpperCase catch returnValue definition event border imsx constructing one Infinity from when Content cellpadding flags cellspacing try xhtml Type spaces 2930402 hosted_button_id lastIndexOf donate active development keep to xclick _s Xml please like you paypal cgi cmd webscr bin highlighted scrollbars aspScriptTags phpScriptTags sort max scriptScriptTags toolbar_item _ command command_ number getElementById doubleQuotedString singleLinePerlComments singleLineCComments multiLineCComments singleQuotedString multiLineDoubleQuotedString xmlComments alt multiLineSingleQuotedString If https 1em 000 fff background 5em xx bottom 75em Gorbatchev large serif CDATA continue utf charset content About family sans Helvetica Arial Geneva 3em nogutter Copyright syntax close write 2004 Alex open JavaScript highlighter July 02 replaceChild offset 83".split(" "),
0,{}));a[1](2,"SyntaxHighlighter",eval("SyntaxHighlighter"))})();BotanJS.define("Libraries.SyntaxHighlighter.Core.FadeToGrey");BotanJS.define("Libraries.SyntaxHighlighter.Theme.FadeToGrey");BotanJS.define("Libraries.SyntaxHighlighter.Brush.JScript");
(function(){function a(){var a=h.regexLib;this.regexList=[{regex:a.multiLineDoubleQuotedString,css:"string"},{regex:a.multiLineSingleQuotedString,css:"string"},{regex:a.singleLineCComments,css:"comments"},{regex:a.multiLineCComments,css:"comments"},{regex:/\s*#.*/gm,css:"preprocessor"},{regex:new RegExp(this.getKeywords("break case catch continue default delete do else false  for function if in instanceof new null return super switch this throw true try typeof var while with"),"gm"),css:"keyword"}];
this.forHtmlScript(a.scriptScriptTags)}var m=S("Libraries.SyntaxHighlighter.Brush"),h=U("Libraries.SyntaxHighlighter");a.prototype=new h.Highlighter;a.aliases=["js","jscript","javascript"];h.brushes.JScript=a;m[1](2,"JScript",a)})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.ea={}}function m(a,d){this.ua=a+"";this.newLine=Boolean(d)}var h=S("Components.Vim.State"),k=U("System.Debug");m.prototype.newLine=!1;m.prototype.toString=function(){return this.ua};m.prototype.indexOf=function(a,d){return this.ua.indexOf(a,d)};v(m.prototype,"length",function(){return this.ua.length});a.prototype.ab=function(a){this.ea['"']=a};a.prototype.yank=function(a,d){var e=new m(a,d);this.ab(e);this.ea[this.S||0]=e;this.S=!1};a.prototype.change=function(a,d){var e=
new m(a,d);this.ab(e);for(var b=this.ea,c=9;1<c;c--)void 0!=b[c-1]&&(b[c]=b[c-1]);b[1]=e;this.S=!1};a.prototype.get=function(a){a||0===a||(a=this.S||'"');this.S=!1;return this.ea[a]};a.prototype.select=function(a){k.Info("Selecting Register: "+a);this.S=a};h[1](2,"Registers",a)})();BotanJS.define("Components.Vim");
(function(){function a(a,e,b){if(void 0==a[e])return e;var c=0;return a[e].replace(/%\d+/g,function(){return b[c++]})}var m=S("Components.Vim"),h={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL --",VISLINE:"-- VISUAL LINE --",REGISTERS:"--- Registers ---",WRITE:'"%1" %2L, %3C written',WAIT_FOR_INPUT:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",
UNDO_LIMIT:"Already at oldest change",REDO_LIMIT:"Already at newest change",NCHANGES:"%1 change(s); before #%2  %3",LINES_FEWER:"%1 fewer line(s)",LINES_MORE:"%1 more line(s)",LINES_YANKED:"%1 line(s) yanked",LINES_SHIFTED:"%1 line(s) %2ed %3 time(s)",NO_SHIFT:"No line to %1",SEARCH_HIT_BOTTOM:"search hit BOTTOM, continuing at TOP",SEARCH_HIT_TOP:"search hit TOP, continuing at BOTTOM",REPLACE:"%1 substitution(s) on %2 line(s)",VA_REC_START:"Recording Session ...",VA_REC_REPLAY:"Replaying Session ...",
VA_REC_END:"Session Ended"},k={E35:"No previous regular expression",E37:"No write since last change (add ! to override)",E481:"No range allowed",E492:"Not an editor command: %1",E486:"Pattern not found: %1",E488:"Trailing characters",EX1:"Pattern Error( %1 )",EX2:"This pattern is causing infinite loop: %1",TODO:"%1 is not implemented yet",MISSING_FEATURE:'Sorry, I thought this command wasn\'t useful enough to implement. Please file a feature request titled "Implement %1" in github if you think this is important.'},
f=new Audio("data:audio/ogg;base64,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");
m[1](3,"Message",function(d){return a(h,d,Array.prototype.slice.call(arguments,1))});m[1](3,"Error",function(d){return d+": "+a(k,d,Array.prototype.slice.call(arguments,1))});m[1](3,"Beep",function(){setTimeout(function(){f.pause();f.currentTime=0;f.play()},0)})})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var d=0;d<k;d++)for(var e=h[d],b=e.length,c=0;c<b;c++){var g=e[c];if(g[0]<=a&&a<=g[1]){a=e;break a}}a=[]}this.Bb=a}var m=S("Components.Vim.Syntax"),h=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]],[[32,32],[9,9]]],k=h.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var d=this.Bb,e=d.length;a=a.charCodeAt(0);for(var b=0;b<e;b++){var c=d[b];if(c[0]<=
a&&a<=c[1])return!0}return!1};m[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.Oa=this.ta=this.L=this.Q=-1;this.Sa=null}function m(a){this.N=a;this.ha={}}function h(b,g){if(!g)throw Error("Parent not found");var e=new a;e.Oa=g[2];e.Q=g[0];e.L=g[1];if(-1<g[3]){var p=b.find(g[3]);e.Sa=h(b,p)}return e}function k(a,b){for(var e=b.length,p=a.split("\n"),s=p[0],p=p[1],q=[],h=[],k=0,f=[],m=s.length,y=p.length,u=0;u<e;u++){var B=b.substr(u,y);if(b.substr(u,m)==s)q[k]=u,k++,u+=m-1;else if(B==p){B=u;if(0==k)h.push(B);else{var E=[];E[0]=q[--k];E[1]=B;E[2]=
k;E[3]=0<k?q[k-1]:-1;f.push(E)}u+=y-1}}h.length&&d.Info('Unmatched opening "'+s+'"@'+h.join(", "));0<k&&d.Info('Unmatched closing "'+p+'"@'+q.slice(0,k));this.Qa=f}var f=S("Components.Vim.Syntax"),d=U("System.Debug"),e=U("Components.Vim.Beep"),b=f[0]("Word");k.prototype.find=function(a,b){void 0==b&&(b=0);for(var e=this.Qa,p=e.length,d=0;d<p;d++){var k=e[d];if(k[b]==a)return k}return null};m.prototype.bracketAt=function(b){var g=this.N.content,e=1,p=null,d=g[b];switch(d){case "{":e=0;case "}":p=this.O("{\n}");
break;case "[":e=0;case "]":p=this.O("[\n]");break;case "(":e=0;case ")":p=this.O("(\n)");break;case "/":if("*"==g[b-1]){d="*/";b--;break}else if("*"==g[b+1]){d="/*";break}return new a;case "*":if("/"==g[b-1]){d="/*";b--;break}else if("/"==g[b+1]){d="*/";break}return new a;default:return new a}if(!p)switch(d){case "/*":e=0;case "*/":p=this.O("/*\n*/");break;default:return new a}g=p.find(b,e);p=h(p,g);p.ta=b;return p};m.prototype.bracketIn=function(b,g){var e="{[(".indexOf(b);0>e&&(e="}])".indexOf(b));
if(0>e)throw Error("Unsupported bracket: "+b);for(var p=this.O("{[("[e]+"\n"+"}])"[e]),d=p.Qa,k=d.length,f=null,e=0;e<k;e++){var m=d[e];m[0]<=g&&g<=m[1]&&(f&&f[2]<m[2]||!f)&&(f=m)}if(f){p=e=h(p,f);do p.Q++,p.L--;while(p=p.parent);return e}return new a};m.prototype.quoteIn=function(b){for(var g=this.N,d=g.cursor,p=d.c().lineNum,k=0,h=0;-1!=k&&h<p;h++)k=g.content.indexOf("\n",k+1);var f=g.content.indexOf("\n",k+1);0<p&&k++;p=k;if(g.content[d.aPos]==b){for(var m=[],k=0,h=p;h<f;h++)g.content[h]==b&&(m[k++]=
h);h=m.indexOf(d.aPos);if(0!=k%2&&h==k-1)return e(),new a;d.moveX(0==h%2?1:-1)}h=g.content.indexOf(b,d.aPos+1);g=g.content.lastIndexOf(b,d.aPos-1);if(p<=g&&h<f)return f=new a,f.Q=g+1,f.L=h-1,f.ta=b,f;e();return new a};m.prototype.O=function(a){if(this.ha[a])return this.ha[a];var b=new k(a,this.N.content);return this.ha[a]=b};m.prototype.reset=function(){this.ha={}};m.prototype.quoteAt=function(a){switch(this.N.content[a]){default:return{level:0,open:-1,close:-1}}};m.prototype.wordAt=function(e){var g=
this.N.content,d=g.length,p=e,k=e,h=new b(g[e]);if(0<e)for(;h.test(g[--p]););if(e<d)for(;h.test(g[++k]););e=new a;e.Q=0<p?p+1:0;e.L=k-1;return e};v(a.prototype,"parent",function(){return this.Sa});v(a.prototype,"open",function(){return this.Q});v(a.prototype,"close",function(){return this.L});v(a.prototype,"level",function(){return this.Oa});v(a.prototype,"selected",function(){return this.ta});f[1](2,"Analyzer",m);f[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,k){this.prev=null;this.cols=a;this.next=k;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=4;this.va="";for(var f=0;f<this.tabWidth;f++)this.va+=" ";k&&(k.prev=this)}var m=S("Components.Vim");U("System.Debug");U("System.utils.Perf.CountSubstr");a.prototype.Z=function(a,k,f){this.lineNum=f;if(void 0==a||""===a)this.lineNum=++f,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.Z(a,k,f+1);else{this.placeholder=!1;var d="",e=!1,b=0,c=0,g=this.tabWidth-
1;if(k){for(;b<this.cols-c*g;b++){var r=a[b];if(void 0===r)break;if("\n"==r){e=!0;b++;break}else"\t"==r&&c++;d+=r}e||b!=this.cols||"\n"!=a[b]||(b++,e=!0)}else for(e=!0;;b++){r=a[b];if(void 0===r)break;if("\n"==r){b++;break}else"\t"==r&&c++;b<this.cols-c*g&&(d+=r)}this.next&&(this.next.br=e,this.next.Z(a.substr(b),k,e?f+1:f));this.content=d}};a.prototype.toString=function(){var a=this.content.replace(/\t/g,this.va);return a.length<this.cols?a+" ":a||" "};v(a.prototype,"nextLine",function(){for(var a=
this,k=this.lineNum;(a=a.next)&&a.lineNum==k;);return a});v(a.prototype,"visualLines",function(){for(var a=[this],k=this;(k=k.next)&&!k.br;)a.push(k);return a});m[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");
(function(){function a(){this.U=[];this.rb=[];this.Xa=this.Na=this.f=0}var m=S("Components.Vim.State");a.prototype.undo=function(){var a=this.f-1;return-1!=a&&this.U.length?this.U[this.f=a]:null};a.prototype.redo=function(){var a=this.U[this.f];return a?(this.f++,a):null};a.prototype.save=function(){this.Xa=this.f};a.prototype.record=function(a){this.U[this.f++]=a;this.rb[this.Na++]=a;delete this.U[this.f];a.id=this.Na};v(a.prototype,"changed",function(){return this.Xa!=this.f});m[1](2,"Recorder",
a)})();BotanJS.define("Components.Vim.Actions.QUIT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Error");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f){a.preventDefault();var d=this.a,e=d.Vim,b=f.join("").trim();if(b&&"!"==b[0]&&1<b.length)return this.b=h("E488"),!1;if(!b&&d.rec.changed){d=h("E37");e=this.a.feeder.firstBuffer.cols;for(b=d.length;b<e;b++)d+=" ";this.b=d}else return e.dispose(),
!0};a.prototype.getMessage=function(){return this.b};m[1](2,"QUIT",a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,k){this.a=a;this.sb=void 0==k?a.aPos:k;this.tb=this.Wa()}var m=S("Components.Vim.State");a.prototype.save=function(a,k,f){void 0==f&&(f=0);var d=this.a,e=d.feeder,b=this.sb-f,c=this.tb,g=this.Wa(),r=c;return function(){var p=e.content.substr(b,a);e.content=e.content.substring(0,b)+k+e.content.substring(b+a);a=k.length;k=p;d.PStart=r.e;d.PEnd=r.e+1;d.X=r.x;d.Y=r.y;d.pX=r.Ab-1;e.panX=r.Db;e.panY=r.Eb;e.pan();r=r==c?g:c}};a.prototype.Wa=function(){var a=this.a,a={e:a.PStart,
x:a.X,y:a.Y,Ab:a.pX,Db:a.feeder.panX,Eb:a.feeder.panY};0<a.x&&(--a.e,--a.x);return a};m[1](2,"Stator",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,k,f){if(void 0==a[k])return k;var d=0;return a[k].replace(/%\d+/g,function(){return f[d++]})}var m={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};S("Components.Vim.DateTime")[1](3,"String",function(h){return a(m,h,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(a,b){var c=a%10,g=a%100;if(1>=a)throw Error("Invalid number of Time units");return 2<=a&&4>=a?h(b[0],a):1==c&&11!=g?h(b[1],a):2<=c&&4>=c&&!(12<=g&&14>=g)?h(b[2],a):h(b[3],a)}var m=S("Components.Vim.DateTime"),h=m[0]("String"),k=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],f=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],d=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];m[1](3,"RelativeTime",function(e){var b=Math.round(.001*((new Date).getTime()-e.getTime()));if(31536E3<b)result=h("OverAYearAgo");else if(3952800<b)if(e=Math.round((b+1317600)/2635200),2<=e&&4>=e)result=h("XMonthsAgo_2To4",e);else if(5<=e&&12>=e)result=h("XMonthsAgo_5To12",e);else throw Error("Invalid number of Months");else if(2116800<=b)result=h("AboutAMonthAgo");else if(604800<=b)e=Math.round(b/604800),result=1<e?h("XWeeksAgo_2To4",e):h("AboutAWeekAgo");else{if(432E3<=b)switch(e.getDay()){case 1:e=
h("last Monday");break;case 2:e=h("last Tuesday");break;case 3:e=h("last Wednesday");break;case 4:e=h("last Thursday");break;case 5:e=h("last Friday");break;case 6:e=h("last Saturday");break;case 0:e=h("last Sunday");break;default:e=h("last Sunday")}else if(86400<=b)switch(e.getDay()){case 1:e=h("on Monday");break;case 2:e=h("on Tuesday");break;case 3:e=h("on Wednesday");break;case 4:e=h("on Thursday");break;case 5:e=h("on Friday");break;case 6:e=h("on Saturday");break;case 0:e=h("on Sunday");break;
default:e=h("on Sunday")}else e=7200<=b?a(Math.round(b/3600),k):3600<=b?h("AboutAnHourAgo"):120<=b?a(Math.round(b/60),f):60<=b?h("AboutAMinuteAgo"):a(1<b?b:2,d);result=e}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var m=S("Components.Vim.State"),h=U("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.Ma=a;this.xb=new Date;this.id=0};a.prototype.play=function(){this.Ma&&this.Ma()};v(a.prototype,"time",function(){return h(this.xb)});m[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.JOIN_LINES");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),f=U("Components.Vim.Beep");U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,e){a.preventDefault();var b=this.a,c=b.feeder,g,r,p,s;if(e)g=e.start;else{s=b.aPos;b.lineEnd(!0);p=new h(b);g=b.aPos;b.moveY(1);b.lineStart();
r=b.aPos;if(r<g)return b.moveTo(s),f(),!0;var q=c.content;s=c.content.substring(g,r);c.content=q.substring(0,g)+" "+q.substr(r)}c.pan();b.moveTo(g);c=new k;c.store(p.save(1,s));b.rec.record(c)};a.prototype.getMessage=function(){return this.b};m[1](2,"JOIN_LINES",a)})();BotanJS.define("Components.Vim.State.History");
(function(){function a(a){f[a]||(f[a]=[]);this.r=f[a];this.reset()}function m(a,e){var b=e.length;if(a.length<b)return!1;for(var c=0;c<b;c++)if(a[c]!=e[c])return!1;return!0}var h=S("Components.Vim.State"),k=U("System.Debug"),f={};a.prototype.push=function(a){var e;if(e=this.r.length)a:{e=this.r[this.r.length-1];for(var b=e.length<a.length?a.length:e.length,c=0;c<b;c++)if(e[c]!=a[c]){e=!1;break a}e=!0}e?k.Info("This is the previous command, skipping"):this.r.push(a)};a.prototype.prev=function(a){for(this.r.length<=
this.f&&this.reset();-1<this.f;){var e=this.r[this.f--];if(e&&m(e,a))return e.slice()}return null};a.prototype.next=function(a){0>this.f&&(this.f++,this.next(a));for(;this.f<this.r.length;){var e=this.r[this.f++];if(e&&m(e,a))return e.slice()}return null};a.prototype.reset=function(){this.f=this.r.length-1};h[1](2,"History",a)})();BotanJS.define("Components.Vim.Ex.Command");
(function(){function a(a,c){var g=this;if(!e[c])throw Error("Unsupport mode: "+c);this.a=a;this.$a=a.Vim.statusBar;this.n=c;this.aa=new f(e[c]);this.g=[];this.p=null;this.za="ExCommandBlinkCycle"+k.uuid;this.j=0;var d=a.feeder,p=!1,s=!1;this.J=function(){s=p=!0};h.perma(this.za,function(){s?s=!1:p=!p;d.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))},600);this.jb=function(){for(var e="",c=g.g,d=g.j,r=c.length,k=0;k<r;k++){var f=c[k];p&&k==d&&(face=!0,f=a.face+f.substr(1));e+=f}p&&r<=d&&(e+=
a.face);return e};this.$a.override=this.jb}var m=S("Components.Vim.Ex"),h=U("System.Cycle");U("System.Debug");var k=U("System.utils.Perf"),f=U("Components.Vim.State.History");U("Components.Vim.Message");var d=U("Components.Vim.Beep"),e={"/":k.uuid,":":k.uuid};a.prototype.dispose=function(){this.$a.override=null;h.permaRemove(this.za);this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){this.J();var e=null,g=!1;if(a.kMap("Tab"))e=
"^I";else if(!a.kMap("C-v"))if(a.kMap("BS")){if(1==this.j&&1<this.g.length)return!1;this.g.splice(--this.j,1);if(0==this.g.length)return a.cancel(),!0}else if(a.kMap("Del"))this.g.splice(this.j,1);else{if(a.kMap("Enter"))return this.mb(a),!0;if(a.kMap("Left"))1<this.j&&this.j--;else if(a.kMap("Right"))this.j<this.g.length&&this.j++;else if(g=a.kMap("Up")){this.p||(this.p=this.g);var r=this.aa.prev(this.p);r?(this.g=r,this.j=r.length):d()}else(g=a.kMap("Down"))?(r=this.aa.next(this.p))?(this.g=r,this.j=
r.length):this.p?(this.g=this.p,this.p=null):d():e=a.key}null!=e&&this.g.splice(this.j++,0,e);g||(this.aa.reset(),this.p&&(this.p=this.g));a.cancel();this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))}};a.prototype.mb=function(a){this.aa.push(this.g);var e="";switch(this.n){case "/":e="FIND";break;case ":":e="EDITOR_COMMAND"}var g=this.a;g.suppressEvent();this.a.openRunAction(e,a,this.g.slice());g.unsuppressEvent()};m[1](2,"Command",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,b){this.vb=a;this.Ea=!1;if("string"==typeof b)this.ba=b,this.oa=0,this.t=k(b),this.la=27==this.t;else if("number"==typeof b)this.ba=h(b),this.oa=0,this.t=b,this.la=27==this.t||1091==this.t||1243==this.ba;else{this.ka=b;if(";"==b.key||":"==b.key)c=b.keyCode;var g=this.ka.keyCode;this.la=27==g||b.ctrlKey&&(67==g||219==g);this.t=g+(b.shiftKey||b.getModifierState("CapsLock")?512:0)+(b.ctrlKey?1024:0)+(b.altKey?2048:0);this.oa=16==g||17==g||18==g;this.ba=b.key||h(this.t)}this.Ha=
1;this.A=null}function m(a){this.bb=a;this.Fa=a.contentFeeder;this.K=this.Fa.cursor;this.k=null}function h(a){switch(a){case 32:case 544:return" ";case 65:return"a";case 66:return"b";case 67:return"c";case 68:return"d";case 69:return"e";case 70:return"f";case 71:return"g";case 72:return"h";case 73:return"i";case 74:return"j";case 75:return"k";case 76:return"l";case 77:return"m";case 78:return"n";case 79:return"o";case 80:return"p";case 81:return"q";case 82:return"r";case 83:return"s";case 84:return"t";
case 85:return"u";case 86:return"v";case 87:return"w";case 88:return"x";case 89:return"y";case 90:return"z";case 49:return"1";case 50:return"2";case 51:return"3";case 52:return"4";case 53:return"5";case 54:return"6";case 55:return"7";case 56:return"8";case 57:return"9";case 48:return"0";case 219:return"[";case 221:return"]";case c:case 186:return";";case 222:return"'";case 188:return",";case 190:return".";case 191:return"/";case 220:return"\\";case 173:case 189:return"-";case 61:case 187:return"=";
case 561:return"!";case 562:return"@";case 563:return"#";case 564:return"$";case 565:return"%";case 566:return"^";case 567:return"&";case 568:return"*";case 569:return"(";case 560:return")";case 731:return"{";case 733:return"}";case 512+c:case 698:return":";case 734:return'"';case 700:return"<";case 702:return">";case 732:return"|";case 685:case 701:return"_";case 573:case 699:return"+";case 577:return"A";case 578:return"B";case 579:return"C";case 580:return"D";case 581:return"E";case 582:return"F";
case 583:return"G";case 584:return"H";case 585:return"I";case 586:return"J";case 587:return"K";case 588:return"L";case 589:return"M";case 590:return"N";case 591:return"O";case 592:return"P";case 593:return"Q";case 594:return"R";case 595:return"S";case 596:return"T";case 597:return"U";case 598:return"V";case 599:return"W";case 600:return"X";case 601:return"Y";case 602:return"Z";case 520:case 8:return"Backspace";case 27:return"Escape";case 46:return"Delete";case 512:return"Shift";case 2048:return"Alt";
case 1024:return"Control";case 13:return"Enter";case 9:return"Tab"}return"?"}function k(a){if(g[a])return g[a];var b=a.split("-"),e=b[0],c=0;if(2==b.length){var d=!0;switch(b[0]){case "C":c=1024;break;case "A":c=2048;break;case "S":c=512;break;default:d=!1}d&&(e=b[1])}switch(e){case "BS":b=c+8;break;case "Del":b=c+46;break;case "Enter":b=c+13;break;case "Tab":b=c+9;break;case "Escape":b=c+27;break;case "Up":b=c+38;break;case "Down":b=c+40;break;case "Left":b=c+37;break;case "Right":b=c+39;break;case "A":c=
512;case "a":b=c+65;break;case "B":c=512;case "b":b=c+66;break;case "C":c=512;case "c":b=c+67;break;case "D":c=512;case "d":b=c+68;break;case "E":c=512;case "e":b=c+69;break;case "F":c=512;case "f":b=c+70;break;case "G":c=512;case "g":b=c+71;break;case "H":c=512;case "h":b=c+72;break;case "I":c=512;case "i":b=c+73;break;case "J":c=512;case "j":b=c+74;break;case "K":c=512;case "k":b=c+75;break;case "L":c=512;case "l":b=c+76;break;case "M":c=512;case "m":b=c+77;break;case "N":c=512;case "n":b=c+78;
break;case "O":c=512;case "o":b=c+79;break;case "P":c=512;case "p":b=c+80;break;case "Q":c=512;case "q":b=c+81;break;case "R":c=512;case "r":b=c+82;break;case "S":c=512;case "s":b=c+83;break;case "T":c=512;case "t":b=c+84;break;case "U":c=512;case "u":b=c+85;break;case "V":c=512;case "v":b=c+86;break;case "W":c=512;case "w":b=c+87;break;case "X":c=512;case "x":b=c+88;break;case "Y":c=512;case "y":b=c+89;break;case "Z":c=512;case "z":b=c+90;break;case "!":c=512;case "1":b=c+49;break;case "@":c=512;
case "2":b=c+50;break;case "#":c=512;case "3":b=c+51;break;case "$":c=512;case "4":b=c+52;break;case "%":c=512;case "5":b=c+53;break;case "^":c=512;case "6":b=c+54;break;case "&":c=512;case "7":b=c+55;break;case "*":c=512;case "8":b=c+56;break;case "(":c=512;case "9":b=c+57;break;case ")":c=512;case "0":b=c+48;break;case "<":c=512;case ",":b=c+188;break;case ">":c=512;case ".":b=c+190;break;default:throw Error("Unsupport keys: "+a);}return g[a]=b}var f=S("Components.Vim"),d=U("System.Debug"),e=U("Components.Vim.Ex.Command"),
b=f[0]("Beep"),c=59,g={};m.prototype.d=function(a,c){this.i||(this.i=[]);if(c)this.i.push({keys:Array.prototype.slice.call(arguments,2),handler:c,eb:0});else{for(var g=a.keyCode,e=0;e<this.i.length;e++){var d=this.i[e],k=d.keys,f=k[d.eb++];if(-1==f||f==g){d.eb==k.length&&(this.i=null,d.handler(a));return}}this.i&&b();this.i=null}};m.prototype.hb=function(g){var d=this.K;switch(g.keyCode){case 577:d.lineEnd();d.moveX(1,!1,!0,!0);d.openAction("INSERT",g);break;case 73:0<d.X&&(d.moveX(-1,!0),d.moveX(1,
!0,!0,!0));d.openAction("INSERT",g);break;case 65:d.fixTab();d.moveX(1,!1,!0,!0);d.openAction("INSERT",g);break;case 585:d.lineStart(!0);d.openAction("INSERT",g);break;case 83:""!=d.c().content&&d.openRunAction("DELETE",g,d.aPos);d.openAction("INSERT",g);break;case 591:d.lineStart();d.openAction("INSERT",g);d.action.handler(new a(g.Fb,"Enter"));d.moveY(-1);break;case 79:d.lineEnd(!0);d.openAction("INSERT",g);d.action.handler(new a(g.Fb,"Enter"));break;case 85:d.openRunAction("UNDO",g);break;case 1106:d.openRunAction("REDO",
g);break;case 68:case 67:d.openAction("DELETE",g);break;case 89:d.openAction("YANK",g);break;case 80:d.suppressEvent(),d.moveX(1,!1,!0),d.unsuppressEvent();case 592:d.openRunAction("PUT",g);break;case 600:if(!this.$(-1))break;case 88:if(""==d.c().content){b();break}d.openRunAction("DELETE",g,d.aPos);break;case 586:d.openRunAction("JOIN_LINES",g);break;case 86:case 598:d.openAction("VISUAL",g);d.action.handler(g);break;case 512+c:case 698:this.k=new e(d,":");this.k.handler(g);break;case 700:case 702:d.openAction("SHIFT_LINES",
g)}};m.prototype.$=function(a,c){var g=this.K,e=g.X,d=g.Y;g.moveX(a,c,g.pSpace);return g.X==e&&g.Y==d?(b(),!1):!0};m.prototype.Ca=function(a){var g=this.K,c=this.Fa,e=g.Y+c.panY;g.moveY(a);e!=g.Y+c.panY||0<a&&!c.EOF||b()};m.prototype.lb=function(a){if(this.na)a.preventDefault(),this.d(a);else{var b=this,g=!0;switch(a.keyCode){case 734:this.d(a,function(a){a.target.W.select(a.key);a.cancel();b.na=!1},-1);break;case 48:if(!this.i){g=!1;break}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:var c=
a.key,e=function(a){var g=a.ModKeys;switch(a.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c+=a.key,g=!0}g?(b.d(a,e,-1),a.cancel()):(a.Ha=Number(c),d.Info("Count is: "+c),b.na=!1)};this.d(a,e,-1);break;default:g=!1}(this.na=g)&&a.cancel()}};m.prototype.Ia=function(a){var g=a.keyCode;if(this.o&&!a.ModKeys)return this.d(a),this.o=!1,!0;var c=this.K,d=c.feeder,k=!0;switch(g){case 8:this.$(-1,!0);break;case 72:this.$(-a.count);break;case 76:this.$(a.count);break;
case 173:case 189:case 75:this.Ca(-a.count);break;case 13:case 74:this.Ca(a.count);break;case 1094:if(d.firstBuffer.nextLine.placeholder){b();break}d.pan(void 0,d.moreAt);d.softReset();c.moveY(-c.Y);break;case 1090:if(0==d.panY){b();break}d.pan(void 0,-d.moreAt);d.softReset();c.moveY(-c.Y);d.EOF||c.moveY(d.moreAt);break;case 1093:d.pan(void 0,1);d.softReset();c.moveY(0<c.Y?-1:0);c.moveX();break;case 1113:if(0==d.panY){b();break}d.pan(void 0,-1);d.softReset();c.moveY(c.Y==d.moreAt?0:1);c.moveX();break;
case 1092:d.pan(void 0,d.moreAt);d.softReset();c.moveY(0);break;case 1109:if(0==d.panY){b();break}d.pan(void 0,-d.moreAt);d.softReset();c.moveY(0);break;case 584:c.moveY(-c.Y);c.lineStart(!0);break;case 589:c.moveY(Math.floor(.5*d.moreAt)-c.Y);c.lineStart(!0);break;case 588:c.moveY(d.moreAt-c.Y);c.lineStart(!0);break;case 48:c.lineStart();break;case 566:c.lineStart(!0);break;case 564:c.lineEnd(c.pSpace);break;case 583:c.moveY(Number.MAX_VALUE);c.moveX(Number.MAX_VALUE,!0);break;case 565:var f=this.bb.contentAnalyzer,
g=f.bracketAt(c.aPos);if(-1==g.open){b();break}c.moveTo(g.selected==g.close?g.open:g.close);break;case 596:case 84:this.o=!0;this.d(a,function(b){var g=c.X;c.openRunAction("TO",a,b);c.X<g?c.moveX(1):g<c.X&&c.moveX(-1)},-1);break;case 582:case 70:this.o=!0;this.d(a,function(b){c.openRunAction("TO",a,b)},-1);break;case 87:case 599:case 66:case 578:case 69:case 581:c.openRunAction("WORD",a);break;case 73:if(!c.action){k=!1;break}f=this.bb.contentAnalyzer;this.o=!0;this.d(a,function(a){var b=f.wordAt(c.aPos);
a.A=b},87);var g=function(a){var b=f.bracketIn("(",c.aPos);a.A=b},d=function(a){var b=f.bracketIn("{",c.aPos);a.A=b},h=function(a){var b=f.bracketIn("[",c.aPos);a.A=b};this.d(a,g,560);this.d(a,g,569);this.d(a,h,219);this.d(a,h,221);this.d(a,d,731);this.d(a,d,733);this.d(a,function(a){var b=f.quoteIn("'",c.aPos);a.A=b},222);this.d(a,function(a){var b=f.quoteIn('"',c.aPos);a.A=b},734);break;case 71:this.o=!0;this.d(a,function(){c.moveY(-Number.MAX_VALUE);c.moveX(-Number.MAX_VALUE,!0)},71);this.d(a,
function(){c.moveX(c.c(!0).content.length+1)},74);this.d(a,function(){var a=c.c(!0).prev,g=c.c().lineNum;if(a)if(""!=a.content&&a.lineNum==g)c.moveX(-(a.content.length+1));else{if(c.moveY(-1),g=c.c().visualLines,1<g.length){for(var e=g.length-1,d=0,k=0;k<e;k++)d+=g[k].content.length;d+=Math.max(0,Math.floor(d/a.cols)-1);c.moveX(d)}}else c.lineStart(),b()},75);this.d(a,function(){c.openRunAction("PRINT_HEX",a)},56);this.d(a,function(){c.action&&b()},85);this.d(a,function(){c.action&&b()},597);break;
case 590:case 78:c.openRunAction("FIND",a);break;case 191:this.o=!0;this.k=new e(c,"/");this.k.handler(a);break;default:k=!1}return k};m.prototype.handler=function(a,c){if(!(2116==c.keyCode||112<c.keyCode&&123>=c.keyCode)){if(c.Escape){var g=!1;this.o=!1;this.i?(g=!0,this.i=null):this.k&&(g=!0,this.k.dispose(),this.k=null);if(g){b();return}}if(this.k){if(this.k.handler(c)){this.k.dispose();this.o=!1;this.k=null;return}if(c.canceled)return}g=this.K;if(!this.o&&(!g.action||g.action.allowMovement)&&
(this.lb(c),c.canceled))return;if(g.action)if(c.Escape)c.preventDefault(),g.closeAction();else{if(g.action.allowMovement){var e=!this.i;this.Ia(c);if(e&&this.i){c.preventDefault();return}}g.action.handler(c)&&g.closeAction()}else c.preventDefault(),this.Ia(c)||this.hb(c)}};v(a.prototype,"target",function(){return this.vb});v(a.prototype,"key",function(){return this.ba});v(a.prototype,"keyCode",function(){return this.t});v(a.prototype,"ModKeys",function(){return this.oa});v(a.prototype,"Escape",function(){return this.la});
v(a.prototype,"canceled",function(){return this.Ea});v(a.prototype,"range",function(){var a=this.A;return a&&-1==a.open&&-1==a.close?null:a});v(a.prototype,"count",function(){return this.Ha});a.prototype.kMap=function(a){return this.t==k(a)};a.prototype.cancel=function(){this.preventDefault();this.Ea=!0};a.prototype.preventDefault=function(){this.ka&&this.ka.preventDefault()};f[1](2,"Controls",m);f[1](2,"ActionEvent",a)})();BotanJS.define("Components.Vim.Actions.VA_REC");
(function(){function a(a){this.a=a;this.b=d("VA_REC_START");a.suppressEvent()}var m=S("Components.Vim.Actions"),h=U("System.Debug"),k=U("System.utils.EventKey"),f=U("Components.Vim.ActionEvent"),d=U("Components.Vim.Message"),e=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,c){if(1==c){for(var g=d("VA_REC_END"),r=d("WAIT_FOR_INPUT"),p=this.a.feeder.firstBuffer.cols,m=g.length;m<p;m++)g+=" ";this.b=g+"\n"+r}else{a.preventDefault();var q=this.a.Vim,w=q.stage,
t=q.index,x;x=e[t]?e[t]:e[t]={};if(x.fb){x.ja();var z=JSON.stringify(x.data),y=w.element;setTimeout(function(){q.display("Press Escape to conitnue edit\n===\n"+z,function(){y.selectionStart=34;y.selectionEnd=y.selectionStart+z.length})},1)}else{x.fb=!0;var u=x.data=[],B=Date.now();x.La=new k("KeyDown",function(a){var b=new f(w,a);-1==["Control","Alt","Shift"].indexOf(a.key)&&(a=Date.now(),u.push(a-B,b.keyCode),B=a)});x.ja=function(){h.Info("VA_REC: Disposing active session");delete e[t];w.removeEventListener(x.La);
q.removeEventListener("Dispose",x.ja)};q.addEventListener("Dispose",x.ja);w.addEventListener(x.La)}}};a.prototype.getMessage=function(){return this.b};m[1](2,"VA_REC",a)})();BotanJS.define("Components.Vim.Actions.VERSION");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var h=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=":version\nVim;Re - Vim; Reverse Engineered for textarea v1.0.2\n  + BotanJS - v1.0.0b";a+="\nProject home - https://github.com/tgckpg/BotanJS-vim";a+="\n  by \u659f\u914c\u9d6c\u5144 (penguin) - https://blog.astropenguin.net/";
a+="\n";for(var f=h("WAIT_FOR_INPUT"),d=this.a.feeder.firstBuffer.cols,e=a.length;e<d;e++)a+=" ";this.b=a+"\n"+f};a.prototype.getMessage=function(){return this.b};m[1](2,"VERSION",a)})();BotanJS.define("Components.Vim.Actions.TO");
(function(){function a(a){this.a=a;this.b="<TO COMMAND>";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Beep");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f){f.preventDefault();var d=this.a,e=d.feeder,b=d.c().lineNum,c=0;for(i=0;-1!=c&&i<b;i++)c=e.content.indexOf("\n",c+1);var g=e.content.indexOf("\n",c+1);0<b&&c++;b=c;c=f.key;f.kMap("Tab")&&(c="\t");if(1<c.length)h();else{var r=-1,r=a.kMap("t")||a.kMap("f")?
e.content.indexOf(c,d.aPos+1):e.content.lastIndexOf(c,d.aPos-1);b<=r&&r<g?d.moveTo(r):h()}};a.prototype.getMessage=function(){return this.b};m[1](2,"TO",a)})();BotanJS.define("Components.Vim.Actions.PUT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions"),h=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),f=U("Components.Vim.Message"),d=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b,c){a.preventDefault();var g=this.a.Vim.W.get();if(!g)return!0;var r=this.a,p=r.feeder;c=g.newLine;if(1<a.count){for(var m=g,q=1;q<a.count;q++)m+=g;g=
m;m=null}var m=d(g,"\n"),q=g.length,w=a.kMap("P")?0:-1;c&&(r.moveY(-w),r.lineStart());a=new h(r);var t=r.aPos,x="";void 0==b?(p.content=p.content.substring(0,t)+g+p.content.substring(t),p.pan(),r.moveTo(0<m?t:t+q,!0)):(b++,x=p.content.substring(t,b),p.content=p.content.substring(0,t)+g+p.content.substring(b),p.pan(),r.moveTo(t+q,!0));b=new k;if(c){var z=a.save(q,x);b.store(function(){z();r.moveY(w)})}else b.store(a.save(q,x));r.rec.record(b);m&&(this.b=f("LINES_MORE",m));r.moveX(-1);return!0};a.prototype.getMessage=
function(){return this.b};m[1](2,"PUT",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(a,b){this.a=a;this.pa=0;this.h=a.aPos;this.Ra=this.a.feeder.panY;this.Aa=b&&b.kMap("c");this.Ba=!1;this.kb=b;a.suppressEvent()}var m=S("Components.Vim.Actions"),h=U("System.Debug"),k=U("Components.Vim.State.Stator"),f=U("Components.Vim.State.Stack"),d=U("Components.Vim.Message"),e=U("Components.Vim.Beep"),b=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.unsuppressEvent();this.Aa&&(this.Ba?(a.fixTab(),a.moveX(1,!1,
!0,!0)):(a.moveX(-1,!0),a.moveX(1,!0,!0,!0)),setTimeout(function(){a.openAction("INSERT",this.kb)},20))};a.prototype.handler=function(a,g,d){a.preventDefault();if(!a.ModKeys){var m=a.target.W,s=this.a,q=s.feeder;if(q.firstBuffer.next.placeholder&&2>q.content.length)return h.Info("Content is empty"),!0;var w=!1;if(void 0==g){w=!0;g=this.h;var t=s.aPos;if(this.h!=t)a.kMap("^")?g--:a.kMap("l")?s.moveX(-1):a.kMap("h")?g=t:a.kMap("j")?(d=!0,s.lineEnd(!0),g=s.aPos,s.moveY(-1),s.lineStart(),this.h=s.aPos):
a.kMap("k")?(d=!0,s.moveY(1),s.lineEnd(!0),g=s.aPos,s.moveY(-1),s.lineStart()):this.h<t&&(g=t,s.moveTo(this.h),(a.kMap("w")||a.kMap("n"))&&g--);else if(a.kMap("d"))d=!0,s.lineEnd(!0),g=s.aPos,s.lineStart();else if(this.Aa&&a.kMap("c"))s.lineEnd(),g=s.aPos,s.lineStart(!0),this.Ba=!0;else if(a.range)g=a.range.close,s.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))g=s.aPos;else return e(),!0}}var t=q.content.slice(0,-1),x=g;a=s.aPos;a<x&&(x=s.aPos,a=g);void 0==t[g]&&x--;g=t.substring(x,
a+1);m.change(g,d);this.pa=b(g,"\n");q.content=t.substring(0,x)+t.substring(a+1)+"\n";q.pan(void 0,this.Ra<q.panY?this.Ra-q.panY:void 0);s.moveTo(x);a=new k(s,x);d=new f;var z=a.save(0,g);d.store(function(){z();s.moveX(1)});s.rec.record(d);return w}};a.prototype.getMessage=function(){return this.pa?d("LINES_FEWER",this.pa):""};m[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(a){this.a=a;this.h=a.aPos;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Message"),k=U("Components.Vim.Beep"),f=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,e,b){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var c=a.target.W,g=this.a,r=!1;if(void 0==e){r=!0;e=this.h;var m=g.aPos;if(this.h!=m)a.kMap("^")?e--:a.kMap("l")?
g.moveX(-1):a.kMap("h")?e=m:a.kMap("j")?(b=!0,g.lineEnd(!0),e=g.aPos,g.moveY(-1),g.lineStart(),this.h=g.aPos):a.kMap("k")?(b=!0,g.moveY(1),g.lineEnd(!0),e=g.aPos,g.moveY(-1),g.lineStart()):this.h<m&&(e=m,g.moveTo(this.h));else if(a.kMap("y"))b=!0,g.lineEnd(!0),e=g.aPos,g.lineStart();else if(a.range)e=a.range.close,g.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))e=g.aPos;else return k(),!0}}m=e;a=g.aPos;a<m&&(m=g.aPos,a=e);g.moveTo(m);a=g.feeder.content.substring(m,a+1);c.yank(a,
b);if(b=f(a,"\n"))this.b=h("LINES_YANKED",b);return r}};a.prototype.getMessage=function(){return this.b};m[1](2,"YANK",a)})();BotanJS.define("Components.Vim.Actions.BUFFERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Dandelion"),k=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var f=U;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();h.tag("textarea");var e=this.a.Vim,b=f("Components.Vim.VimArea").Instances;a=":buffers";for(var c in b){var g=b[c],r=g.index+" ",m=g.contentFeeder.cursor,r=r+((g==e?"%a":"  ")+" "),r=r+
((m.rec.changed?"+":" ")+" "),r=r+('"'+g.stage.element.id+'" line '+(m.c().lineNum+1));a+="\n  "+r}e=k("WAIT_FOR_INPUT");b=this.a.feeder.firstBuffer.cols;for(c=a.length;c<b;c++)a+=" ";this.b=a+"\n"+e};a.prototype.getMessage=function(){return this.b};m[1](2,"BUFFERS",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.ub=new k(a);this.C=this.w=0;this.Ga=!1;this.G("",!0);a=this.a.feeder.firstBuffer.cols;for(var b=d("INSERT"),c=b.length;c<a;c++)b+=" ";this.b=b}var m=S("Components.Vim.Actions"),h=U("Components.Vim.State.Stack"),k=U("Components.Vim.State.Stator"),f=U("System.Debug"),d=U("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.Ga&&this.da();this.Da()&&this.a.feeder.pan();this.b="";this.G("",!0);this.a.moveX(-1,!1,!1,!0);this.a.fixTab()};
a.prototype.G=function(a,b){if(b||!this.fa){if(this.fa){if(0==this.w&&0==this.q&&""===this.s)return;this.q<this.w&&(this.w=this.q);this.fa.store(this.ub.save(this.C,this.s,-this.w));this.a.rec.record(this.fa)}this.q=0;this.s="";this.fa=new h}this.q<this.w&&(this.C=0,this.w=this.q);this.q+=a.length;this.C+=a.length};a.prototype.qb=function(a){var b=this.a,c=b.feeder;if(a.kMap("BS")||a.kMap("S-BS")){this.da();if(0==b.X&&0==c.panY&&0==b.Y)return;a=b.aPos-1;this.q<=this.w&&(this.s=c.content.substr(a,
1)+this.s);b.moveX("\t"==c.content[a]?-c.firstBuffer.tabWidth:-1,!0,!0,!0);c.content=c.content.substring(0,a)+c.content.substring(a+1);c.pan();0<this.C&&this.C--;this.q--}else if(a.kMap("Del")||a.kMap("S-Del"))this.da(),a=b.aPos,this.s+=c.content.substr(a,1),c.content=c.content.substring(0,a)+c.content.substring(a+1),c.pan();else return;c.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var b;a:switch(b=a.key,b){case "Tab":b=
"\t";break a;case "Enter":b="\n";break a}if(1!=b.length)this.qb(a);else{a=this.a;var c=a.feeder,g=a.aPos,d="\n"!=c.content[g];c.content=c.content.substring(0,g)+b+c.content.substring(g);"\n"==b?(c.softReset(),c.pan(),a.moveY(1),a.lineStart(),this.ib(),this.Ga=d):(this.da(),c.pan(),a.moveX("\t"==b?c.firstBuffer.tabWidth:1,!1,!0,!0));c.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.G(b)}}};a.prototype.da=function(){var a=this.D;if(this.D){f.Info("Realize Indentation: "+a);l=a[1];for(var b=
a[0];b<l;b++)this.G(this.a.feeder.content[b]);this.s=a[2]+this.s;this.D=null}};a.prototype.ib=function(){for(var a=this.D,b=this.Da(),c=this.a,g=c.feeder,d=c.aPos,k=g.content.lastIndexOf("\n",d-2),m=g.content.substring(k+1,d-1)||b;""==m&&0<k;)m=k,k=g.content.lastIndexOf("\n",m-2),m=g.content.substring(k+1,m-1);a=b?a[2]:"";for(b=d;-1!="\t ".indexOf(g.content[b]);b++)a+=g.content[b];for(k=0;-1!="\t ".indexOf(m[k]);k++);m&&(g.content=g.content.substring(0,d)+m.substr(0,k)+g.content.substring(b),g.softReset(),
g.pan(),c.moveX(k,!1,!0),c=[],c[0]=d,c[1]=d+k,c[2]=a,this.D=c,f.Info("Phantom indent: "+c))};a.prototype.Da=function(){var a=this.D;if(!a)return"";f.Info("Erase phantom indent: "+a);var b=this.a.feeder,c=b.content.substring(a[0],a[1]);b.content=b.content.substring(0,a[0])+b.content.substring(a[1]);this.D=null;return c};a.prototype.getMessage=function(){return this.b};m[1](2,"INSERT",a)})();BotanJS.define("Components.Vim.Actions.UNDO");
(function(){function a(a){this.a=a;this.v="UNDO COMMAND"}var m=S("Components.Vim.Actions"),h=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.v=h("NCHANGES","<TODO>",a.id,a.time)):this.v=h("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.v};m[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var m=S("Components.Vim.Actions");U("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var k=a.length,f=[],d=0;d<k;d++)f[d]="\n"==a[d]?"a":a.charCodeAt(d).toString(16),1==f[d].length?f[d]="0"+f[d]:0==f[d].length&&(f[d]="00");this.b=f.join(" ")};a.prototype.getMessage=function(){return this.b};m[1](2,"PRINT_HEX",a)})();BotanJS.define("Components.Vim.Actions.WRITE");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Message"),k=U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var d=this.a;a=d.Vim;a.content=d.feeder.content.slice(0,-1);a=h("WRITE",a.stage.element.id,k(a.content,"\n"),a.content.length);d.rec.save();for(var d=this.a.feeder.firstBuffer.cols,e=a.length;e<d;e++)a+=" ";
this.b=a};a.prototype.getMessage=function(){return this.b};m[1](2,"WRITE",a)})();BotanJS.define("Components.Vim.Actions.WORD");
(function(){function a(a){this.a=a;this.b="<WORD COMMAND>";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Beep");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var f=this.a,d=f.feeder,e=f.Vim.contentAnalyzer,b=f.aPos;if(a.kMap("w")||a.kMap("W")){if(void 0==d.content[b+2]){h();return}var c=e.wordAt(b);if(-1!=c.open){for(b=c.close+1;-1!=" \t\n".indexOf(d.content[b]);)b++;void 0==d.content[b]&&
b--}}if(a.kMap("e")||a.kMap("E")){if(void 0==d.content[b+2]){h();return}for(b++;-1!=" \t\n".indexOf(d.content[b]);)b++;void 0==d.content[b]?b--:(c=e.wordAt(b),-1!=c.open&&(b=c.close))}if(a.kMap("b")||a.kMap("B")){if(0==b){h();return}for(b--;-1!=" \t".indexOf(d.content[b]);)b--; -1==b?b=0:(c=e.wordAt(b),-1!=c.open&&(b=c.open),-1!=" \t".indexOf(d.content[b])&&b++)}f.moveTo(b)};a.prototype.getMessage=function(){return this.b};m[1](2,"WORD",a)})();BotanJS.define("Components.Vim.Actions.SHIFT_LINES");
(function(){function a(a,b){this.a=a;this.h=a.aPos;this.b="<LINE_SHIFT>";this.Ya=a.c().lineNum;this.Pa=b.count-1;h.Info("Open shift: "+this.Pa+" line(s) from the cursor");this.Ka=b.kMap(">")?1:-1;h.Info("Direction is: "+(1==this.Ka?">":"<"));a.suppressEvent()}var m=S("Components.Vim.Actions"),h=U("System.Debug"),k=U("Components.Vim.Beep"),f=U("Components.Vim.State.Stator"),d=U("Components.Vim.State.Stack");U("Components.Vim.Error");var e=U("Components.Vim.Message"),b=U("System.utils.Perf.CountSubstr");
a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,g){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var m=this.a,p=m.feeder,s=!1,q=this.Ka,w=this.Ya,t=this.Pa,x=1;1<a.count&&(t+=a.count-1);var z=w;if(void 0==g){s=!0;g=this.h;var y=m.aPos;if(this.h!=y){z=w=0;t&&(y<g?w-=t-1:z+=t-1,console.log(w,z));y<g&&(g+=y,y=g-y,g-=y);for(var u=0;u<y;u++)"\n"==p.content[u]&&(z++,u<g&&w++)}else if(a.range){g=a.range.close;w=1;z=-1;for(u=0;u<g;u++)"\n"==
p.content[u]&&(z++,u<a.range.open&&w++);-1==z&&(w=z=0);z<w&&(z=--w);x=a.count}else if(!(0<q&&(a.kMap(">")||a.kMap("l"))||0>q&&(a.kMap("<")||a.kMap("h"))))return k(),!0}else{for(u=w=0;u<g;u++)"\n"==p.content[u]&&w++;z=this.Ya;x=a.count}z<w&&(w+=z,z=w-z,w-=z);var y=p.content.slice(0,-1),B=y.match(/^[\t ]+/gm),E="\t",H=p.firstBuffer.tabWidth;if(B){var I=B.length-1;if(1<I){h.Info("Guessing the tabstop:");for(var G=t=0,H=[],u=0;u<I;u++){var C=B[u],D=B[u+1],t=t+b(C,"\t"),G=G+b(C," "),C=D.length-C.length;
0!=C&&(C=0>C?-C:C,H[C]||(H[C]=0),H[C]++)}I=B=0;for(u in H)u=Number(u),C=H[u],B<C&&(B=C,I=u);G/=I;if(t<G)for(E="",u=0;u<I;u++)E+=" ";H=I;h.Info("\tTab count: "+t);h.Info("\tSpace count: "+G);h.Info("\ti.e. indent using "+JSON.stringify(E))}else h.Info("Not enough tabs to determine the tabstop, using default")}h.Info("Start: "+w,"End: "+z);var G="",B=0,I=!1,J=0;p.content="";t=0;C="";for(u=0;u<x;u++)C+=E;for(E=u=0;0<=u;u=y.indexOf("\n",u),E++)if(u++,!(E<w)){I||(I=!0,p.content=y.substring(0,u-1),J=p.content.length);
if(z<E)break;D=y.indexOf("\n",u);D=~D?y.substring(1<u?u:u-1,D):y.substring(1<u?u:u-1);1<u&&(p.content+="\n",G+="\n",B++);G+=D;if(""!==D){if(0<q)D=C+D;else{for(var T=0,K=0;T<x;T++){var Q=D[K];if(" "==Q)for(Q=H+K++;K<Q&&~"\t ".indexOf(D[K]);K++);else if("\t"==Q)K++;else break}D=D.substring(K)}p.content+=D;B+=D.length;t++}}w=p.content.length;p.content+="\n";~u&&(p.content+=y.substring(u)+"\n");p.pan();m.moveTo(w);u=new f(m,J);w=new d;for(J++;~"\t ".indexOf(p.content[J]);J++);var V=u.save(B,G);w.store(function(){V();
m.moveTo(J);m.lineStart(!0)});m.moveTo(J);m.rec.record(w);this.b=t?e("LINES_SHIFTED",t,0>q?"<":">",x):e("NO_SHIFT",0>q?"<":">");return s}};a.prototype.getMessage=function(){return this.b};m[1](2,"SHIFT_LINES",a)})();BotanJS.define("Components.Vim.Actions.REDO");
(function(){function a(a){this.a=a;this.v="REDO COMMAND"}var m=S("Components.Vim.Actions"),h=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.v=h("NCHANGES","<TODO>",a.id,a.time)):this.v=h("REDO_LIMIT")};a.prototype.getMessage=function(){return this.v};m[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.FIND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}function m(a){for(var b="",c=a.length,g=1;g<c;g++)switch(a[g]){case "^I":b+="\t";break;case "\\":var d=a[++g];if(-1!="nrts.[]()^".indexOf(d))b+="\\"+d;else throw Error('Missing token impl: "'+d+'"');break;default:b+=a[g]}return new RegExp("("+b+")","gm")}var h=S("Components.Vim.Actions");U("System.Debug");var k=U("Components.Vim.Error"),f=U("Components.Vim.Message"),d=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=
function(a,b){a.preventDefault();if(b){if(2>b.length){if(1>d.length)return this.b=k("E35"),!0;b=d}d=b}if(1>d.length)return this.b=k("E35"),!0;var c;try{c=m(d)}catch(g){return this.b=k("EX1",g.message),!0}var h=this.a.feeder.content,p=this.a;b=p.aPos;for(var s,q,w,t=0,x=[],z;null!==(s=c.exec(h));){void 0==w&&(w=s.index);if(z==s.index)return this.b=k("EX2",d.slice(1).join("")),!0;if(b<s.index){q=s.index;break}x.push(s.index);t++;z=s.index}this.b=d.join("");if(a.kMap("N")){if(q=x[t-1],q==b&&(q=x[t-2]),
void 0==q)for(this.b=f("SEARCH_HIT_TOP"),c=new RegExp(c);null!==(s=c.exec(h));)q=s.index}else void 0!=w&&void 0==q&&(q=w,this.b=f("SEARCH_HIT_BOTTOM"));void 0==q?this.b=k("E486",d.slice(1).join("")):p.moveTo(q)};a.prototype.getMessage=function(){return this.b};F(a,"Pattern",m);h[1](2,"FIND",a)})();BotanJS.define("Components.Vim.Actions.REPLACE");
(function(){function a(a){this.a=a;this.H=this.b="";this.Ua=0;this.ra=this.ra.bind(this);this.qa=0;this.sa=[];a.suppressEvent()}function m(a){for(var b="",d=a.length,e=[""],f=1;f<d;f++)switch(a[f]){case "^I":b+="\t";break;case "\\":f++;var k=a[f];if(-1!="$nrt\\".indexOf(k)){b+=JSON.parse('"\\'+k+'"');break}if(-1!="012345678".indexOf(k))e.push(b.length),b+=k;else{if("9"==k)throw Error("Back ref 9 is reserved for back ref 0");throw Error('Missing token impl: "'+tok+'"');}break;default:b+=a[f]}e[0]=
b;return e}var h=S("Components.Vim.Actions"),k=U("System.Debug"),f=U("Components.Vim.State.Stack"),d=U("Components.Vim.Error"),e=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var b=h[0]("FIND");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,g){a.preventDefault();var f,h;try{var s=g.indexOf("/",0),q=g.indexOf("/",s+1);if(-1==s)return this.b=d("MISSING_FEATURE","REPLACE %s"),!0;if(-1==q)f=b.Pattern(g),h=g;else{h=g.slice(s,q);f=b.Pattern(h);var w=
g.indexOf("/",q+1);this.H=-1==w?m(g.slice(q)):m(g.slice(q,w));this.Ua=this.H[0].length}}catch(t){return this.b=d("EX1",t.message),!0}k.Info("Replace: "+f+", [ "+this.H+" ]");s=this.a.feeder;f=s.content.slice(0,-1).replace(f,this.ra)+"\n";q=this.sa.length;q||(this.b=d("E486",h.join("")));s.content=f;this.b=e("REPLACE",q,"<TODO>");this.G();s.pan();s.softReset();return!0};a.prototype.ra=function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1,-2),d=this.qa+arguments[arguments.length-
2],e="",f=this.H[0],k=0;k<this.Ua;k++)var m=this.H.indexOf(k,1),e=-1==m?e+f[k]:e+b[f[this.H[m]]];b=e.length;this.qa+=b-a.length;f=[];f[0]=a;f[1]=d;f[2]=b;this.sa.push(f);return e};a.prototype.G=function(){var a=new f,b=this.sa,d=b.length,e=this.a,k=e.feeder;a.store(function(){for(var a=k.content,c="",f=0,m=-1,h=0;h<d;h++){var y=b[h],u=y[1],B=y[2],E=y[0],H=E.length,c=c+(a.substring(f,u)+E),f=y[1]+B;y[0]=a.substr(u,B);y[1]=c.length-H;y[2]=H;-1==m&&(m=u)}c+=a.substring(f);k.content=c;e.moveTo(m);k.pan()});
e.rec.record(a)};a.prototype.getMessage=function(){return this.b};h[1](2,"REPLACE",a)})();BotanJS.define("Components.Vim.Actions.REGISTERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var h=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var f=a.target.W;a=":register\n"+h("REGISTERS");for(var d=0,e='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[d];void 0!=e;d++,e='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[d]){var b=f.get(e);b&&(a+='\n"'+e+"   "+b.toString().replace("\t",
"^I").replace("\n","^J"))}f=h("WAIT_FOR_INPUT");e=this.a.feeder.firstBuffer.cols;for(d=a.length;d<e;d++)a+=" ";this.b=a+"\n"+f};a.prototype.getMessage=function(){return this.b};m[1](2,"REGISTERS",a)})();BotanJS.define("Components.Vim.Actions.EDITOR_COMMAND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var m=S("Components.Vim.Actions"),h=U("System.Debug"),k=U("Components.Vim.Error");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d){a.preventDefault();var e=1,b="",c=[];if(-1!=".$%".indexOf(d[e]))b=d[e++];else for(;-1!="0123456789".indexOf(d[e]);e++)b+=d[e];var g="";if(-1!="/?".indexOf(d[e]))g=d[e];else for(var r=/\w/g,p=d[e];p=d[e];e++)if(p.match(r))g+=p;else break;r=!1;switch(g){case "s":case "su":case "substitute":r=
!0;c[1]="REPLACE";break;case "/":r=!0;c[1]="FIND";break;case "buffers":case "ls":c[1]="BUFFERS";break;case "w":case "write":c[1]="WRITE";break;case "q":case "quit":c[1]="QUIT";break;case "register":case "registers":c[1]="REGISTERS";break;case "ver":case "version":c[1]="VERSION";break;case "h":case "help":c[1]="HELP";break;case "varec":c[1]="VA_REC"}""!==b&&(r?c[0]=b:c[3]=k("E481"));c[2]=d.slice(e);if(c[3])return this.b=c[3],!0;if(!c[1])return this.b=k("E492",d.slice(1).join("")),!0;try{m[0](c[1])}catch(s){return this.b=
k("TODO",c[1]),!0}try{this.a.openRunAction(c[1],a,c[2],c[0]),this.b=this.a.message}catch(q){h.Error(q)}return!0};a.prototype.getMessage=function(){return this.b};m[1](2,"EDITOR_COMMAND",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.Va(a);this.b="";a.blink=!1;a.pSpace=!0}function m(a,b){if(0==b)return 0;for(var c=a.feeder,d=0,e=-1,f=c.content.indexOf("\n");0<=f&&!(e=f,d++,b<=d);f=c.content.indexOf("\n",f+1));c.EOF&&(f=e);c=c.content[f+1];void 0!=c&&"\n"!=c&&f++;return f}var h=S("Components.Vim.Actions"),k=U("System.Debug"),f=U("Components.Vim.Message"),d=h[0]("YANK"),e=h[0]("DELETE"),b=h[0]("SHIFT_LINES"),c=h[0]("PUT");a.prototype.Va=function(a){this.a=a;var b={lineNum:a.c().lineNum,X:a.X,aPos:a.aPos,
Cb:a.PStart};b.zb=b.aPos-a.aX;a.suppressEvent();a.lineEnd(!0);b.yb=a.aPos;a.moveTo(b.aPos);a.unsuppressEvent();this.Za=b};a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.blink=!0;a.pSpace=!1;a.updatePosition();a.feeder.wrap&&0<a.X&&(a.suppressEvent(),a.moveX(-1),a.moveX(1),a.unsuppressEvent())};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var h=this.a,p=h.feeder,s=null,q=!1;if(a.kMap("y"))s=new d(h);else if(a.kMap("d"))s=new e(h);else if(a.kMap("p"))s=
new c(h);else if(a.kMap("V")){if(1==this.n)return!0;q=!0;this.n=1;this.b=f("VISLINE")}else if(a.kMap("<")||a.kMap(">"))s=new b(h,a);else if(a.kMap("v")){if(0==this.n)return!0;q=!0;this.n=0;this.b=f("VISUAL");h.updatePosition()}q&&p.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));if(-1==this.n)return k.Error(Error("Mode is undefined")),!0;q=this.Za;if(s){h.suppressEvent();if(p=1==this.n)q.aPos<h.aPos?(h.lineEnd(!0),q.aPos=q.zb):(h.lineStart(),q.aPos=q.yb);var w=~[e,c].indexOf(s.constructor);
if(w&&q.aPos<h.aPos){var t=h.aPos;h.moveTo(q.aPos,!0);q.aPos=t}s.handler(a,q.aPos,p);w||h.moveTo(q.aPos);this.b=s.getMessage();s.dispose();h.unsuppressEvent();q.Cb=h.PStart;return!0}a.range&&(h.suppressEvent(),a=a.range,h.aPos==q.aPos&&(h.moveTo(a.open,!0,!1,!0),this.Va(h),q=this.Za),h.unsuppressEvent(),h.moveTo(a.close,!0,!1,!0));t=h.aPos;s=p.firstBuffer;a=s.lineNum;var x=m(h,a),z=m(h,a+p.moreAt+1)-1;k.Info("Min aPos: "+x,"Max aPos: "+z);a=q.X;w=h.PStart;if(q.aPos<x)a=0,1==this.n&&(h.suppressEvent(),
h.lineEnd(!0),w=h.PStart,h.moveTo(t,!0),h.unsuppressEvent());else if(z<q.aPos){a=-2;q=0;do{if(s.placeholder)break;q<=p.moreAt&&(a+=s.toString().length+1);q++}while(s=s.next)}else{p=q.lineNum;if(1==this.n)h.suppressEvent(),a=0,t<q.aPos?(a=-1,p++,h.lineStart(),w=h.PStart):q.aPos<t?(h.lineEnd(!0),w=h.PStart):(h.lineStart(),w=h.PStart,h.lineEnd(!0),a=h.PStart,p=s.lineNum),h.moveTo(t,!0),h.unsuppressEvent();else if(0==this.n&&t==q.aPos)return;do{if(s.lineNum==p||s.placeholder)break;a+=s.toString().length+
1}while(s=s.next)}q=a;p=w;s=p-q;0<=s?p+=1:0>s&&(q+=s,p=a+1);h.PStart=q;h.PEnd=p}};a.prototype.getMessage=function(){return this.b};h[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new f;this.action=null;this.blink=!0;this.pSpace=!1;this.P=this.ga=0}function m(a,c){var g=a.c(),d=a.Y+c,e=a.Y;g||(g=a.feeder.firstBuffer,e=0,d=c);for(g!=a.feeder.firstBuffer&&e--;e<d&&!g.placeholder;g=g.nextLine)g.br&&e++;return e}var h=S("Components.Vim"),k=U("System.Debug"),f=U("Components.Vim.State.Recorder"),d=U("Components.Vim.Actions.*"),e=U("System.utils.Perf.CountSubstr");
a.prototype.Vim;a.prototype.moveTo=function(a,c,g){var d=this.feeder.content,e=this.c(),f=e.lineNum;e.placeholder&&(this.Y=f=0);for(var h=0,k=0,e=d.indexOf("\n");0<=e&&!(a<=e);e=d.indexOf("\n",e))k=e,e++,h++;if(e=h-f)this.moveY(e),this.feeder.moreAt==this.Y&&this.moveY(1);e=this.c();d=a<k?k-a:a-k;for(f=d-e.content.length;0<f;){d++;e=e.next;if(!e||e.lineNum!=h)break;f-=e.content.length}0<this.c().lineNum&&k<=a&&d--;this.moveX(-Number.MAX_VALUE,!1,!1,!0);this.moveX(d,!1,c,g)};a.prototype.moveX=function(a,
c,g,d){var f=this.pX,h=Boolean(a);0<this.P&&(0<a&&g&&(a+=this.P),this.P=0);h&&(f=this.X+a);a||(a=1);var k=this.feeder;if(c&&0>f&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),this.lineEnd(g);else{var m=this.c(),t=m.tabWidth-1,x=this.rawLine,z=m.visualLines.join("\n"),y=z.length,u=0,B=!0;1<y&&(u=(B=0<(x.length+e(x,"\t")*t)%m.cols)?g?y-1:y-2:g?y:y-1);if(d){if(c&&0<a&&z.length-1<=f){this.moveY(1);this.X=0;this.updatePosition();return}}else{if(c&&"\t"==m.content[0]&&f<t){this.moveY(-1);this.lineEnd(g);
return}c=d=this.aX;0>a?("\t"==x[d]&&(f-=t,0>f&&(f=t)),d=e(x.substring(d+a,c),"\t")-1,0<d&&(f-=d*t)):h?(m="\n"==z[f]?1:0,0==d&&(f=a,"\t"==x[0]&&(f+=t)),c+=a,d=e(x.substring(d+1,c+1),"\t"),1<d&&"\t"==x[c]&&d--,f+=d*t+m,a=1):(f+=e(x.substring(0,f+a),"\t")*t,f+=Math.floor(f/m.cols),1<a&&(f+=a-1))}t=z[f];(y=void 0==t||y==f+1&&" "==t)?(f=0<f?u:0,0>a&&0<f&&(y=!1,f+=a)):"\n"==t&&(f+=a);k.wrap&&y&&!B&&g&&(this.P=1);this.X=f;h&&(this.pX=this.aX,this.updatePosition())}};a.prototype.fixTab=function(){this.moveX(1,
!1,!0);this.moveX(-1)};a.prototype.lineStart=function(a){this.pX=a?(a=this.rawLine.match(/^[ \t]+/g))?a[0].length:0:0;this.moveX();this.updatePosition()};a.prototype.lineEnd=function(a){this.moveX(Number.MAX_VALUE,!1,a,!0)};a.prototype.updatePosition=function(){var a=0,c=0,d=this.feeder.lineBuffers[0];a:for(;d&&c<this.Y;c++)for(;d;){if(d.next&&d.next.placeholder)break a;a+=d.toString().length+1;if((d=d.next)&&d.br)break}this.PStart=a=this.X+a+this.P;this.PEnd=a+1;this.I()};a.prototype.I=function(){0<
this.ga?k.Info("Event suppressed, suppression level is: "+this.ga):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=function(a){var c=this.Y+a,d=this.feeder,e;if(0>c)d.pan(void 0,c),this.Y=0,this.moveX(),this.updatePosition(),d.softReset();else if(!d.EOF&&d.moreAt<c){d=this.feeder;if(d.linesTotal<c){for(;!d.EOF;)d.pan(void 0,1);a=m(this,a)}else{e=d.lastBuffer.lineNum;var c=c-d.moreAt,f=this.c().lineNum;d.EOF||d.pan(void 0,c);for(c=f+a;!d.EOF&&(d.lastBuffer.lineNum==
e||d.lastBuffer.lineNum<c);)d.pan(void 0,1);this.Y=0;for(e=this.c();e&&e.lineNum!=c&&!e.placeholder;this.Y++,e=this.c());a=this.Y;d.EOF||d.lastBuffer.next.lineNum!=e.lineNum||a--}this.Y=a;this.moveX();this.updatePosition();d.softReset()}else{if(0<a){e=this.c();if(e.nextLine.placeholder)return;c=m(this,a)}this.Y=c;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a,c){this.action&&this.action.dispose();k.Info("openAction: "+a);this.action=new d[a](this,c);this.F=null;this.I()};a.prototype.closeAction=
function(){this.action&&(this.action.dispose(),this.F=this.action.getMessage(),this.action=null,k.Info("closeAction: "+this.F),this.Vim.contentAnalyzer.reset(),this.I())};a.prototype.openRunAction=function(a,c,e,f,h,m,q){k.Info("OpenRunAction: "+a);a=new d[a](this);a.handler(c,e,f,h,m,q);this.F=a.getMessage();a.dispose();this.Vim.contentAnalyzer.reset();this.I()};a.prototype.suppressEvent=function(){++this.ga};a.prototype.unsuppressEvent=function(){--this.ga};a.prototype.c=function(a){for(var c=this.feeder,
d=c.firstBuffer,c=c.lastBuffer.next,e=0;d!=c;d=d.next)if(d.br&&e++,this.Y==e){if(a)for(a=this.aX+1;0<(a-=d.content.length)&&d.next;)d=d.next;return d}return null};v(a.prototype,"rawLine",function(){for(var a=this.feeder.content,c=this.c().lineNum-1,d=a.indexOf("\n"),e=0;0<=d&&c!=e;d=a.indexOf("\n",d),e++)d++;0==e&&-1==d&&(d=0);return a.substring(d+1,a.indexOf("\n",d+1))});v(a.prototype,"aX",function(){var a=this.X,c=0;if(this.feeder.wrap){var d=this.c().visualLines,f=a,h;for(h in d){var k=d[h],m=
k.content.length,w=k.toString().length,a=a-(w+1);if(0<=a)c+=m,f-=1+e(k.content,"\t")*(k.tabWidth-1);else if(0>a){a+=w+1;d=this.rawLine.substr(c);m=0;"\t"==d[0]&&(a-=k.tabWidth-1,f-=k.tabWidth-1);for(h=1;m<a&&h<d.length;h++)"\t"==d[h]&&(a-=k.tabWidth-1,f-=k.tabWidth-1),m++;c+=m;c<f&&(c=f);break}}}else return this.X;return c});v(a.prototype,"aPos",function(){var a=this.feeder,c=this.c().lineNum,d=0;if(0<c){d=a.content.indexOf("\n");for(i=1;-1!=d&&i<c;i++)d=a.content.indexOf("\n",d+1);a.wrap&&d++}return d+=
this.aX});v(a.prototype,"face",function(){return"\u2588"});v(a.prototype,"message",function(){if(this.F){var a=this.F;this.F=null;return a}return this.action&&this.action.getMessage()});v(a.prototype,"position",function(){return{start:this.PStart,end:this.PEnd}});h[1](2,"Cursor",a)})();BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,e){var b=[];b[a]=new h(e);for(var c=a-1;0<=c;c--)b[c]=new h(e,b[c+1]);this.lineBuffers=b;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new k(this);this.dispatcher=new L;this.M=null;this.ca=-1;this.R=a}var m=S("Components.Vim");U("System.Debug");var h=m[0]("LineBuffer"),k=m[0]("Cursor"),f=U("System.utils.Perf.CountSubstr");a.prototype.init=function(a,e){this.content=a;this.setWrap(e);this.firstBuffer.Z(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var e=this,b=a?function(){return!0}:function(a){return!a.placeholder};this.ob=function(a,d){for(var f=(void 0==a?"":a)+"",h=!1,k=0;a&&k<d&&(a=a.next)&&b(a);k++)h||a.br&&d<k+a.visualLines.length?(h||(e.M=a),h=!0,f+="\n@"):f+="\n"+a;return f};this.pb=function(){for(var a=e.lineBuffers[e.nb],d=e.Ta+1,f=0;a&&f<d&&(a=a.next)&&b(a);f++)if(a.br&&d<f+a.visualLines.length){e.M=a;break}}};a.prototype.render=function(a,e){var b=this.lineBuffers;
if(void 0==a)a=0;else if(this.R<a)return"";if(void 0==e||this.R-a<e)e=this.rows-a;if(0==e)return"";this.nb=a;this.Ta=e-1;return this.ob(b[a],this.Ta)};a.prototype.pan=function(a,e){void 0==a&&(a=0);void 0==e&&(e=0);var b=this.panX+a,c=this.panY+e,f=-1,h=0;0>c&&(c=0);var k=this.content.slice(0,-1);if(0<c)for(f=k.indexOf("\n"),h=1;-1!=f&&h<c;h++){var m=k.indexOf("\n",f+1);if(-1==m){c=h;break}f=m}this.firstBuffer.Z(this.content.substr(f+1),this.wrap,h);this.panX=b;this.panY=c};a.prototype.softReset=
function(){this.ca=-1;this.M=null;this.pb()};v(a.prototype,"linesTotal",function(){return f(this.content,"\n")});v(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});v(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.R-1]});v(a.prototype,"EOF",function(){return this.lineBuffers[this.R].placeholder});v(a.prototype,"moreAt",function(){if(0<this.ca)return this.ca;var a=this.firstBuffer;if(a.placeholder)return 0;var e=0;do{if(this.M==a)break;a.br&&e++}while(a=a.next);void 0==
a&&e--;return this.ca=e});v(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,e=this.cursor.c(),b="",c=0,f=this.cursor.aPos,h=f-a;do"\t"==this.content[h+1]&&c++,h++;while(h<f);c&&(b="-"+(a+c*(e.tabWidth-1)));return e.lineNum+1+","+a+b});v(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY)a=this.EOF?"BOTTOM":Math.floor(this.panY/(this.linesTotal-(this.R-1))*100)+"%";else if(this.M||!this.EOF)a="TOP";return a});v(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;
var e=0;do e++;while((a=a.next)&&!a.placeholder);return e});m[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");
(function(){function a(a){this.cols=a;this.ya={};this.override=null}var m=S("Components.Vim");U("System.Debug");m[0]("LineFeeder");a.prototype.stamp=function(a,k){this.ya[a]=k};a.prototype.override;v(a.prototype,"statusText",function(){if(this.override)return this.override();for(var a="",k=this.cols,f=0;f<k;f++){var d=k-f,e=this.ya[f]||this.ya[-d];if(e){if(e=e(),void 0!=e&&""!==e){if(0==f&&k<=e.length)return e;a+=e.substr(0,d);f=a.length}}else a+=" "}return a});m[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a,c){if(!a)throw Error("Invalid argument");L.call(this);a=k(a);var e=a.element;if(!e||"TEXTAREA"!=e.nodeName)throw Error("This element is not compatible for VimArea");for(var g in t){var h=t[g];if(h.stage.element==e)return b.Info("Instance exists"),h}a.setAttribute(new f("vimarea",1));this.stage=a;this.rows=e.rows;this.cols=e.cols;this.u=!1;var m=this;this.B=[new d("Focus",function(){m.u=!0}),new d("Blur",function(){m.u=!1})];if(c){var p=e.value;this.wb(function(){m.cb(p)})}else this.cb(e.value);
this.ma=x++;t[this.ma]=this}function m(a,b){return function(c){a.u=!0;c=c||window.event;c.keyCode?code=c.keyCode:c.which&&(code=c.which);b(a,new q(a,c))}}var h=S("Components.Vim"),k=U("Dandelion.IDOMElement"),f=U("System.utils.DataKey"),d=U("System.utils.EventKey"),e=U("System.Cycle"),b=U("System.Debug"),c=U("Components.Vim.State.Registers"),g=U("Components.Vim.Syntax.Analyzer"),r=h[0]("LineFeeder"),p=h[0]("StatusBar"),s=h[0]("Controls"),q=h[0]("ActionEvent"),w=h[0]("Message"),t=[],x=0;n(a,L);a.prototype.wb=
function(a){function b(){f.value+=d();++m;k==f.scrollHeight?e.next(b):(p.rows=m,p.cols=g,a())}function c(){f.value+=d();if(h==f.scrollWidth)e.next(c);else{var a="";--g;for(var k=0;k<g;k++)a+=".";f.value=a;f.style.whiteSpace="";d=function(){return"\n"+a};b()}}function d(){return"Please wait while Vim;Re is testing for screen dimensions"[g++]||"."}var f=this.stage.element;f.value="";var g=0;f.style.whiteSpace="nowrap";var h=f.scrollWidth;c();var k=f.scrollHeight,m=0,p=this};a.prototype.select=function(a){if(this.u){var b=
this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.cb=function(a){function b(){C.init(D.statusText);var a=C.linesOccupied;h.value=t.render(a-1,k-a)+"\n"+C.render(0,a<k?a:k);f.J=!1;f.select(t.cursor.position)}var f=this;this.content=a;var h=this.stage.element,k=this.rows,q=this.cols,t=new r(k-1,q),x=new g(t);t.init(a+"\n");var C=new r(k,q);C.setRender(!1);t.cursor.Vim=this;C.cursor.Vim=this;var D=new p(q);D.stamp(-18,function(){return t.lineStat});D.stamp(-3,function(){return w(t.docPos)});
D.stamp(0,function(){return t.cursor.message});C.init(D.statusText);t.dispatcher.addEventListener("SelectionChanged",function(){f.select(t.cursor.position)});t.dispatcher.addEventListener("VisualUpdate",b);h.value="Please wait ...";e.delay(b,70);this.I=b;this.contentFeeder=t;this.contentAnalyzer=x;this.statusFeeder=C;this.statusBar=D;this.W=new c;this.a=t.cursor;this.J=!0;e.perma("VimCursorBlinkCycle"+h.id,function(){f.select(!f.a.blink||(f.J=!f.J)?f.a.position:{start:0,end:0})},600);a=new s(this);
this.B.push(new d("KeyDown",m(this,a.handler.bind(a))));this.stage.addEventListeners(this.B);this.dispatchEvent(new BotanEvent("Visualized"))};a.prototype.display=function(a,b){var c=this,e=this.stage,g=this.a,h=this.B,k;for(k in h)e.removeEventListener(h[k]);g.suppressEvent();this.u=!1;e.removeAttribute("data-vimarea");setTimeout(function(){e.element.value=a;b&&b()},100);var m=new d("KeyDown",function(a){(new q(c,a)).kMap("Escape")&&(e.removeEventListener(m),e.setAttribute(new f("vimarea",1)),e.addEventListeners(c.B),
g.unsuppressEvent(),g.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate")),c.u=!0,e.element.focus())});e.addEventListener(m)};a.prototype.demo=function(a){if(!this.Ja){var b=this;this.Ja=!0;var c=a.length,d=0,e=new s(this),f=this.a,g=this.statusBar,h=function(){g.stamp(1,!1);e.handler(b,new q(b,"Escape"));setTimeout(function(){f.openRunAction("VA_REC",void 0,!0);b.Ja=!1;b.stage.addEventListeners(b.B)},100)},k=function(){b.stage.element.focus();e.handler(b,new q(b,a[d+1]));d+=2;d<c?setTimeout(k,
a[d]||20):setTimeout(h,100)};g.stamp(1,function(){return w("VA_REC_REPLAY")});var m=this.B,p;for(p in m)this.stage.removeEventListener(m[p]);this.u=!0;setTimeout(k,a[d])}};a.prototype.dispose=function(){var a=this.stage,c=this.B,d=this.contentFeeder,f=a.element.id;b.Info("Destroy instance: "+f);d.dispatcher.removeEventListener("VisualUpdate",this.I);this.dispatchEvent(new BotanEvent("Dispose"));a.removeAttribute("data-vimarea");e.permaRemove("VimCursorBlinkCycle"+f);for(var g in c)a.removeEventListener(c[g]);
a.element.value=this.content;delete t[this.ma]};v(a.prototype,"index",function(){return this.ma+1});v(a,"Instances",function(){var a=[],b;for(b in t)a.push(t[b]);return a});h[1](2,"VimArea",a)})();})();
