(function(){function p(a,g){a.prototype=Object.create(g.prototype);a.prototype.constructor=a}function w(a,g,h){Object.defineProperty(a,g,{get:h,set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:g})})}function y(a,g){Object.defineProperty(a,"propagating",{get:g,set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:"propagating"})})}
function F(a,g,h){Object.defineProperty(a,g,{get:function(){return h},set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:g})})}function BotanEvent(a,g){var h=!1,m=!1;F(this,"propagate",function(){m||(h=!0);m=!0});F(this,"stopPropagating",function(){h=!1});F(this,"type",a);y(this,function(){return h});F(this,"data",g);this.setTarget=function(a){F(this,"target",a);this.setTarget=void 0}.bind(this)}
function L(){function a(){this.ia.propagate();for(var a in this.stack)if(this.ia.propagating)this.stack[a](this.ia);this.ia.stopPropagating()}function g(a){h[a]||(h[a]=[]);return h[a]}var h={},m=this;this.addEventListener=function(a,e){var f=g(a);f[f.length]=e};this.removeEventListener=function(a,e){var f=g(a),d=f.indexOf(e);0>d||delete f[d]};this.dispatchEvent=function(k){var e=g(k.type);k.setTarget&&k.setTarget(m);setTimeout(a.bind({ia:k,stack:e}),0)}}function M(){L.call(this)}M.prototype=[];
var N={},O={},P={},R=window.BotanJS,BotanJS=null,S=null,U=null;R&&(BotanJS=R.sg[0],S=R.sg[1],U=R.sg[2]);BotanJS=BotanJS||function(){var a=0,g=[],h=[],m=new L,k={write:function(a){g[g.length]=a}};F(k,"read",function(){return g[a++]});F(k,"end",function(){return g.length<=a});F(m,"log",k);F(m,"define",function(a){h[h.length]=a});F(m,"getDef",function(){return h.slice()});return m}();
S=S||function(a){if(O[a])return O[a];for(var g=a.split("."),h=g.length,m=N,k=0;k<h;k++)m[g[k]]=m[g[k]]||{},m=m[g[k]];m.eb=[];nsObj=new M;nsObj[1]=function(a,f,d){this.m[f]||(this.m[f]=[a,d],a=new BotanEvent("NS_EXPORT",{name:this.V+"."+f,type:a}),BotanJS.dispatchEvent(a))}.bind({m:m,V:a});nsObj[0]=function(a){if(!this.m[a])throw Error("["+this.V+"] Invoke failed: "+a+" does not exists");return this.m[a][1]}.bind({m:m,V:a});nsObj[10]=function(a,f){this.eb[a]=f}.bind(m);nsObj[11]=function(a,f){throw Error("["+
this.V+(f?"."+f:"")+"] "+a);}.bind({V:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return O[a]=nsObj};
U=U||function(a,g){var h=a.replace(".*","");O[h]&&O[h].dispatchEvent(new BotanEvent("NS_IMPORT",e));if(!g&&P[a])return P[a];for(var m=a.split("."),k=m.length,e=N,h=!1,f=0;f<k;f++){if("*"==m[f]){h=!0;break}e=e[m[f]];if(!e)throw Error("No such class: "+a);}if(e instanceof Array&&"*"!=m[f])return h=null,h=10==e[0]?e[1]():e[1],P[a]=h;m={};for(f in e)k=e[f],k instanceof Array&&(h&&2==k[0]?m[f]=k[1]:3==k[0]?m[f]=k[1]:0==k[0]?Object.defineProperty(m,f,{get:function(){return this.m[this.e][1]}.bind({e:f,
m:e}),set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:f})}):1==k[0]?Object.defineProperty(m,f,{get:function(){return this.m[this.e][1]()}.bind({e:f,m:e}),set:function(d){this.m[this.e][1](d)}.bind({e:f,m:e})}):10==k[0]&&Object.defineProperty(m,f,{get:k[1],set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:f})}));return P[a]=m};window.BotanJS={};window.BotanJS.version="1.0.0b";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return U(a)}catch(g){if(R)return R["import"](a);throw g;}};window.BotanJS.sg=[BotanJS,S,U];BotanJS.define("System.utils.IKey");
(function(){function a(h,m){h&&"string"!=typeof h||(this.keyName=h,this.keyValue=m instanceof a?m:void 0!=m?String(m):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var g=S("System.utils");a.prototype.keyName="";a.prototype.keyValue="";F(a,"quickDef",function(){var h=arguments.length;if(0!=h%2)g[11]("Invalid Definition Count","IKey");for(var m=[],k=0;k<h;k+=2)m[m.length]=new a(arguments[k],arguments[k+1]);return m});g[1](2,"IKey",a)})();BotanJS.define("System.utils.Perf");
(function(){for(var a=S("System.utils.Perf"),g=[],h=0;256>h;h++)g[h]=(16>h?"0":"")+h.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,k=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return g[a&255]+g[a>>8&255]+g[a>>16&255]+g[a>>24&255]+"-"+g[k&255]+g[k>>8&255]+"-"+g[k>>16&15|64]+g[k>>24&255]+"-"+g[e&63|128]+g[e>>8&255]+"-"+g[e>>16&255]+g[e>>24&255]+g[f&255]+g[f>>8&255]+g[f>>16&255]+g[f>>24&255]});a[1](3,"CountSubstr",function(a,k){if(0>=
k.length)return a.length+1;for(var e=0,f=a.indexOf(k);0<=f;f=a.indexOf(k,f))e++,f++;return e});a[1](3,"ArrayReverse",function(a){for(var k=null,e=a.length,f=null,k=0,f=e-1;k<f;k+=1,--f){var e=a[k],d=a[f],e=e^d,d=d^e,e=e^d;a[k]=e;a[f]=d}})})();BotanJS.define("System.Global");
(function(){var a=S("System.Global"),g=Boolean(document.all),h=window.allowed_origins||[],m=window.location.href.match(/^https:\/\//),k=navigator.userAgent,k=Boolean(~k.indexOf("Android")||~k.indexOf("webOS")||~k.indexOf("iPhone")||~k.indexOf("iPad")||~k.indexOf("iPod")||~k.indexOf("BlackBerry")||~k.indexOf("Windows Phone"));a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",g);a[1](0,"ALLOWED_ORIGINS",h);a[1](0,"SECURE_HTTP",m);a[1](0,"MOBILE",k)})();BotanJS.define("Dandelion");
(function(){function a(){if(r)return!0;try{return r=U("Dandelion.IDOMElement"),!0}catch(b){}return!1}function g(b,d){if(d&&a()){for(var c=b.length,f=[],e=0;e<c;e++)f[e]=r(b[e]);return f}return b}function h(b,d){b&&d(b)&&b.parentNode&&h(b.parentNode,d)}function m(b,d){return d(b)?b:b.parentNode&&m(b.parentNode,d)}function k(b){return document.createTextNode(b)}function e(q,d,a,r,e){q=document.createElement(q||"div");d&&(q.id=d);a&&(c?q.className=a:q.setAttribute("class",a));if(e)if(e instanceof Array)for(var k in e)q.setAttribute(e[k].keyName,
e[k].keyValue);else e instanceof b&&q.setAttribute(e.keyName,e.keyValue);r&&f(q,r);return q}function f(b,d){if(d instanceof Array)for(var a=d.length,r=0;r<a;r++)d[r]&&f(b,d[r]);else"string"==typeof d?b.appendChild(k(d)):d&&b.appendChild(d)}var d=S("Dandelion"),c=U("System.Global.IE"),b=U("System.utils.IKey"),r;d[1](3,"wrap",e);d[1](3,"wrapc",function(b,d,a){return e(!1,!1,b,d,a)});d[1](3,"wrape",function(b,d){return e(!1,!1,!1,b,d)});d[1](3,"wrapne",function(b,d,a){return e(b,!1,!1,d,a)});d[1](3,
"wrapna",function(b,d){return e(b,!1,!1,!1,d)});d[1](3,"textNode",k);d[1](3,"bubbleUp",m);d[1](3,"chainUpApply",h);d[1](3,"id",function(b,d){var c=document.getElementById(b);return c?d&&a()?r(c):c:c});d[1](3,"tag",function(b,d,a){a=void 0===a?document:a;return g(a.getElementsByTagName(b),d)});d[1](3,"name",function(b,d,a){a=void 0===a?document:a;return g(a.getElementsByName(b),d)});d[1](3,"glass",function(b,d,a){a=void 0===a?document:a;return g(a.getElementsByClassName(b),d)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,k){h.call(this,a,k);this.type=a.toLowerCase();this.handler=k}var g=S("System.utils"),h=g[0]("IKey");p(a,h);a.prototype.type="";a.prototype.handler=null;g[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(k,e){if(k instanceof a)return k;if(e)this.addEventListener=this.addEventListener.bind(k),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(k),this.removeEventListener=this.removeEventListener.bind(k);else{if(k)return new a(k,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function g(){}var h=S("Dandelion"),m=U("System.utils.EventKey");g.prototype.indexOf=function(a){for(var e=this.length,f=0;f<e;f++){var d=this[f];if(d.type==
a.type&&d.handler==a.handler)return f}return-1};p(g,Array);a.prototype.hasListener=function(a){return a instanceof m&&this.l&&-1!=this.l.indexOf(a)?this.l[this.l.indexOf(a)]:null};a.prototype.addEventListener=function(a,e){var f;if("string"==typeof a&&e)f=new m(a,e);else if(a instanceof m)f=a;else return!1;if(this.l)if(0>this.l.indexOf(f))this.l.push(f);else return!1;else this.l=new g,this.l[0]=f;this.addEventListener?this.addEventListener(f.type,f.handler,!1):this.attachEvent?this.attachEvent("on"+
f.type,f.handler):this["on"+f.type]=f.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var e in a)this.addEventListener(a[e])};a.prototype.removeEventListener=function(a,e){e&&(a=new m(a,e));this.l&&delete this.l[this.l.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};h[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(b){b=typeof b;return"number"==b?h:"string"==b?g:m}function g(b,a){return b.nodeName==a}function h(b,a){return b.nodeType==a}function m(){return!1}function k(b,a){if(b instanceof k)return b;if(a)c.call(this,b,!0),this.getDAttribute=this.getDAttribute.bind(b),this.loot=this.loot.bind(b),this.foreach=this.foreach.bind(b),this.reverseChild=this.reverseChild.bind(b),this.clear=this.clear.bind(b),this.first=this.first.bind(b),this.last=this.last.bind(b),this.contains=this.contains.bind(b),
this.style=b.style,this.hasAttribute=function(){}.bind(b),this.removeAttribute=function(b){this.removeAttribute(b)}.bind(b),this.element=b,this.setAttribute=this.setAttribute.bind(b);else{if(b&&void 0!=b.nodeType&&1==b.nodeType)return new k(b,!0);if(void 0===b)return new k(d(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var e=S("Dandelion"),f=U("System.utils.IKey");U("System.utils.Perf");var d=e[0]("wrap"),c=e[0]("IDOMObject");p(k,c);k.prototype.setAttribute=function(b,
a){if(b instanceof f)this.setAttribute(b.keyName,b.keyValue);else if(b instanceof Array)for(var d in b)b[d]instanceof f&&this.setAttribute(b[d].keyName,b[d].keyValue);else this.setAttribute(b,a)};k.prototype.loot=function(b){for(var a=b.childNodes;a.length;)this.appendChild(b.removeChild(a[0]))};k.prototype.clear=function(){for(var b=this.childNodes;b.length;)this.removeChild(b[0])};k.prototype.getDAttribute=function(b){return(b=this.getAttribute("data-"+b))&&decodeURIComponent(b)};k.prototype.foreach=
function(b,a){for(var d=Array.apply([],this.childNodes),c=d.length,f=0;f<c;f++)d[f].nodeType==b&&a(d[f],this)};k.prototype.first=function(b,d){for(var c=this.childNodes,f=c.length,e=null,h=a(b),k=0;k<f;k++)if(h(c[k],b)&&(void 0===d||d(c[k],this))){e=c[k];break}return e};k.prototype.last=function(b,d){for(var c=this.childNodes,f=null,e=a(b),h=c.length-1;-1<h;h--)if(e(c[h],b)&&(void 0===d||d(c[h],this))){f=c[h];break}return f};k.prototype.contains=function(b){return b.parentElement?b==this?!0:this.contains(b.parentElement):
!1};k.prototype.aKeys=function(){for(var b=[],a=this.element.attributes,d=a.length,c=0;c<d;c++)b.push(new f(a[c].name,a[c].value));return b};k.prototype.reverseChild=function(){for(var b=this.childNodes.length-1;-1<--b;)this.appendChild(this.childNodes[b])};e[1](2,"IDOMElement",k)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,k){h.call(this,"data-"+a,k?encodeURIComponent(String(k)):"")}var g=S("System.utils"),h=g[0]("IKey");p(a,h);g[1](2,"DataKey",a)})();BotanJS.define("System.utils");
(function(){var a=S("System.utils"),g=U("System.Global");a[1](3,"objGetProp",function(a,m,k){if(a&&a[m]){var e=a[m].constructor.toString().match(/function ([^\(]+)/);if(e&&2==e.length&&e[1].toUpperCase()==k.toUpperCase())return a[m]}return null});a[1](3,"objSearch",function(a,m,k){for(var e in a)if(m(a[e]))return a[e][k]||a[e];return null});a[1](3,"objMap",function(a,m){for(var k in a)a[k]=m(a[k])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?g.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(g.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.T=!1;this.loop=function(){for(var m in this.steppers)this.steppers[m]();a++};w(this,"count",function(){return a})}var g=S("System");a.prototype.putStepper=function(a){var m=this.steppers.length;this.steppers[m]=a;return m};a.prototype.start=function(){this.T||(this.id=setInterval(this.loop.bind(this),0),this.T=!0)};a.prototype.stop=function(){this.T&&(this.T=!1,clearInterval(this.id))};a.prototype.steppers=[];w(a.prototype,"started",function(){return this.T});
g[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=S("System.Log"),g=[];a[1](3,"writeLine",function(a,m){m=void 0===m?16:m;var k=!1,e;for(e in g)g[e](a,m),k=!0;!k&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var m=-1;g[m=g.length]=a;return m});a[1](3,"removeHandler",function(a){delete g[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){m&&h.writeLine(Array.prototype.join.call(arguments," "),h.INFO)}var g=S("System.Debug"),h=U("System.Log"),m=U("System.Global").debug,k=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());g[1](3,"Error",function(a){k&&h.writeLine(a.name+"\n\t"+a.message+"\n\t"+a.stack,h.ERROR)});g[1](3,"Info",a);g[1](3,"turnOff",function(a){"info"==a?m=!1:"error"==a&&(k=!1)});g[1](3,"turnOn",function(a){"info"==a?m=!0:"error"==a&&(k=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(f){f.target.removeEventListener("NS_IMPORT",a);f=U("System.Cycle.TICK",!0);f!=e&&f.cb?(m.Info("[System.Cycle] Global Tick exists"),e=null):(m.Info("[System.Cycle] Creating global Tick"),e.start())}var g=S("System.Cycle");U("System.utils");var h=U("System.Tick"),m=U("System.Debug"),k=[],e=new h;e.putStepper(function(){var a=(new Date).getTime(),d;for(d in k){var c=k[d];if(c&&a>c[1]){try{c[0]()}catch(b){m.Error(b);delete k[d];continue}c[2]?delete k[d]:c[1]=a+c[4]}}});g.addEventListener("NS_IMPORT",
a);g[1](3,"next",function(a){var d=[];d[0]=a;d[1]=0;d[2]=!0;k[k.length]=d});g[1](3,"delay",function(a,d){var c=[];c[0]=a;c[1]=(new Date).getTime()+d;c[2]=!0;k[k.length]=c});g[1](3,"perma",function(a,d,c){for(var b in k)if(k[b][3]==a)return!1;b=[];b[0]=d;b[1]=(new Date).getTime()+c;b[2]=!1;b[3]=a;b[4]=c;k[k.length]=b});g[1](3,"permaRemove",function(a){for(var d in k)k[d][3]==a&&delete k[d]});g[1](10,"TICK",function(){return e})})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.ea={}}function g(a,e){this.ua=a+"";this.newLine=Boolean(e)}var h=S("Components.Vim.State"),m=U("System.Debug");g.prototype.newLine=!1;g.prototype.toString=function(){return this.ua};g.prototype.indexOf=function(a,e){return this.ua.indexOf(a,e)};w(g.prototype,"length",function(){return this.ua.length});a.prototype.Za=function(a){this.ea['"']=a};a.prototype.yank=function(a,e){var f=new g(a,e);this.Za(f);this.ea[this.S||0]=f;this.S=!1};a.prototype.change=function(a,e){var f=
new g(a,e);this.Za(f);for(var d=this.ea,c=9;1<c;c--)void 0!=d[c-1]&&(d[c]=d[c-1]);d[1]=f;this.S=!1};a.prototype.get=function(a){a||0===a||(a=this.S||'"');this.S=!1;return this.ea[a]};a.prototype.select=function(a){m.Info("Selecting Register: "+a);this.S=a};h[1](2,"Registers",a)})();BotanJS.define("Components.Vim");
(function(){function a(a,f,d){if(void 0==a[f])return f;var c=0;return a[f].replace(/%\d+/g,function(){return d[c++]})}var g=S("Components.Vim"),h={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL --",VISLINE:"-- VISUAL LINE --",REGISTERS:"--- Registers ---",WRITE:'"%1" %2L, %3C written',WAIT_FOR_INPUT:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",
UNDO_LIMIT:"Already at oldest change",REDO_LIMIT:"Already at newest change",NCHANGES:"%1 change(s); before #%2  %3",LINES_FEWER:"%1 fewer line(s)",LINES_MORE:"%1 more line(s)",LINES_YANKED:"%1 line(s) yanked",LINES_SHIFTED:"%1 line(s) %2ed %3 time(s)",NO_SHIFT:"No line to %1",SEARCH_HIT_BOTTOM:"search hit BOTTOM, continuing at TOP",SEARCH_HIT_TOP:"search hit TOP, continuing at BOTTOM",REPLACE:"%1 substitution(s) on %2 line(s)",VA_REC_START:"Recording Session ...",VA_REC_REPLAY:"Replaying Session ...",
VA_REC_END:"Session Ended"},m={E35:"No previous regular expression",E37:"No write since last change (add ! to override)",E481:"No range allowed",E492:"Not an editor command: %1",E486:"Pattern not found: %1",EX1:"Pattern Error( %1 )",EX2:"This pattern is causing infinite loop: %1",TODO:"%1 is not implemented yet",MISSING_FEATURE:'Sorry, I thought this command wasn\'t useful enough to implement. Please file a feature request titled "Implement %1" in github if you think this is important.'},k=new Audio("data:audio/ogg;base64,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");
g[1](3,"Message",function(e){return a(h,e,Array.prototype.slice.call(arguments,1))});g[1](3,"Error",function(e){return e+": "+a(m,e,Array.prototype.slice.call(arguments,1))});g[1](3,"Beep",function(){setTimeout(function(){k.pause();k.currentTime=0;k.play()},0)})})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var e=0;e<m;e++)for(var f=h[e],d=f.length,c=0;c<d;c++){var b=f[c];if(b[0]<=a&&a<=b[1]){a=f;break a}}a=[]}this.zb=a}var g=S("Components.Vim.Syntax"),h=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]],[[32,32],[9,9]]],m=h.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var e=this.zb,f=e.length;a=a.charCodeAt(0);for(var d=0;d<f;d++){var c=e[d];if(c[0]<=
a&&a<=c[1])return!0}return!1};g[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.Ma=this.ta=this.L=this.Q=-1;this.Qa=null}function g(a){this.N=a;this.ha={}}function h(d,b){if(!b)throw Error("Parent not found");var f=new a;f.Ma=b[2];f.Q=b[0];f.L=b[1];if(-1<b[3]){var q=d.find(b[3]);f.Qa=h(d,q)}return f}function m(a,b){for(var d=b.length,f=a.split("\n"),u=f[0],f=f[1],n=[],h=[],m=0,k=[],g=u.length,A=f.length,t=0;t<d;t++){var C=b.substr(t,A);if(b.substr(t,g)==u)n[m]=t,m++,t+=g-1;else if(C==f){C=t;if(0==m)h.push(C);else{var E=[];E[0]=n[--m];E[1]=C;E[2]=
m;E[3]=0<m?n[m-1]:-1;k.push(E)}t+=A-1}}h.length&&e.Info('Unmatched opening "'+u+'"@'+h.join(", "));0<m&&e.Info('Unmatched closing "'+f+'"@'+n.slice(0,m));this.Oa=k}var k=S("Components.Vim.Syntax"),e=U("System.Debug"),f=U("Components.Vim.Beep"),d=k[0]("Word");m.prototype.find=function(a,b){void 0==b&&(b=0);for(var d=this.Oa,f=d.length,e=0;e<f;e++){var n=d[e];if(n[b]==a)return n}return null};g.prototype.bracketAt=function(d){var b=this.N.content,f=1,q=null,e=b[d];switch(e){case "{":f=0;case "}":q=this.O("{\n}");
break;case "[":f=0;case "]":q=this.O("[\n]");break;case "(":f=0;case ")":q=this.O("(\n)");break;case "/":if("*"==b[d-1]){e="*/";d--;break}else if("*"==b[d+1]){e="/*";break}return new a;case "*":if("/"==b[d-1]){e="/*";d--;break}else if("/"==b[d+1]){e="*/";break}return new a;default:return new a}if(!q)switch(e){case "/*":f=0;case "*/":q=this.O("/*\n*/");break;default:return new a}b=q.find(d,f);q=h(q,b);q.ta=d;return q};g.prototype.bracketIn=function(d,b){var f="{[(".indexOf(d);0>f&&(f="}])".indexOf(d));
if(0>f)throw Error("Unsupported bracket: "+d);for(var q=this.O("{[("[f]+"\n"+"}])"[f]),e=q.Oa,n=e.length,m=null,f=0;f<n;f++){var k=e[f];k[0]<=b&&b<=k[1]&&(m&&m[2]<k[2]||!m)&&(m=k)}if(m){q=f=h(q,m);do q.Q++,q.L--;while(q=q.parent);return f}return new a};g.prototype.quoteIn=function(d){for(var b=this.N,r=b.cursor,q=r.c().lineNum,e=0,n=0;-1!=e&&n<q;n++)e=b.content.indexOf("\n",e+1);var m=b.content.indexOf("\n",e+1);0<q&&e++;q=e;if(b.content[r.aPos]==d){for(var h=[],e=0,n=q;n<m;n++)b.content[n]==d&&(h[e++]=
n);n=h.indexOf(r.aPos);if(0!=e%2&&n==e-1)return f(),new a;r.moveX(0==n%2?1:-1)}n=b.content.indexOf(d,r.aPos+1);b=b.content.lastIndexOf(d,r.aPos-1);if(q<=b&&n<m)return m=new a,m.Q=b+1,m.L=n-1,m.ta=d,m;f();return new a};g.prototype.O=function(a){if(this.ha[a])return this.ha[a];var b=new m(a,this.N.content);return this.ha[a]=b};g.prototype.reset=function(){this.ha={}};g.prototype.quoteAt=function(a){switch(this.N.content[a]){default:return{level:0,open:-1,close:-1}}};g.prototype.wordAt=function(f){var b=
this.N.content,e=b.length,q=f,m=f,n=new d(b[f]);if(0<f)for(;n.test(b[--q]););if(f<e)for(;n.test(b[++m]););f=new a;f.Q=0<q?q+1:0;f.L=m-1;return f};w(a.prototype,"parent",function(){return this.Qa});w(a.prototype,"open",function(){return this.Q});w(a.prototype,"close",function(){return this.L});w(a.prototype,"level",function(){return this.Ma});w(a.prototype,"selected",function(){return this.ta});k[1](2,"Analyzer",g);k[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,m){this.prev=null;this.cols=a;this.next=m;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=4;this.va="";for(var k=0;k<this.tabWidth;k++)this.va+=" ";m&&(m.prev=this)}var g=S("Components.Vim");U("System.Debug");U("System.utils.Perf.CountSubstr");a.prototype.Z=function(a,m,k){this.lineNum=k;if(void 0==a||""===a)this.lineNum=++k,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.Z(a,m,k+1);else{this.placeholder=!1;var e="",f=!1,d=0,c=0,b=this.tabWidth-
1;if(m){for(;d<this.cols-c*b;d++){var r=a[d];if(void 0===r)break;if("\n"==r){f=!0;d++;break}else"\t"==r&&c++;e+=r}f||d!=this.cols||"\n"!=a[d]||(d++,f=!0)}else for(f=!0;;d++){r=a[d];if(void 0===r)break;if("\n"==r){d++;break}else"\t"==r&&c++;d<this.cols-c*b&&(e+=r)}this.next&&(this.next.br=f,this.next.Z(a.substr(d),m,f?k+1:k));this.content=e}};a.prototype.toString=function(){var a=this.content.replace(/\t/g,this.va);return a.length<this.cols?a+" ":a||" "};w(a.prototype,"nextLine",function(){for(var a=
this,m=this.lineNum;(a=a.next)&&a.lineNum==m;);return a});w(a.prototype,"visualLines",function(){for(var a=[this],m=this;(m=m.next)&&!m.br;)a.push(m);return a});g[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");
(function(){function a(){this.U=[];this.pb=[];this.Va=this.La=this.f=0}var g=S("Components.Vim.State");a.prototype.undo=function(){var a=this.f-1;return-1!=a&&this.U.length?this.U[this.f=a]:null};a.prototype.redo=function(){var a=this.U[this.f];return a?(this.f++,a):null};a.prototype.save=function(){this.Va=this.f};a.prototype.record=function(a){this.U[this.f++]=a;this.pb[this.La++]=a;delete this.U[this.f];a.id=this.La};w(a.prototype,"changed",function(){return this.Va!=this.f});g[1](2,"Recorder",
a)})();BotanJS.define("Components.Vim.Actions.QUIT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Error");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=this.a;var k=a.Vim;if(a.rec.changed){a=h("E37");for(var k=this.a.feeder.firstBuffer.cols,e=a.length;e<k;e++)a+=" ";this.b=a}else return k.dispose(),!0};a.prototype.getMessage=function(){return this.b};g[1](2,"QUIT",
a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,m){this.a=a;this.qb=void 0==m?a.aPos:m;this.rb=this.Ua()}var g=S("Components.Vim.State");a.prototype.save=function(a,m,k){void 0==k&&(k=0);var e=this.a,f=e.feeder,d=this.qb-k,c=this.rb,b=this.Ua(),r=c;return function(){var q=f.content.substr(d,a);f.content=f.content.substring(0,d)+m+f.content.substring(d+a);a=m.length;m=q;e.PStart=r.e;e.PEnd=r.e+1;e.X=r.x;e.Y=r.y;e.pX=r.yb-1;f.panX=r.Bb;f.panY=r.Cb;f.pan();r=r==c?b:c}};a.prototype.Ua=function(){var a=this.a,a={e:a.PStart,
x:a.X,y:a.Y,yb:a.pX,Bb:a.feeder.panX,Cb:a.feeder.panY};0<a.x&&(--a.e,--a.x);return a};g[1](2,"Stator",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,m,k){if(void 0==a[m])return m;var e=0;return a[m].replace(/%\d+/g,function(){return k[e++]})}var g={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};S("Components.Vim.DateTime")[1](3,"String",function(h){return a(g,h,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(a,d){var c=a%10,b=a%100;if(1>=a)throw Error("Invalid number of Time units");return 2<=a&&4>=a?h(d[0],a):1==c&&11!=b?h(d[1],a):2<=c&&4>=c&&!(12<=b&&14>=b)?h(d[2],a):h(d[3],a)}var g=S("Components.Vim.DateTime"),h=g[0]("String"),m=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],k=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],e=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];g[1](3,"RelativeTime",function(f){var d=Math.round(.001*((new Date).getTime()-f.getTime()));if(31536E3<d)result=h("OverAYearAgo");else if(3952800<d)if(f=Math.round((d+1317600)/2635200),2<=f&&4>=f)result=h("XMonthsAgo_2To4",f);else if(5<=f&&12>=f)result=h("XMonthsAgo_5To12",f);else throw Error("Invalid number of Months");else if(2116800<=d)result=h("AboutAMonthAgo");else if(604800<=d)f=Math.round(d/604800),result=1<f?h("XWeeksAgo_2To4",f):h("AboutAWeekAgo");else{if(432E3<=d)switch(f.getDay()){case 1:f=
h("last Monday");break;case 2:f=h("last Tuesday");break;case 3:f=h("last Wednesday");break;case 4:f=h("last Thursday");break;case 5:f=h("last Friday");break;case 6:f=h("last Saturday");break;case 0:f=h("last Sunday");break;default:f=h("last Sunday")}else if(86400<=d)switch(f.getDay()){case 1:f=h("on Monday");break;case 2:f=h("on Tuesday");break;case 3:f=h("on Wednesday");break;case 4:f=h("on Thursday");break;case 5:f=h("on Friday");break;case 6:f=h("on Saturday");break;case 0:f=h("on Sunday");break;
default:f=h("on Sunday")}else f=7200<=d?a(Math.round(d/3600),m):3600<=d?h("AboutAnHourAgo"):120<=d?a(Math.round(d/60),k):60<=d?h("AboutAMinuteAgo"):a(1<d?d:2,e);result=f}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var g=S("Components.Vim.State"),h=U("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.Ka=a;this.vb=new Date;this.id=0};a.prototype.play=function(){this.Ka&&this.Ka()};w(a.prototype,"time",function(){return h(this.vb)});g[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.JOIN_LINES");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.State.Stator"),m=U("Components.Vim.State.Stack"),k=U("Components.Vim.Beep");U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f){a.preventDefault();var d=this.a,c=d.feeder,b,r,q,u;if(f)b=f.start;else{u=d.aPos;d.lineEnd(!0);q=new h(d);b=d.aPos;d.moveY(1);d.lineStart();
r=d.aPos;if(r<b)return d.moveTo(u),k(),!0;var n=c.content;u=c.content.substring(b,r);c.content=n.substring(0,b)+" "+n.substr(r)}c.pan();d.moveTo(b);c=new m;c.store(q.save(1,u));d.rec.record(c)};a.prototype.getMessage=function(){return this.b};g[1](2,"JOIN_LINES",a)})();BotanJS.define("Components.Vim.State.History");
(function(){function a(a){k[a]||(k[a]=[]);this.r=k[a];this.reset()}function g(a,f){var d=f.length;if(a.length<d)return!1;for(var c=0;c<d;c++)if(a[c]!=f[c])return!1;return!0}var h=S("Components.Vim.State"),m=U("System.Debug"),k={};a.prototype.push=function(a){var f;if(f=this.r.length)a:{f=this.r[this.r.length-1];for(var d=f.length<a.length?a.length:f.length,c=0;c<d;c++)if(f[c]!=a[c]){f=!1;break a}f=!0}f?m.Info("This is the previous command, skipping"):this.r.push(a)};a.prototype.prev=function(a){for(this.r.length<=
this.f&&this.reset();-1<this.f;){var f=this.r[this.f--];if(f&&g(f,a))return f.slice()}return null};a.prototype.next=function(a){0>this.f&&(this.f++,this.next(a));for(;this.f<this.r.length;){var f=this.r[this.f++];if(f&&g(f,a))return f.slice()}return null};a.prototype.reset=function(){this.f=this.r.length-1};h[1](2,"History",a)})();BotanJS.define("Components.Vim.Ex.Command");
(function(){function a(a,c){var b=this;if(!f[c])throw Error("Unsupport mode: "+c);this.a=a;this.Ya=a.Vim.statusBar;this.n=c;this.aa=new k(f[c]);this.g=[];this.p=null;this.xa="ExCommandBlinkCycle"+m.uuid;this.j=0;var r=a.feeder,q=!1,e=!1;this.J=function(){e=q=!0};h.perma(this.xa,function(){e?e=!1:q=!q;r.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))},600);this.hb=function(){for(var f="",c=b.g,r=b.j,e=c.length,m=0;m<e;m++){var u=c[m];q&&m==r&&(face=!0,u=a.face+u.substr(1));f+=u}q&&e<=r&&(f+=
a.face);return f};this.Ya.override=this.hb}var g=S("Components.Vim.Ex"),h=U("System.Cycle");U("System.Debug");var m=U("System.utils.Perf"),k=U("Components.Vim.State.History");U("Components.Vim.Message");var e=U("Components.Vim.Beep"),f={"/":m.uuid,":":m.uuid};a.prototype.dispose=function(){this.Ya.override=null;h.permaRemove(this.xa);this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){this.J();var f=null,b=!1;if(a.kMap("Tab"))f=
"^I";else if(!a.kMap("C-v"))if(a.kMap("BS")){if(1==this.j&&1<this.g.length)return!1;this.g.splice(--this.j,1);if(0==this.g.length)return a.cancel(),!0}else if(a.kMap("Del"))this.g.splice(this.j,1);else{if(a.kMap("Enter"))return this.kb(a),!0;if(a.kMap("Left"))1<this.j&&this.j--;else if(a.kMap("Right"))this.j<this.g.length&&this.j++;else if(b=a.kMap("Up")){this.p||(this.p=this.g);var r=this.aa.prev(this.p);r?(this.g=r,this.j=r.length):e()}else(b=a.kMap("Down"))?(r=this.aa.next(this.p))?(this.g=r,this.j=
r.length):this.p?(this.g=this.p,this.p=null):e():f=a.key}null!=f&&this.g.splice(this.j++,0,f);b||(this.aa.reset(),this.p&&(this.p=this.g));a.cancel();this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))}};a.prototype.kb=function(a){this.aa.push(this.g);var f="";switch(this.n){case "/":f="FIND";break;case ":":f="EDITOR_COMMAND"}var b=this.a;b.suppressEvent();this.a.openRunAction(f,a,this.g.slice());b.unsuppressEvent()};g[1](2,"Command",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,b){this.tb=a;this.Ca=!1;if("string"==typeof b)this.ba=b,this.oa=0,this.t=m(b),this.la=27==this.t;else if("number"==typeof b)this.ba=h(b),this.oa=0,this.t=b,this.la=27==this.t||1091==this.t||1243==this.ba;else{this.ka=b;if(";"==b.key||":"==b.key)c=b.keyCode;var d=this.ka.keyCode;this.la=27==d||b.ctrlKey&&(67==d||219==d);this.t=d+(b.shiftKey||b.getModifierState("CapsLock")?512:0)+(b.ctrlKey?1024:0)+(b.altKey?2048:0);this.oa=16==d||17==d||18==d;this.ba=b.key||h(this.t)}this.Fa=
1;this.A=null}function g(a){this.$a=a;this.Da=a.contentFeeder;this.K=this.Da.cursor;this.k=null}function h(a){switch(a){case 32:case 544:return" ";case 65:return"a";case 66:return"b";case 67:return"c";case 68:return"d";case 69:return"e";case 70:return"f";case 71:return"g";case 72:return"h";case 73:return"i";case 74:return"j";case 75:return"k";case 76:return"l";case 77:return"m";case 78:return"n";case 79:return"o";case 80:return"p";case 81:return"q";case 82:return"r";case 83:return"s";case 84:return"t";
case 85:return"u";case 86:return"v";case 87:return"w";case 88:return"x";case 89:return"y";case 90:return"z";case 49:return"1";case 50:return"2";case 51:return"3";case 52:return"4";case 53:return"5";case 54:return"6";case 55:return"7";case 56:return"8";case 57:return"9";case 48:return"0";case 219:return"[";case 221:return"]";case c:case 186:return";";case 222:return"'";case 188:return",";case 190:return".";case 191:return"/";case 220:return"\\";case 173:case 189:return"-";case 61:case 187:return"=";
case 561:return"!";case 562:return"@";case 563:return"#";case 564:return"$";case 565:return"%";case 566:return"^";case 567:return"&";case 568:return"*";case 569:return"(";case 560:return")";case 731:return"{";case 733:return"}";case 512+c:case 698:return":";case 734:return'"';case 700:return"<";case 702:return">";case 732:return"|";case 685:case 701:return"_";case 573:case 699:return"+";case 577:return"A";case 578:return"B";case 579:return"C";case 580:return"D";case 581:return"E";case 582:return"F";
case 583:return"G";case 584:return"H";case 585:return"I";case 586:return"J";case 587:return"K";case 588:return"L";case 589:return"M";case 590:return"N";case 591:return"O";case 592:return"P";case 593:return"Q";case 594:return"R";case 595:return"S";case 596:return"T";case 597:return"U";case 598:return"V";case 599:return"W";case 600:return"X";case 601:return"Y";case 602:return"Z";case 520:case 8:return"Backspace";case 27:return"Escape";case 46:return"Delete";case 512:return"Shift";case 2048:return"Alt";
case 1024:return"Control";case 13:return"Enter";case 9:return"Tab"}return"?"}function m(a){if(b[a])return b[a];var d=a.split("-"),f=d[0],c=0;if(2==d.length){var e=!0;switch(d[0]){case "C":c=1024;break;case "A":c=2048;break;case "S":c=512;break;default:e=!1}e&&(f=d[1])}switch(f){case "BS":d=c+8;break;case "Del":d=c+46;break;case "Enter":d=c+13;break;case "Tab":d=c+9;break;case "Escape":d=c+27;break;case "Up":d=c+38;break;case "Down":d=c+40;break;case "Left":d=c+37;break;case "Right":d=c+39;break;case "A":c=
512;case "a":d=c+65;break;case "B":c=512;case "b":d=c+66;break;case "C":c=512;case "c":d=c+67;break;case "D":c=512;case "d":d=c+68;break;case "E":c=512;case "e":d=c+69;break;case "F":c=512;case "f":d=c+70;break;case "G":c=512;case "g":d=c+71;break;case "H":c=512;case "h":d=c+72;break;case "I":c=512;case "i":d=c+73;break;case "J":c=512;case "j":d=c+74;break;case "K":c=512;case "k":d=c+75;break;case "L":c=512;case "l":d=c+76;break;case "M":c=512;case "m":d=c+77;break;case "N":c=512;case "n":d=c+78;
break;case "O":c=512;case "o":d=c+79;break;case "P":c=512;case "p":d=c+80;break;case "Q":c=512;case "q":d=c+81;break;case "R":c=512;case "r":d=c+82;break;case "S":c=512;case "s":d=c+83;break;case "T":c=512;case "t":d=c+84;break;case "U":c=512;case "u":d=c+85;break;case "V":c=512;case "v":d=c+86;break;case "W":c=512;case "w":d=c+87;break;case "X":c=512;case "x":d=c+88;break;case "Y":c=512;case "y":d=c+89;break;case "Z":c=512;case "z":d=c+90;break;case "!":c=512;case "1":d=c+49;break;case "@":c=512;
case "2":d=c+50;break;case "#":c=512;case "3":d=c+51;break;case "$":c=512;case "4":d=c+52;break;case "%":c=512;case "5":d=c+53;break;case "^":c=512;case "6":d=c+54;break;case "&":c=512;case "7":d=c+55;break;case "*":c=512;case "8":d=c+56;break;case "(":c=512;case "9":d=c+57;break;case ")":c=512;case "0":d=c+48;break;case "<":c=512;case ",":d=c+188;break;case ">":c=512;case ".":d=c+190;break;default:throw Error("Unsupport keys: "+a);}return b[a]=d}var k=S("Components.Vim"),e=U("System.Debug"),f=U("Components.Vim.Ex.Command"),
d=k[0]("Beep"),c=59,b={};g.prototype.d=function(a,b){this.i||(this.i=[]);if(b)this.i.push({keys:Array.prototype.slice.call(arguments,2),handler:b,bb:0});else{for(var c=a.keyCode,f=0;f<this.i.length;f++){var e=this.i[f],m=e.keys,k=m[e.bb++];if(-1==k||k==c){e.bb==m.length&&(this.i=null,e.handler(a));return}}this.i&&d();this.i=null}};g.prototype.fb=function(b){var e=this.K;switch(b.keyCode){case 577:e.lineEnd();e.moveX(1,!1,!0,!0);e.openAction("INSERT",b);break;case 73:0<e.X&&(e.moveX(-1,!0),e.moveX(1,
!0,!0,!0));e.openAction("INSERT",b);break;case 65:e.fixTab();e.moveX(1,!1,!0,!0);e.openAction("INSERT",b);break;case 585:e.lineStart(!0);e.openAction("INSERT",b);break;case 83:""!=e.c().content&&e.openRunAction("DELETE",b,e.aPos);e.openAction("INSERT",b);break;case 591:e.lineStart();e.openAction("INSERT",b);e.action.handler(new a(b.Db,"Enter"));e.moveY(-1);break;case 79:e.lineEnd(!0);e.openAction("INSERT",b);e.action.handler(new a(b.Db,"Enter"));break;case 85:e.openRunAction("UNDO",b);break;case 1106:e.openRunAction("REDO",
b);break;case 68:case 67:e.openAction("DELETE",b);break;case 89:e.openAction("YANK",b);break;case 80:e.suppressEvent(),e.moveX(1,!1,!0),e.unsuppressEvent();case 592:e.openRunAction("PUT",b);break;case 600:if(!this.$(-1))break;case 88:if(""==e.c().content){d();break}e.openRunAction("DELETE",b,e.aPos);break;case 586:e.openRunAction("JOIN_LINES",b);break;case 86:case 598:e.openAction("VISUAL",b);e.action.handler(b);break;case 512+c:case 698:this.k=new f(e,":");this.k.handler(b);break;case 700:case 702:e.openAction("SHIFT_LINES",
b)}};g.prototype.$=function(a,b){var c=this.K,f=c.X,e=c.Y;c.moveX(a,b,c.pSpace);return c.X==f&&c.Y==e?(d(),!1):!0};g.prototype.Aa=function(a){var b=this.K,c=this.Da,f=b.Y+c.panY;b.moveY(a);f!=b.Y+c.panY||0<a&&!c.EOF||d()};g.prototype.jb=function(a){if(this.na)a.preventDefault(),this.d(a);else{var b=this,d=!0;switch(a.keyCode){case 734:this.d(a,function(a){a.target.W.select(a.key);a.cancel();b.na=!1},-1);break;case 48:if(!this.i){d=!1;break}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:var c=
a.key,f=function(a){var d=a.ModKeys;switch(a.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c+=a.key,d=!0}d?(b.d(a,f,-1),a.cancel()):(a.Fa=Number(c),e.Info("Count is: "+c),b.na=!1)};this.d(a,f,-1);break;default:d=!1}(this.na=d)&&a.cancel()}};g.prototype.Ga=function(a){var b=a.keyCode;if(this.o&&!a.ModKeys)return this.d(a),this.o=!1,!0;var c=this.K,e=c.feeder,m=!0;switch(b){case 8:this.$(-1,!0);break;case 72:this.$(-a.count);break;case 76:this.$(a.count);break;
case 173:case 189:case 75:this.Aa(-a.count);break;case 13:case 74:this.Aa(a.count);break;case 1094:if(e.firstBuffer.nextLine.placeholder){d();break}e.pan(void 0,e.moreAt);e.softReset();c.moveY(-c.Y);break;case 1090:if(0==e.panY){d();break}e.pan(void 0,-e.moreAt);e.softReset();c.moveY(-c.Y);e.EOF||c.moveY(e.moreAt);break;case 1093:e.pan(void 0,1);e.softReset();c.moveY(0<c.Y?-1:0);c.moveX();break;case 1113:if(0==e.panY){d();break}e.pan(void 0,-1);e.softReset();c.moveY(c.Y==e.moreAt?0:1);c.moveX();break;
case 1092:e.pan(void 0,e.moreAt);e.softReset();c.moveY(0);break;case 1109:if(0==e.panY){d();break}e.pan(void 0,-e.moreAt);e.softReset();c.moveY(0);break;case 584:c.moveY(-c.Y);c.lineStart(!0);break;case 589:c.moveY(Math.floor(.5*e.moreAt)-c.Y);c.lineStart(!0);break;case 588:c.moveY(e.moreAt-c.Y);c.lineStart(!0);break;case 48:c.lineStart();break;case 566:c.lineStart(!0);break;case 564:c.lineEnd(c.pSpace);break;case 583:c.moveY(Number.MAX_VALUE);c.moveX(Number.MAX_VALUE,!0);break;case 565:var k=this.$a.contentAnalyzer,
b=k.bracketAt(c.aPos);if(-1==b.open){d();break}c.moveTo(b.selected==b.close?b.open:b.close);break;case 596:case 84:this.o=!0;this.d(a,function(b){var d=c.X;c.openRunAction("TO",a,b);c.X<d?c.moveX(1):d<c.X&&c.moveX(-1)},-1);break;case 582:case 70:this.o=!0;this.d(a,function(b){c.openRunAction("TO",a,b)},-1);break;case 87:case 599:case 66:case 578:case 69:case 581:c.openRunAction("WORD",a);break;case 73:if(!c.action){m=!1;break}k=this.$a.contentAnalyzer;this.o=!0;this.d(a,function(a){var b=k.wordAt(c.aPos);
a.A=b},87);var b=function(a){var b=k.bracketIn("(",c.aPos);a.A=b},e=function(a){var b=k.bracketIn("{",c.aPos);a.A=b},h=function(a){var b=k.bracketIn("[",c.aPos);a.A=b};this.d(a,b,560);this.d(a,b,569);this.d(a,h,219);this.d(a,h,221);this.d(a,e,731);this.d(a,e,733);this.d(a,function(a){var b=k.quoteIn("'",c.aPos);a.A=b},222);this.d(a,function(a){var b=k.quoteIn('"',c.aPos);a.A=b},734);break;case 71:this.o=!0;this.d(a,function(){c.moveY(-Number.MAX_VALUE);c.moveX(-Number.MAX_VALUE,!0)},71);this.d(a,
function(){c.moveX(c.c(!0).content.length+1)},74);this.d(a,function(){var a=c.c(!0).prev,b=c.c().lineNum;if(a)if(""!=a.content&&a.lineNum==b)c.moveX(-(a.content.length+1));else{if(c.moveY(-1),b=c.c().visualLines,1<b.length){for(var f=b.length-1,e=0,m=0;m<f;m++)e+=b[m].content.length;e+=Math.max(0,Math.floor(e/a.cols)-1);c.moveX(e)}}else c.lineStart(),d()},75);this.d(a,function(){c.openRunAction("PRINT_HEX",a)},56);this.d(a,function(){c.action&&d()},85);this.d(a,function(){c.action&&d()},597);break;
case 590:case 78:c.openRunAction("FIND",a);break;case 191:this.o=!0;this.k=new f(c,"/");this.k.handler(a);break;default:m=!1}return m};g.prototype.handler=function(a,b){if(!(2116==b.keyCode||112<b.keyCode&&123>=b.keyCode)){if(b.Escape){var c=!1;this.o=!1;this.i?(c=!0,this.i=null):this.k&&(c=!0,this.k.dispose(),this.k=null);if(c){d();return}}if(this.k){if(this.k.handler(b)){this.k.dispose();this.o=!1;this.k=null;return}if(b.canceled)return}c=this.K;if(!this.o&&(!c.action||c.action.allowMovement)&&
(this.jb(b),b.canceled))return;if(c.action)if(b.Escape)b.preventDefault(),c.closeAction();else{if(c.action.allowMovement){var f=!this.i;this.Ga(b);if(f&&this.i){b.preventDefault();return}}c.action.handler(b)&&c.closeAction()}else b.preventDefault(),this.Ga(b)||this.fb(b)}};w(a.prototype,"target",function(){return this.tb});w(a.prototype,"key",function(){return this.ba});w(a.prototype,"keyCode",function(){return this.t});w(a.prototype,"ModKeys",function(){return this.oa});w(a.prototype,"Escape",function(){return this.la});
w(a.prototype,"canceled",function(){return this.Ca});w(a.prototype,"range",function(){var a=this.A;return a&&-1==a.open&&-1==a.close?null:a});w(a.prototype,"count",function(){return this.Fa});a.prototype.kMap=function(a){return this.t==m(a)};a.prototype.cancel=function(){this.preventDefault();this.Ca=!0};a.prototype.preventDefault=function(){this.ka&&this.ka.preventDefault()};k[1](2,"Controls",g);k[1](2,"ActionEvent",a)})();BotanJS.define("Components.Vim.Actions.VA_REC");
(function(){function a(a){this.a=a;this.b=e("VA_REC_START");a.suppressEvent()}var g=S("Components.Vim.Actions"),h=U("System.Debug"),m=U("System.utils.EventKey"),k=U("Components.Vim.ActionEvent"),e=U("Components.Vim.Message"),f=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,c){if(1==c){for(var b=e("VA_REC_END"),r=e("WAIT_FOR_INPUT"),q=this.a.feeder.firstBuffer.cols,g=b.length;g<q;g++)b+=" ";this.b=b+"\n"+r}else{a.preventDefault();var n=this.a.Vim,v=n.stage,
s=n.index,x;x=f[s]?f[s]:f[s]={};if(x.cb){x.ja();var z=JSON.stringify(x.data),A=v.element;setTimeout(function(){n.display("Press Escape to conitnue edit\n===\n"+z,function(){A.selectionStart=34;A.selectionEnd=A.selectionStart+z.length})},1)}else{x.cb=!0;var t=x.data=[],C=Date.now();x.Ja=new m("KeyDown",function(a){var b=new k(v,a);-1==["Control","Alt","Shift"].indexOf(a.key)&&(a=Date.now(),t.push(a-C,b.keyCode),C=a)});x.ja=function(){h.Info("VA_REC: Disposing active session");delete f[s];v.removeEventListener(x.Ja);
n.removeEventListener("Dispose",x.ja)};n.addEventListener("Dispose",x.ja);v.addEventListener(x.Ja)}}};a.prototype.getMessage=function(){return this.b};g[1](2,"VA_REC",a)})();BotanJS.define("Components.Vim.Actions.VERSION");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var h=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=":version\nVim;Re - Vim; Reverse Engineered for textarea v1.0.1\n  + BotanJS - v1.0.0b";a+="\nProject home - https://github.com/tgckpg/BotanJS-vim";a+="\n  by \u659f\u914c\u9d6c\u5144 (penguin) - https://blog.astropenguin.net/";
a+="\n";for(var k=h("WAIT_FOR_INPUT"),e=this.a.feeder.firstBuffer.cols,f=a.length;f<e;f++)a+=" ";this.b=a+"\n"+k};a.prototype.getMessage=function(){return this.b};g[1](2,"VERSION",a)})();BotanJS.define("Components.Vim.Actions.TO");
(function(){function a(a){this.a=a;this.b="<TO COMMAND>";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Beep");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,k){k.preventDefault();var e=this.a,f=e.feeder,d=e.c().lineNum,c=0;for(i=0;-1!=c&&i<d;i++)c=f.content.indexOf("\n",c+1);var b=f.content.indexOf("\n",c+1);0<d&&c++;d=c;c=k.key;k.kMap("Tab")&&(c="\t");if(1<c.length)h();else{var r=-1,r=a.kMap("t")||a.kMap("f")?
f.content.indexOf(c,e.aPos+1):f.content.lastIndexOf(c,e.aPos-1);d<=r&&r<b?e.moveTo(r):h()}};a.prototype.getMessage=function(){return this.b};g[1](2,"TO",a)})();BotanJS.define("Components.Vim.Actions.PUT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions"),h=U("Components.Vim.State.Stator"),m=U("Components.Vim.State.Stack"),k=U("Components.Vim.Message"),e=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d,c){a.preventDefault();var b=this.a.Vim.W.get();if(!b)return!0;var r=this.a,q=r.feeder;c=b.newLine;if(1<a.count){for(var g=b,n=1;n<a.count;n++)g+=b;b=
g;g=null}var g=e(b,"\n"),n=b.length,v=a.kMap("P")?0:-1;c&&(r.moveY(-v),r.lineStart());a=new h(r);var s=r.aPos,x="";void 0==d?(q.content=q.content.substring(0,s)+b+q.content.substring(s),q.pan(),r.moveTo(0<g?s:s+n,!0)):(d++,x=q.content.substring(s,d),q.content=q.content.substring(0,s)+b+q.content.substring(d),q.pan(),r.moveTo(s+n,!0));d=new m;if(c){var z=a.save(n,x);d.store(function(){z();r.moveY(v)})}else d.store(a.save(n,x));r.rec.record(d);g&&(this.b=k("LINES_MORE",g));r.moveX(-1);return!0};a.prototype.getMessage=
function(){return this.b};g[1](2,"PUT",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(a,b){this.a=a;this.pa=0;this.h=a.aPos;this.Pa=this.a.feeder.panY;this.ya=b&&b.kMap("c");this.za=!1;this.ib=b;a.suppressEvent()}var g=S("Components.Vim.Actions"),h=U("System.Debug"),m=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),e=U("Components.Vim.Message"),f=U("Components.Vim.Beep"),d=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.unsuppressEvent();this.ya&&(this.za?(a.fixTab(),a.moveX(1,!1,
!0,!0)):(a.moveX(-1,!0),a.moveX(1,!0,!0,!0)),setTimeout(function(){a.openAction("INSERT",this.ib)},20))};a.prototype.handler=function(a,b,e){a.preventDefault();if(!a.ModKeys){var q=a.target.W,g=this.a,n=g.feeder;if(n.firstBuffer.next.placeholder&&2>n.content.length)return h.Info("Content is empty"),!0;var v=!1;if(void 0==b){v=!0;b=this.h;var s=g.aPos;if(this.h!=s)a.kMap("^")?b--:a.kMap("l")?g.moveX(-1):a.kMap("h")?b=s:a.kMap("j")?(e=!0,g.lineEnd(!0),b=g.aPos,g.moveY(-1),g.lineStart(),this.h=g.aPos):
a.kMap("k")?(e=!0,g.moveY(1),g.lineEnd(!0),b=g.aPos,g.moveY(-1),g.lineStart()):this.h<s&&(b=s,g.moveTo(this.h));else if(a.kMap("d"))e=!0,g.lineEnd(!0),b=g.aPos,g.lineStart();else if(this.ya&&a.kMap("c"))g.lineEnd(),b=g.aPos,g.lineStart(!0),this.za=!0;else if(a.range)b=a.range.close,g.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))b=g.aPos;else return f(),!0}}var s=n.content.slice(0,-1),x=b;a=g.aPos;a<x&&(x=g.aPos,a=b);void 0==s[b]&&x--;b=s.substring(x,a+1);q.change(b,e);this.pa=
d(b,"\n");n.content=s.substring(0,x)+s.substring(a+1)+"\n";n.pan(void 0,this.Pa<n.panY?this.Pa-n.panY:void 0);g.moveTo(x);a=new m(g,x);e=new k;var z=a.save(0,b);e.store(function(){z();g.moveX(1)});g.rec.record(e);return v}};a.prototype.getMessage=function(){return this.pa?e("LINES_FEWER",this.pa):""};g[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(a){this.a=a;this.h=a.aPos;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Message"),m=U("Components.Vim.Beep"),k=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f,d){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var c=a.target.W,b=this.a,r=!1;if(void 0==f){r=!0;f=this.h;var g=b.aPos;if(this.h!=g)a.kMap("^")?f--:a.kMap("l")?
b.moveX(-1):a.kMap("h")?f=g:a.kMap("j")?(d=!0,b.lineEnd(!0),f=b.aPos,b.moveY(-1),b.lineStart(),this.h=b.aPos):a.kMap("k")?(d=!0,b.moveY(1),b.lineEnd(!0),f=b.aPos,b.moveY(-1),b.lineStart()):this.h<g&&(f=g,b.moveTo(this.h));else if(a.kMap("y"))d=!0,b.lineEnd(!0),f=b.aPos,b.lineStart();else if(a.range)f=a.range.close,b.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))f=b.aPos;else return m(),!0}}g=f;a=b.aPos;a<g&&(g=b.aPos,a=f);b.moveTo(g);a=b.feeder.content.substring(g,a+1);c.yank(a,
d);if(d=k(a,"\n"))this.b=h("LINES_YANKED",d);return r}};a.prototype.getMessage=function(){return this.b};g[1](2,"YANK",a)})();BotanJS.define("Components.Vim.Actions.BUFFERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Dandelion"),m=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var k=U;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();h.tag("textarea");var f=this.a.Vim,d=k("Components.Vim.VimArea").Instances;a=":buffers";for(var c in d){var b=d[c],r=b.index+" ",g=b.contentFeeder.cursor,r=r+((b==f?"%a":"  ")+" "),r=r+
((g.rec.changed?"+":" ")+" "),r=r+('"'+b.stage.element.id+'" line '+(g.c().lineNum+1));a+="\n  "+r}f=m("WAIT_FOR_INPUT");d=this.a.feeder.firstBuffer.cols;for(c=a.length;c<d;c++)a+=" ";this.b=a+"\n"+f};a.prototype.getMessage=function(){return this.b};g[1](2,"BUFFERS",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.sb=new m(a);this.C=this.w=0;this.Ea=!1;this.G("",!0);a=this.a.feeder.firstBuffer.cols;for(var d=e("INSERT"),c=d.length;c<a;c++)d+=" ";this.b=d}var g=S("Components.Vim.Actions"),h=U("Components.Vim.State.Stack"),m=U("Components.Vim.State.Stator"),k=U("System.Debug"),e=U("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.Ea&&this.da();this.Ba()&&this.a.feeder.pan();this.b="";this.G("",!0);this.a.moveX(-1,!1,!1,!0);this.a.fixTab()};
a.prototype.G=function(a,d){if(d||!this.fa){if(this.fa){if(0==this.w&&0==this.q&&""===this.s)return;this.q<this.w&&(this.w=this.q);this.fa.store(this.sb.save(this.C,this.s,-this.w));this.a.rec.record(this.fa)}this.q=0;this.s="";this.fa=new h}this.q<this.w&&(this.C=0,this.w=this.q);this.q+=a.length;this.C+=a.length};a.prototype.ob=function(a){var d=this.a,c=d.feeder;if(a.kMap("BS")||a.kMap("S-BS")){this.da();if(0==d.X&&0==c.panY&&0==d.Y)return;a=d.aPos-1;this.q<=this.w&&(this.s=c.content.substr(a,
1)+this.s);d.moveX("\t"==c.content[a]?-c.firstBuffer.tabWidth:-1,!0,!0,!0);c.content=c.content.substring(0,a)+c.content.substring(a+1);c.pan();0<this.C&&this.C--;this.q--}else if(a.kMap("Del")||a.kMap("S-Del"))this.da(),a=d.aPos,this.s+=c.content.substr(a,1),c.content=c.content.substring(0,a)+c.content.substring(a+1),c.pan();else return;c.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var d;a:switch(d=a.key,d){case "Tab":d=
"\t";break a;case "Enter":d="\n";break a}if(1!=d.length)this.ob(a);else{a=this.a;var c=a.feeder,b=a.aPos,e="\n"!=c.content[b];c.content=c.content.substring(0,b)+d+c.content.substring(b);"\n"==d?(c.softReset(),c.pan(),a.moveY(1),a.lineStart(),this.gb(),this.Ea=e):(this.da(),c.pan(),a.moveX("\t"==d?c.firstBuffer.tabWidth:1,!1,!0,!0));c.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.G(d)}}};a.prototype.da=function(){var a=this.D;if(this.D){k.Info("Realize Indentation: "+a);l=a[1];for(var d=
a[0];d<l;d++)this.G(this.a.feeder.content[d]);this.s=a[2]+this.s;this.D=null}};a.prototype.gb=function(){for(var a=this.D,d=this.Ba(),c=this.a,b=c.feeder,e=c.aPos,m=b.content.lastIndexOf("\n",e-2),g=b.content.substring(m+1,e-1)||d;""==g&&0<m;)g=m,m=b.content.lastIndexOf("\n",g-2),g=b.content.substring(m+1,g-1);a=d?a[2]:"";for(d=e;-1!="\t ".indexOf(b.content[d]);d++)a+=b.content[d];for(m=0;-1!="\t ".indexOf(g[m]);m++);g&&(b.content=b.content.substring(0,e)+g.substr(0,m)+b.content.substring(d),b.softReset(),
b.pan(),c.moveX(m,!1,!0),c=[],c[0]=e,c[1]=e+m,c[2]=a,this.D=c,k.Info("Phantom indent: "+c))};a.prototype.Ba=function(){var a=this.D;if(!a)return"";k.Info("Erase phantom indent: "+a);var d=this.a.feeder,c=d.content.substring(a[0],a[1]);d.content=d.content.substring(0,a[0])+d.content.substring(a[1]);this.D=null;return c};a.prototype.getMessage=function(){return this.b};g[1](2,"INSERT",a)})();BotanJS.define("Components.Vim.Actions.UNDO");
(function(){function a(a){this.a=a;this.v="UNDO COMMAND"}var g=S("Components.Vim.Actions"),h=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.v=h("NCHANGES","<TODO>",a.id,a.time)):this.v=h("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.v};g[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var g=S("Components.Vim.Actions");U("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var g=a.length,k=[],e=0;e<g;e++)k[e]="\n"==a[e]?"a":a.charCodeAt(e).toString(16),1==k[e].length?k[e]="0"+k[e]:0==k[e].length&&(k[e]="00");this.b=k.join(" ")};a.prototype.getMessage=function(){return this.b};g[1](2,"PRINT_HEX",a)})();BotanJS.define("Components.Vim.Actions.WRITE");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Message"),m=U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var e=this.a;a=e.Vim;a.content=e.feeder.content.slice(0,-1);a=h("WRITE",a.stage.element.id,m(a.content,"\n"),a.content.length);e.rec.save();for(var e=this.a.feeder.firstBuffer.cols,f=a.length;f<e;f++)a+=" ";
this.b=a};a.prototype.getMessage=function(){return this.b};g[1](2,"WRITE",a)})();BotanJS.define("Components.Vim.Actions.WORD");
(function(){function a(a){this.a=a;this.b="<WORD COMMAND>";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var h=U("Components.Vim.Beep");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var g=this.a,e=g.feeder,f=g.Vim.contentAnalyzer,d=g.aPos;if(a.kMap("w")||a.kMap("W")){if(void 0==e.content[d+2]){h();return}var c=f.wordAt(d);if(-1!=c.open){for(d=c.close+1;-1!=" \t\n".indexOf(e.content[d]);)d++;void 0==e.content[d]&&
d--}}if(a.kMap("e")||a.kMap("E")){if(void 0==e.content[d+2]){h();return}for(d++;-1!=" \t\n".indexOf(e.content[d]);)d++;void 0==e.content[d]?d--:(c=f.wordAt(d),-1!=c.open&&(d=c.close))}if(a.kMap("b")||a.kMap("B")){if(0==d){h();return}for(d--;-1!=" \t".indexOf(e.content[d]);)d--; -1==d?d=0:(c=f.wordAt(d),-1!=c.open&&(d=c.open),-1!=" \t".indexOf(e.content[d])&&d++)}g.moveTo(d)};a.prototype.getMessage=function(){return this.b};g[1](2,"WORD",a)})();BotanJS.define("Components.Vim.Actions.SHIFT_LINES");
(function(){function a(a,b){this.a=a;this.h=a.aPos;this.b="<LINE_SHIFT>";this.Wa=a.c().lineNum;this.Na=b.count-1;h.Info("Open shift: "+this.Na+" line(s) from the cursor");this.Ia=b.kMap(">")?1:-1;h.Info("Direction is: "+(1==this.Ia?">":"<"));a.suppressEvent()}var g=S("Components.Vim.Actions"),h=U("System.Debug"),m=U("Components.Vim.Beep"),k=U("Components.Vim.State.Stator"),e=U("Components.Vim.State.Stack");U("Components.Vim.Error");var f=U("Components.Vim.Message"),d=U("System.utils.Perf.CountSubstr");
a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var g=this.a,q=g.feeder,u=!1,n=this.Ia,v=this.Wa,s=this.Na,x=1;1<a.count&&(s+=a.count-1);var z=v;if(void 0==b){u=!0;b=this.h;var A=g.aPos;if(this.h!=A){z=v=0;s&&(A<b?v-=s-1:z+=s-1,console.log(v,z));A<b&&(b+=A,A=b-A,b-=A);for(var t=0;t<A;t++)"\n"==q.content[t]&&(z++,t<b&&v++)}else if(a.range){b=a.range.close;v=1;z=-1;for(t=0;t<b;t++)"\n"==
q.content[t]&&(z++,t<a.range.open&&v++);-1==z&&(v=z=0);z<v&&(z=--v);x=a.count}else if(!(0<n&&(a.kMap(">")||a.kMap("l"))||0>n&&(a.kMap("<")||a.kMap("h"))))return m(),!0}else{for(t=v=0;t<b;t++)"\n"==q.content[t]&&v++;z=this.Wa;x=a.count}z<v&&(v+=z,z=v-z,v-=z);var A=q.content.slice(0,-1),C=A.match(/^[\t ]+/gm),E="\t",H=q.firstBuffer.tabWidth;if(C){var I=C.length-1;if(1<I){h.Info("Guessing the tabstop:");for(var G=s=0,H=[],t=0;t<I;t++){var B=C[t],D=C[t+1],s=s+d(B,"\t"),G=G+d(B," "),B=D.length-B.length;
0!=B&&(B=0>B?-B:B,H[B]||(H[B]=0),H[B]++)}I=C=0;for(t in H)t=Number(t),B=H[t],C<B&&(C=B,I=t);G/=I;if(s<G)for(E="",t=0;t<I;t++)E+=" ";H=I;h.Info("\tTab count: "+s);h.Info("\tSpace count: "+G);h.Info("\ti.e. indent using "+JSON.stringify(E))}else h.Info("Not enough tabs to determine the tabstop, using default")}h.Info("Start: "+v,"End: "+z);var G="",C=0,I=!1,J=0;q.content="";s=0;B="";for(t=0;t<x;t++)B+=E;for(E=t=0;0<=t;t=A.indexOf("\n",t),E++)if(t++,!(E<v)){I||(I=!0,q.content=A.substring(0,t-1),J=q.content.length);
if(z<E)break;D=A.indexOf("\n",t);D=~D?A.substring(1<t?t:t-1,D):A.substring(1<t?t:t-1);1<t&&(q.content+="\n",G+="\n",C++);G+=D;if(""!==D){if(0<n)D=B+D;else{for(var T=0,K=0;T<x;T++){var Q=D[K];if(" "==Q)for(Q=H+K++;K<Q&&~"\t ".indexOf(D[K]);K++);else if("\t"==Q)K++;else break}D=D.substring(K)}q.content+=D;C+=D.length;s++}}v=q.content.length;q.content+="\n";~t&&(q.content+=A.substring(t)+"\n");q.pan();g.moveTo(v);t=new k(g,J);v=new e;for(J++;~"\t ".indexOf(q.content[J]);J++);var V=t.save(C,G);v.store(function(){V();
g.moveTo(J);g.lineStart(!0)});g.moveTo(J);g.rec.record(v);this.b=s?f("LINES_SHIFTED",s,0>n?"<":">",x):f("NO_SHIFT",0>n?"<":">");return u}};a.prototype.getMessage=function(){return this.b};g[1](2,"SHIFT_LINES",a)})();BotanJS.define("Components.Vim.Actions.REDO");
(function(){function a(a){this.a=a;this.v="REDO COMMAND"}var g=S("Components.Vim.Actions"),h=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.v=h("NCHANGES","<TODO>",a.id,a.time)):this.v=h("REDO_LIMIT")};a.prototype.getMessage=function(){return this.v};g[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.FIND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}function g(a){for(var d="",c=a.length,b=1;b<c;b++)switch(a[b]){case "^I":d+="\t";break;case "\\":var e=a[++b];if(-1!="nrts.[]()^".indexOf(e))d+="\\"+e;else throw Error('Missing token impl: "'+e+'"');break;default:d+=a[b]}return new RegExp("("+d+")","gm")}var h=S("Components.Vim.Actions");U("System.Debug");var m=U("Components.Vim.Error"),k=U("Components.Vim.Message"),e=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=
function(a,d){a.preventDefault();if(d){if(2>d.length){if(1>e.length)return this.b=m("E35"),!0;d=e}e=d}if(1>e.length)return this.b=m("E35"),!0;var c;try{c=g(e)}catch(b){return this.b=m("EX1",b.message),!0}var r=this.a.feeder.content,h=this.a;d=h.aPos;for(var u,n,v,s=[],x;null!==(u=c.exec(r));){void 0==v&&(v=u.index);if(x==u.index)return this.b=m("EX2",e.slice(1).join("")),!0;if(d<u.index){n=u.index;break}s.push(u.index);x=u.index}this.b=e.join("");if(a.kMap("N")){if(n=s[s.length-2],void 0==n)for(this.b=
k("SEARCH_HIT_TOP");null!==(u=c.exec(r));)n=u.index}else void 0!=v&&void 0==n&&(n=v,this.b=k("SEARCH_HIT_BOTTOM"));void 0==n?this.b=m("E486",e.slice(1).join("")):h.moveTo(n)};a.prototype.getMessage=function(){return this.b};F(a,"Pattern",g);h[1](2,"FIND",a)})();BotanJS.define("Components.Vim.Actions.REPLACE");
(function(){function a(a){this.a=a;this.H=this.b="";this.Sa=0;this.ra=this.ra.bind(this);this.qa=0;this.sa=[];a.suppressEvent()}function g(a){for(var b="",d=a.length,e=[""],f=1;f<d;f++)switch(a[f]){case "^I":b+="\t";break;case "\\":f++;var g=a[f];if(-1!="$nrt\\".indexOf(g)){b+=JSON.parse('"\\'+g+'"');break}if(-1!="012345678".indexOf(g))e.push(b.length),b+=g;else{if("9"==g)throw Error("Back ref 9 is reserved for back ref 0");throw Error('Missing token impl: "'+tok+'"');}break;default:b+=a[f]}e[0]=
b;return e}var h=S("Components.Vim.Actions"),m=U("System.Debug"),k=U("Components.Vim.State.Stack"),e=U("Components.Vim.Error"),f=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var d=h[0]("FIND");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();var k,h;try{var u=b.indexOf("/",0),n=b.indexOf("/",u+1);if(-1==u)return this.b=e("MISSING_FEATURE","REPLACE %s"),!0;if(-1==n)k=d.Pattern(b),h=b;else{h=b.slice(u,n);k=d.Pattern(h);var v=
b.indexOf("/",n+1);this.H=-1==v?g(b.slice(n)):g(b.slice(n,v));this.Sa=this.H[0].length}}catch(s){return this.b=e("EX1",s.message),!0}m.Info("Replace: "+k+", [ "+this.H+" ]");u=this.a.feeder;k=u.content.slice(0,-1).replace(k,this.ra)+"\n";n=this.sa.length;n||(this.b=e("E486",h.join("")));u.content=k;this.b=f("REPLACE",n,"<TODO>");this.G();u.pan();u.softReset();return!0};a.prototype.ra=function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1,-2),d=this.qa+arguments[arguments.length-
2],e="",f=this.H[0],g=0;g<this.Sa;g++)var k=this.H.indexOf(g,1),e=-1==k?e+f[g]:e+b[f[this.H[k]]];b=e.length;this.qa+=b-a.length;f=[];f[0]=a;f[1]=d;f[2]=b;this.sa.push(f);return e};a.prototype.G=function(){var a=new k,b=this.sa,d=b.length,e=this.a,f=e.feeder;a.store(function(){for(var a=f.content,c="",g=0,k=-1,m=0;m<d;m++){var h=b[m],t=h[1],C=h[2],E=h[0],H=E.length,c=c+(a.substring(g,t)+E),g=h[1]+C;h[0]=a.substr(t,C);h[1]=c.length-H;h[2]=H;-1==k&&(k=t)}c+=a.substring(g);f.content=c;e.moveTo(k);f.pan()});
e.rec.record(a)};a.prototype.getMessage=function(){return this.b};h[1](2,"REPLACE",a)})();BotanJS.define("Components.Vim.Actions.REGISTERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var h=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var g=a.target.W;a=":register\n"+h("REGISTERS");for(var e=0,f='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[e];void 0!=f;e++,f='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[e]){var d=g.get(f);d&&(a+='\n"'+f+"   "+d.toString().replace("\t",
"^I").replace("\n","^J"))}g=h("WAIT_FOR_INPUT");f=this.a.feeder.firstBuffer.cols;for(e=a.length;e<f;e++)a+=" ";this.b=a+"\n"+g};a.prototype.getMessage=function(){return this.b};g[1](2,"REGISTERS",a)})();BotanJS.define("Components.Vim.Actions.EDITOR_COMMAND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions"),h=U("System.Debug"),m=U("Components.Vim.Error");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,e){a.preventDefault();var f=1,d="",c=[];if(-1!=".$%".indexOf(e[f]))d=e[f++];else for(;-1!="0123456789".indexOf(e[f]);f++)d+=e[f];var b="";if(-1!="/?".indexOf(e[f]))b=e[f];else for(var r=/\w/g,q=e[f];q=e[f];f++)if(q.match(r))b+=q;else break;r=!1;switch(b){case "s":case "su":case "substitute":r=
!0;c[1]="REPLACE";break;case "/":r=!0;c[1]="FIND";break;case "buffers":case "ls":c[1]="BUFFERS";break;case "w":case "write":c[1]="WRITE";break;case "q":case "quit":c[1]="QUIT";break;case "register":case "registers":c[1]="REGISTERS";break;case "ver":case "version":c[1]="VERSION";break;case "h":case "help":c[1]="HELP";break;case "varec":c[1]="VA_REC"}""!==d&&(r?c[0]=d:c[3]=m("E481"));c[2]=e.slice(f);if(c[3])return this.b=c[3],!0;if(!c[1])return this.b=m("E492",e.slice(1).join("")),!0;try{g[0](c[1])}catch(u){return this.b=
m("TODO",c[1]),!0}try{this.a.openRunAction(c[1],a,c[2],c[0]),this.b=this.a.message}catch(n){h.Error(n)}return!0};a.prototype.getMessage=function(){return this.b};g[1](2,"EDITOR_COMMAND",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.Ta(a);this.b="";a.blink=!1;a.pSpace=!0}function g(a,d){if(0==d)return 0;for(var c=a.feeder,e=0,f=-1,g=c.content.indexOf("\n");0<=g&&!(f=g,e++,d<=e);g=c.content.indexOf("\n",g+1));c.EOF&&(g=f);c=c.content[g+1];void 0!=c&&"\n"!=c&&g++;return g}var h=S("Components.Vim.Actions"),m=U("System.Debug"),k=U("Components.Vim.Message"),e=h[0]("YANK"),f=h[0]("DELETE"),d=h[0]("SHIFT_LINES"),c=h[0]("PUT");a.prototype.Ta=function(a){this.a=a;var d={lineNum:a.c().lineNum,X:a.X,aPos:a.aPos,
Ab:a.PStart};d.xb=d.aPos-a.aX;a.suppressEvent();a.lineEnd(!0);d.wb=a.aPos;a.moveTo(d.aPos);a.unsuppressEvent();this.Xa=d};a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.blink=!0;a.pSpace=!1;a.updatePosition();a.feeder.wrap&&0<a.X&&(a.suppressEvent(),a.moveX(-1),a.moveX(1),a.unsuppressEvent())};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var h=this.a,q=h.feeder,u=null,n=!1;if(a.kMap("y"))u=new e(h);else if(a.kMap("d"))u=new f(h);else if(a.kMap("p"))u=
new c(h);else if(a.kMap("V")){if(1==this.n)return!0;n=!0;this.n=1;this.b=k("VISLINE")}else if(a.kMap("<")||a.kMap(">"))u=new d(h,a);else if(a.kMap("v")){if(0==this.n)return!0;n=!0;this.n=0;this.b=k("VISUAL");h.updatePosition()}n&&q.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));if(-1==this.n)return m.Error(Error("Mode is undefined")),!0;n=this.Xa;if(u){h.suppressEvent();if(q=1==this.n)n.aPos<h.aPos?(h.lineEnd(!0),n.aPos=n.xb):(h.lineStart(),n.aPos=n.wb);var v=~[f,c].indexOf(u.constructor);
if(v&&n.aPos<h.aPos){var s=h.aPos;h.moveTo(n.aPos,!0);n.aPos=s}u.handler(a,n.aPos,q);v||h.moveTo(n.aPos);this.b=u.getMessage();u.dispose();h.unsuppressEvent();n.Ab=h.PStart;return!0}a.range&&(h.suppressEvent(),a=a.range,h.aPos==n.aPos&&(h.moveTo(a.open,!0,!1,!0),this.Ta(h),n=this.Xa),h.unsuppressEvent(),h.moveTo(a.close,!0,!1,!0));s=h.aPos;u=q.firstBuffer;a=u.lineNum;var x=g(h,a),z=g(h,a+q.moreAt+1)-1;m.Info("Min aPos: "+x,"Max aPos: "+z);a=n.X;v=h.PStart;if(n.aPos<x)a=0,1==this.n&&(h.suppressEvent(),
h.lineEnd(!0),v=h.PStart,h.moveTo(s,!0),h.unsuppressEvent());else if(z<n.aPos){a=-2;n=0;do{if(u.placeholder)break;n<=q.moreAt&&(a+=u.toString().length+1);n++}while(u=u.next)}else{q=n.lineNum;if(1==this.n)h.suppressEvent(),a=0,s<n.aPos?(a=-1,q++,h.lineStart(),v=h.PStart):n.aPos<s?(h.lineEnd(!0),v=h.PStart):(h.lineStart(),v=h.PStart,h.lineEnd(!0),a=h.PStart,q=u.lineNum),h.moveTo(s,!0),h.unsuppressEvent();else if(0==this.n&&s==n.aPos)return;do{if(u.lineNum==q||u.placeholder)break;a+=u.toString().length+
1}while(u=u.next)}n=a;q=v;u=q-n;0<=u?q+=1:0>u&&(n+=u,q=a+1);h.PStart=n;h.PEnd=q}};a.prototype.getMessage=function(){return this.b};h[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new k;this.action=null;this.blink=!0;this.pSpace=!1;this.P=this.ga=0}function g(a,c){var b=a.c(),e=a.Y+c,f=a.Y;b||(b=a.feeder.firstBuffer,f=0,e=c);for(b!=a.feeder.firstBuffer&&f--;f<e&&!b.placeholder;b=b.nextLine)b.br&&f++;return f}var h=S("Components.Vim"),m=U("System.Debug"),k=U("Components.Vim.State.Recorder"),e=U("Components.Vim.Actions.*"),f=U("System.utils.Perf.CountSubstr");
a.prototype.Vim;a.prototype.moveTo=function(a,c,b){var e=this.feeder.content,f=this.c(),g=f.lineNum;f.placeholder&&(this.Y=g=0);for(var h=0,k=0,m=e.indexOf("\n");0<=m&&!(a<=m);m=e.indexOf("\n",m))k=m,m++,h++;e=h-g;g=a<k?k-a:a-k;for(m=g-f.content.length;0<m;){g++;f=f.next;if(!f||f.lineNum!=h)break;m-=f.content.length}e&&this.moveY(e);0<this.c().lineNum&&k<=a&&g--;this.moveX(-Number.MAX_VALUE,!1,!1,!0);this.moveX(g,!1,c,b)};a.prototype.moveX=function(a,c,b,e){var g=this.pX,h=Boolean(a);0<this.P&&(0<
a&&b&&(a+=this.P),this.P=0);h&&(g=this.X+a);a||(a=1);var k=this.feeder;if(c&&0>g&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),this.lineEnd(b);else{var m=this.c(),s=m.tabWidth-1,x=this.rawLine,z=m.visualLines.join("\n"),A=z.length,t=0,C=!0;1<A&&(t=(C=0<(x.length+f(x,"\t")*s)%m.cols)?b?A-1:A-2:b?A:A-1);if(e){if(c&&0<a&&z.length-1<=g){this.moveY(1);this.X=0;this.updatePosition();return}}else{if(c&&"\t"==m.content[0]&&g<s){this.moveY(-1);this.lineEnd(b);return}c=e=this.aX;0>a?("\t"==x[e]&&(g-=s,0>g&&
(g=s)),e=f(x.substring(e+a,c),"\t")-1,0<e&&(g-=e*s)):h?(m="\n"==z[g]?1:0,0==e&&(g=a,"\t"==x[0]&&(g+=s)),c+=a,e=f(x.substring(e+1,c+1),"\t"),1<e&&"\t"==x[c]&&e--,g+=e*s+m,a=1):(g+=f(x.substring(0,g+a),"\t")*s,g+=Math.floor(g/m.cols),1<a&&(g+=a-1))}s=z[g];(A=void 0==s||A==g+1&&" "==s)?(g=0<g?t:0,0>a&&0<g&&(A=!1,g+=a)):"\n"==s&&(g+=a);k.wrap&&A&&!C&&b&&(this.P=1);this.X=g;h&&(this.pX=this.aX,this.updatePosition())}};a.prototype.fixTab=function(){this.moveX(1,!1,!0);this.moveX(-1)};a.prototype.lineStart=
function(a){this.pX=a?(a=this.rawLine.match(/^[ \t]+/g))?a[0].length:0:0;this.moveX();this.updatePosition()};a.prototype.lineEnd=function(a){this.moveX(Number.MAX_VALUE,!1,a,!0)};a.prototype.updatePosition=function(){var a=0,c=0,b=this.feeder.lineBuffers[0];a:for(;b&&c<this.Y;c++)for(;b;){if(b.next&&b.next.placeholder)break a;a+=b.toString().length+1;if((b=b.next)&&b.br)break}this.PStart=a=this.X+a+this.P;this.PEnd=a+1;this.I()};a.prototype.I=function(){0<this.ga?m.Info("Event suppressed, suppression level is: "+
this.ga):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=function(a){var c=this.Y+a,b=this.feeder,e;if(0>c)b.pan(void 0,c),this.Y=0,this.moveX(),this.updatePosition(),b.softReset();else if(!b.EOF&&b.moreAt<c){b=this.feeder;if(b.linesTotal<c){for(;!b.EOF;)b.pan(void 0,1);a=g(this,a)}else{e=b.lastBuffer.lineNum;var c=c-b.moreAt,f=this.c().lineNum;b.EOF||b.pan(void 0,c);for(c=f+a;!b.EOF&&(b.lastBuffer.lineNum==e||b.lastBuffer.lineNum<c);)b.pan(void 0,1);this.Y=
0;for(e=this.c();e&&e.lineNum!=c&&!e.placeholder;this.Y++,e=this.c());a=this.Y;b.EOF||b.lastBuffer.next.lineNum!=e.lineNum||a--}this.Y=a;this.moveX();this.updatePosition();b.softReset()}else{if(0<a){e=this.c();if(e.nextLine.placeholder)return;c=g(this,a)}this.Y=c;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a,c){this.action&&this.action.dispose();m.Info("openAction: "+a);this.action=new e[a](this,c);this.F=null;this.I()};a.prototype.closeAction=function(){this.action&&(this.action.dispose(),
this.F=this.action.getMessage(),this.action=null,m.Info("closeAction: "+this.F),this.Vim.contentAnalyzer.reset(),this.I())};a.prototype.openRunAction=function(a,c,b,f,g,h,k){m.Info("OpenRunAction: "+a);a=new e[a](this);a.handler(c,b,f,g,h,k);this.F=a.getMessage();a.dispose();this.Vim.contentAnalyzer.reset();this.I()};a.prototype.suppressEvent=function(){++this.ga};a.prototype.unsuppressEvent=function(){--this.ga};a.prototype.c=function(a){for(var c=this.feeder,b=c.firstBuffer,c=c.lastBuffer.next,
e=0;b!=c;b=b.next)if(b.br&&e++,this.Y==e){if(a)for(a=this.aX+1;0<(a-=b.content.length)&&b.next;)b=b.next;return b}return null};w(a.prototype,"rawLine",function(){for(var a=this.feeder.content,c=this.c().lineNum-1,b=a.indexOf("\n"),e=0;0<=b&&c!=e;b=a.indexOf("\n",b),e++)b++;0==e&&-1==b&&(b=0);return a.substring(b+1,a.indexOf("\n",b+1))});w(a.prototype,"aX",function(){var a=this.X,c=0;if(this.feeder.wrap){var b=this.c().visualLines,e=a,g;for(g in b){var h=b[g],k=h.content.length,m=h.toString().length,
a=a-(m+1);if(0<=a)c+=k,e-=1+f(h.content,"\t")*(h.tabWidth-1);else if(0>a){a+=m+1;b=this.rawLine.substr(c);k=0;"\t"==b[0]&&(a-=h.tabWidth-1,e-=h.tabWidth-1);for(g=1;k<a&&g<b.length;g++)"\t"==b[g]&&(a-=h.tabWidth-1,e-=h.tabWidth-1),k++;c+=k;c<e&&(c=e);break}}}else return this.X;return c});w(a.prototype,"aPos",function(){var a=this.feeder,c=this.c().lineNum,b=0;if(0<c){b=a.content.indexOf("\n");for(i=1;-1!=b&&i<c;i++)b=a.content.indexOf("\n",b+1);a.wrap&&b++}return b+=this.aX});w(a.prototype,"face",
function(){return"\u2588"});w(a.prototype,"message",function(){if(this.F){var a=this.F;this.F=null;return a}return this.action&&this.action.getMessage()});w(a.prototype,"position",function(){return{start:this.PStart,end:this.PEnd}});h[1](2,"Cursor",a)})();BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,f){var d=[];d[a]=new h(f);for(var c=a-1;0<=c;c--)d[c]=new h(f,d[c+1]);this.lineBuffers=d;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new m(this);this.dispatcher=new L;this.M=null;this.ca=-1;this.R=a}var g=S("Components.Vim");U("System.Debug");var h=g[0]("LineBuffer"),m=g[0]("Cursor"),k=U("System.utils.Perf.CountSubstr");a.prototype.init=function(a,f){this.content=a;this.setWrap(f);this.firstBuffer.Z(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var f=this,d=a?function(){return!0}:function(a){return!a.placeholder};this.mb=function(a,b){for(var e=(void 0==a?"":a)+"",g=!1,h=0;a&&h<b&&(a=a.next)&&d(a);h++)g||a.br&&b<h+a.visualLines.length?(g||(f.M=a),g=!0,e+="\n@"):e+="\n"+a;return e};this.nb=function(){for(var a=f.lineBuffers[f.lb],b=f.Ra+1,e=0;a&&e<b&&(a=a.next)&&d(a);e++)if(a.br&&b<e+a.visualLines.length){f.M=a;break}}};a.prototype.render=function(a,f){var d=this.lineBuffers;
if(void 0==a)a=0;else if(this.R<a)return"";if(void 0==f||this.R-a<f)f=this.rows-a;if(0==f)return"";this.lb=a;this.Ra=f-1;return this.mb(d[a],this.Ra)};a.prototype.pan=function(a,f){void 0==a&&(a=0);void 0==f&&(f=0);var d=this.panX+a,c=this.panY+f,b=-1,g=0;0>c&&(c=0);var h=this.content.slice(0,-1);if(0<c)for(b=h.indexOf("\n"),g=1;-1!=b&&g<c;g++){var k=h.indexOf("\n",b+1);if(-1==k){c=g;break}b=k}this.firstBuffer.Z(this.content.substr(b+1),this.wrap,g);this.panX=d;this.panY=c};a.prototype.softReset=
function(){this.ca=-1;this.M=null;this.nb()};w(a.prototype,"linesTotal",function(){return k(this.content,"\n")});w(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});w(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.R-1]});w(a.prototype,"EOF",function(){return this.lineBuffers[this.R].placeholder});w(a.prototype,"moreAt",function(){if(0<this.ca)return this.ca;var a=this.firstBuffer;if(a.placeholder)return 0;var f=0;do{if(this.M==a)break;a.br&&f++}while(a=a.next);void 0==
a&&f--;return this.ca=f});w(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,f=this.cursor.c(),d="",c=0,b=this.cursor.aPos,g=b-a;do"\t"==this.content[g+1]&&c++,g++;while(g<b);c&&(d="-"+(a+c*(f.tabWidth-1)));return f.lineNum+1+","+a+d});w(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY)a=this.EOF?"BOTTOM":Math.floor(this.panY/(this.linesTotal-(this.R-1))*100)+"%";else if(this.M||!this.EOF)a="TOP";return a});w(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;
var f=0;do f++;while((a=a.next)&&!a.placeholder);return f});g[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");
(function(){function a(a){this.cols=a;this.wa={};this.override=null}var g=S("Components.Vim");U("System.Debug");g[0]("LineFeeder");a.prototype.stamp=function(a,g){this.wa[a]=g};a.prototype.override;w(a.prototype,"statusText",function(){if(this.override)return this.override();for(var a="",g=this.cols,k=0;k<g;k++){var e=g-k,f=this.wa[k]||this.wa[-e];if(f){if(f=f(),void 0!=f&&""!==f){if(0==k&&g<=f.length)return f;a+=f.substr(0,e);k=a.length}}else a+=" "}return a});g[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a,b){if(!a)throw Error("Invalid argument");L.call(this);a=m(a);var c=a.element;if(!c||"TEXTAREA"!=c.nodeName)throw Error("This element is not compatible for VimArea");for(var f in s){var g=s[f];if(g.stage.element==c)return d.Info("Instance exists"),g}a.setAttribute(new k("vimarea",1));this.stage=a;this.rows=c.rows;this.cols=c.cols;this.u=!1;var h=this;this.B=[new e("Focus",function(){h.u=!0}),new e("Blur",function(){h.u=!1})];if(b){var n=c.value;this.ub(function(){h.ab(n)})}else this.ab(c.value);
this.ma=x++;s[this.ma]=this}function g(a,b){return function(c){a.u=!0;c=c||window.event;c.keyCode?code=c.keyCode:c.which&&(code=c.which);b(a,new n(a,c))}}var h=S("Components.Vim"),m=U("Dandelion.IDOMElement"),k=U("System.utils.DataKey"),e=U("System.utils.EventKey"),f=U("System.Cycle"),d=U("System.Debug"),c=U("Components.Vim.State.Registers"),b=U("Components.Vim.Syntax.Analyzer"),r=h[0]("LineFeeder"),q=h[0]("StatusBar"),u=h[0]("Controls"),n=h[0]("ActionEvent"),v=h[0]("Message"),s=[],x=0;p(a,L);a.prototype.ub=
function(a){function b(){d.value+=e();++m;k==d.scrollHeight?f.next(b):(n.rows=m,n.cols=g,a())}function c(){d.value+=e();if(h==d.scrollWidth)f.next(c);else{var a="";--g;for(var k=0;k<g;k++)a+=".";d.value=a;d.style.whiteSpace="";e=function(){return"\n"+a};b()}}function e(){return"Please wait while Vim;Re is testing for screen dimensions"[g++]||"."}var d=this.stage.element;d.value="";var g=0;d.style.whiteSpace="nowrap";var h=d.scrollWidth;c();var k=d.scrollHeight,m=0,n=this};a.prototype.select=function(a){if(this.u){var b=
this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.ab=function(a){function d(){B.init(D.statusText);var a=B.linesOccupied;k.value=s.render(a-1,m-a)+"\n"+B.render(0,a<m?a:m);h.J=!1;h.select(s.cursor.position)}var h=this;this.content=a;var k=this.stage.element,m=this.rows,n=this.cols,s=new r(m-1,n),x=new b(s);s.init(a+"\n");var B=new r(m,n);B.setRender(!1);s.cursor.Vim=this;B.cursor.Vim=this;var D=new q(n);D.stamp(-18,function(){return s.lineStat});D.stamp(-3,function(){return v(s.docPos)});
D.stamp(0,function(){return s.cursor.message});B.init(D.statusText);s.dispatcher.addEventListener("SelectionChanged",function(){h.select(s.cursor.position)});s.dispatcher.addEventListener("VisualUpdate",d);k.value="Please wait ...";f.delay(d,70);this.I=d;this.contentFeeder=s;this.contentAnalyzer=x;this.statusFeeder=B;this.statusBar=D;this.W=new c;this.a=s.cursor;this.J=!0;f.perma("VimCursorBlinkCycle"+k.id,function(){h.select(!h.a.blink||(h.J=!h.J)?h.a.position:{start:0,end:0})},600);a=new u(this);
this.B.push(new e("KeyDown",g(this,a.handler.bind(a))));this.stage.addEventListeners(this.B);this.dispatchEvent(new BotanEvent("Visualized"))};a.prototype.display=function(a,b){var c=this,d=this.stage,f=this.a,g=this.B,h;for(h in g)d.removeEventListener(g[h]);f.suppressEvent();this.u=!1;d.removeAttribute("data-vimarea");setTimeout(function(){d.element.value=a;b&&b()},100);var m=new e("KeyDown",function(a){(new n(c,a)).kMap("Escape")&&(d.removeEventListener(m),d.setAttribute(new k("vimarea",1)),d.addEventListeners(c.B),
f.unsuppressEvent(),f.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate")),c.u=!0,d.element.focus())});d.addEventListener(m)};a.prototype.demo=function(a){if(!this.Ha){var b=this;this.Ha=!0;var c=a.length,d=0,e=new u(this),f=this.a,g=this.statusBar,h=function(){g.stamp(1,!1);e.handler(b,new n(b,"Escape"));setTimeout(function(){f.openRunAction("VA_REC",void 0,!0);b.Ha=!1;b.stage.addEventListeners(b.B)},100)},k=function(){b.stage.element.focus();e.handler(b,new n(b,a[d+1]));d+=2;d<c?setTimeout(k,
a[d]||20):setTimeout(h,100)};g.stamp(1,function(){return v("VA_REC_REPLAY")});var m=this.B,q;for(q in m)this.stage.removeEventListener(m[q]);this.u=!0;setTimeout(k,a[d])}};a.prototype.dispose=function(){var a=this.stage,b=this.B,c=this.contentFeeder,e=a.element.id;d.Info("Destroy instance: "+e);c.dispatcher.removeEventListener("VisualUpdate",this.I);this.dispatchEvent(new BotanEvent("Dispose"));a.removeAttribute("data-vimarea");f.permaRemove("VimCursorBlinkCycle"+e);for(var g in b)a.removeEventListener(b[g]);
a.element.value=this.content;delete s[this.ma]};w(a.prototype,"index",function(){return this.ma+1});w(a,"Instances",function(){var a=[],b;for(b in s)a.push(s[b]);return a});h[1](2,"VimArea",a)})();})();
