(function(){function p(a,h){a.prototype=Object.create(h.prototype);a.prototype.constructor=a}function v(a,h,g){Object.defineProperty(a,h,{get:g,set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:h})})}function w(a,h){Object.defineProperty(a,"propagating",{get:h,set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:"propagating"})})}
function F(a,h,g){Object.defineProperty(a,h,{get:function(){return g},set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:h})})}function BotanEvent(a,h){var g=!1,k=!1;F(this,"propagate",function(){k||(g=!0);k=!0});F(this,"stopPropagating",function(){g=!1});F(this,"type",a);w(this,function(){return g});F(this,"data",h);this.setTarget=function(a){F(this,"target",a);this.setTarget=void 0}.bind(this)}
function L(){function a(){this.ga.propagate();for(var a in this.stack)if(this.ga.propagating)this.stack[a](this.ga);this.ga.stopPropagating()}function h(a){g[a]||(g[a]=[]);return g[a]}var g={},k=this;this.addEventListener=function(a,c){var d=h(a);d[d.length]=c};this.removeEventListener=function(a,c){var d=h(a),f=d.indexOf(c);0>f||delete d[f]};this.dispatchEvent=function(e){var c=h(e.type);e.setTarget&&e.setTarget(k);setTimeout(a.bind({ga:e,stack:c}),0)}}function M(){L.call(this)}M.prototype=[];
var N={},O={},Q={},R=window.BotanJS,BotanJS=null,S=null,U=null;R&&(BotanJS=R.sg[0],S=R.sg[1],U=R.sg[2]);BotanJS=BotanJS||function(){var a=0,h=[],g=[],k=new L,e={write:function(a){h[h.length]=a}};F(e,"read",function(){return h[a++]});F(e,"end",function(){return h.length<=a});F(k,"log",e);F(k,"define",function(a){g[g.length]=a});F(k,"getDef",function(){return g.slice()});return k}();
S=S||function(a){if(O[a])return O[a];for(var h=a.split("."),g=h.length,k=N,e=0;e<g;e++)k[h[e]]=k[h[e]]||{},k=k[h[e]];k.Ya=[];nsObj=new M;nsObj[1]=function(a,d,f){this.m[d]||(this.m[d]=[a,f],a=new BotanEvent("NS_EXPORT",{name:this.T+"."+d,type:a}),BotanJS.dispatchEvent(a))}.bind({m:k,T:a});nsObj[0]=function(a){if(!this.m[a])throw Error("["+this.T+"] Invoke failed: "+a+" does not exists");return this.m[a][1]}.bind({m:k,T:a});nsObj[10]=function(a,d){this.Ya[a]=d}.bind(k);nsObj[11]=function(a,d){throw Error("["+
this.T+(d?"."+d:"")+"] "+a);}.bind({T:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return O[a]=nsObj};
U=U||function(a,h){var g=a.replace(".*","");O[g]&&O[g].dispatchEvent(new BotanEvent("NS_IMPORT",c));if(!h&&Q[a])return Q[a];for(var k=a.split("."),e=k.length,c=N,g=!1,d=0;d<e;d++){if("*"==k[d]){g=!0;break}c=c[k[d]];if(!c)throw Error("No such class: "+a);}if(c instanceof Array&&"*"!=k[d])return g=null,g=10==c[0]?c[1]():c[1],Q[a]=g;k={};for(d in c)e=c[d],e instanceof Array&&(g&&2==e[0]?k[d]=e[1]:3==e[0]?k[d]=e[1]:0==e[0]?Object.defineProperty(k,d,{get:function(){return this.m[this.e][1]}.bind({e:d,
m:c}),set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:d})}):1==e[0]?Object.defineProperty(k,d,{get:function(){return this.m[this.e][1]()}.bind({e:d,m:c}),set:function(d){this.m[this.e][1](d)}.bind({e:d,m:c})}):10==e[0]&&Object.defineProperty(k,d,{get:e[1],set:function(){throw Error("Setting a read-only property: "+this.e);}.bind({e:d})}));return Q[a]=k};window.BotanJS={};window.BotanJS.version="1.0.0b";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return U(a)}catch(h){if(R)return R["import"](a);throw h;}};window.BotanJS.sg=[BotanJS,S,U];BotanJS.define("System.utils.IKey");
(function(){function a(g,k){g&&"string"!=typeof g||(this.keyName=g,this.keyValue=k instanceof a?k:void 0!=k?String(k):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var h=S("System.utils");a.prototype.keyName="";a.prototype.keyValue="";F(a,"quickDef",function(){var g=arguments.length;if(0!=g%2)h[11]("Invalid Definition Count","IKey");for(var k=[],e=0;e<g;e+=2)k[k.length]=new a(arguments[e],arguments[e+1]);return k});h[1](2,"IKey",a)})();BotanJS.define("System.utils.Perf");
(function(){for(var a=S("System.utils.Perf"),h=[],g=0;256>g;g++)h[g]=(16>g?"0":"")+g.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,e=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0;return h[a&255]+h[a>>8&255]+h[a>>16&255]+h[a>>24&255]+"-"+h[e&255]+h[e>>8&255]+"-"+h[e>>16&15|64]+h[e>>24&255]+"-"+h[c&63|128]+h[c>>8&255]+"-"+h[c>>16&255]+h[c>>24&255]+h[d&255]+h[d>>8&255]+h[d>>16&255]+h[d>>24&255]});a[1](3,"CountSubstr",function(a,e){if(0>=
e.length)return a.length+1;for(var c=0,d=a.indexOf(e);0<=d;d=a.indexOf(e,d))c++,d++;return c});a[1](3,"ArrayReverse",function(a){for(var e=null,c=a.length,d=null,e=0,d=c-1;e<d;e+=1,--d){var c=a[e],f=a[d],c=c^f,f=f^c,c=c^f;a[e]=c;a[d]=f}})})();BotanJS.define("System.Global");
(function(){var a=S("System.Global"),h=Boolean(document.all),g=window.allowed_origins||[],k=window.location.href.match(/^https:\/\//),e=navigator.userAgent,e=Boolean(~e.indexOf("Android")||~e.indexOf("webOS")||~e.indexOf("iPhone")||~e.indexOf("iPad")||~e.indexOf("iPod")||~e.indexOf("BlackBerry")||~e.indexOf("Windows Phone"));a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",h);a[1](0,"ALLOWED_ORIGINS",g);a[1](0,"SECURE_HTTP",k);a[1](0,"MOBILE",e)})();BotanJS.define("Dandelion");
(function(){function a(){if(m)return!0;try{return m=U("Dandelion.IDOMElement"),!0}catch(b){}return!1}function h(b,d){if(d&&a()){for(var n=b.length,f=[],c=0;c<n;c++)f[c]=m(b[c]);return f}return b}function g(b,a){b&&a(b)&&b.parentNode&&g(b.parentNode,a)}function k(b,a){return a(b)?b:b.parentNode&&k(b.parentNode,a)}function e(b){return document.createTextNode(b)}function c(a,m,f,c,e){a=document.createElement(a||"div");m&&(a.id=m);f&&(n?a.className=f:a.setAttribute("class",f));if(e)if(e instanceof Array)for(var g in e)a.setAttribute(e[g].keyName,
e[g].keyValue);else e instanceof b&&a.setAttribute(e.keyName,e.keyValue);c&&d(a,c);return a}function d(b,a){if(a instanceof Array)for(var m=a.length,n=0;n<m;n++)a[n]&&d(b,a[n]);else"string"==typeof a?b.appendChild(e(a)):a&&b.appendChild(a)}var f=S("Dandelion"),n=U("System.Global.IE"),b=U("System.utils.IKey"),m;f[1](3,"wrap",c);f[1](3,"wrapc",function(b,a,m){return c(!1,!1,b,a,m)});f[1](3,"wrape",function(b,a){return c(!1,!1,!1,b,a)});f[1](3,"wrapne",function(b,a,m){return c(b,!1,!1,a,m)});f[1](3,
"wrapna",function(b,a){return c(b,!1,!1,!1,a)});f[1](3,"textNode",e);f[1](3,"bubbleUp",k);f[1](3,"chainUpApply",g);f[1](3,"id",function(b,n){var d=document.getElementById(b);return d?n&&a()?m(d):d:d});f[1](3,"tag",function(b,a,m){m=void 0===m?document:m;return h(m.getElementsByTagName(b),a)});f[1](3,"name",function(b,a,m){m=void 0===m?document:m;return h(m.getElementsByName(b),a)});f[1](3,"glass",function(b,a,m){m=void 0===m?document:m;return h(m.getElementsByClassName(b),a)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,e){g.call(this,a,e);this.type=a.toLowerCase();this.handler=e}var h=S("System.utils"),g=h[0]("IKey");p(a,g);a.prototype.type="";a.prototype.handler=null;h[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(e,c){if(e instanceof a)return e;if(c)this.addEventListener=this.addEventListener.bind(e),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(e),this.removeEventListener=this.removeEventListener.bind(e);else{if(e)return new a(e,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function h(){}var g=S("Dandelion"),k=U("System.utils.EventKey");h.prototype.indexOf=function(a){for(var c=this.length,d=0;d<c;d++){var f=this[d];if(f.type==
a.type&&f.handler==a.handler)return d}return-1};p(h,Array);a.prototype.hasListener=function(a){return a instanceof k&&this.l&&-1!=this.l.indexOf(a)?this.l[this.l.indexOf(a)]:null};a.prototype.addEventListener=function(a,c){var d;if("string"==typeof a&&c)d=new k(a,c);else if(a instanceof k)d=a;else return!1;if(this.l)if(0>this.l.indexOf(d))this.l.push(d);else return!1;else this.l=new h,this.l[0]=d;this.addEventListener?this.addEventListener(d.type,d.handler,!1):this.attachEvent?this.attachEvent("on"+
d.type,d.handler):this["on"+d.type]=d.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var c in a)this.addEventListener(a[c])};a.prototype.removeEventListener=function(a,c){c&&(a=new k(a,c));this.l&&delete this.l[this.l.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};g[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(b){b=typeof b;return"number"==b?g:"string"==b?h:k}function h(b,a){return b.nodeName==a}function g(b,a){return b.nodeType==a}function k(){return!1}function e(b,a){if(b instanceof e)return b;if(a)n.call(this,b,!0),this.getDAttribute=this.getDAttribute.bind(b),this.loot=this.loot.bind(b),this.foreach=this.foreach.bind(b),this.reverseChild=this.reverseChild.bind(b),this.clear=this.clear.bind(b),this.first=this.first.bind(b),this.last=this.last.bind(b),this.contains=this.contains.bind(b),
this.style=b.style,this.hasAttribute=function(){}.bind(b),this.removeAttribute=function(b){this.removeAttribute(b)}.bind(b),this.element=b,this.setAttribute=this.setAttribute.bind(b);else{if(b&&void 0!=b.nodeType&&1==b.nodeType)return new e(b,!0);if(void 0===b)return new e(f(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var c=S("Dandelion"),d=U("System.utils.IKey");U("System.utils.Perf");var f=c[0]("wrap"),n=c[0]("IDOMObject");p(e,n);e.prototype.setAttribute=function(b,
a){if(b instanceof d)this.setAttribute(b.keyName,b.keyValue);else if(b instanceof Array)for(var n in b)b[n]instanceof d&&this.setAttribute(b[n].keyName,b[n].keyValue);else this.setAttribute(b,a)};e.prototype.loot=function(b){for(var a=b.childNodes;a.length;)this.appendChild(b.removeChild(a[0]))};e.prototype.clear=function(){for(var b=this.childNodes;b.length;)this.removeChild(b[0])};e.prototype.getDAttribute=function(b){return(b=this.getAttribute("data-"+b))&&decodeURIComponent(b)};e.prototype.foreach=
function(b,a){for(var n=Array.apply([],this.childNodes),d=n.length,f=0;f<d;f++)n[f].nodeType==b&&a(n[f],this)};e.prototype.first=function(b,n){for(var d=this.childNodes,f=d.length,c=null,g=a(b),e=0;e<f;e++)if(g(d[e],b)&&(void 0===n||n(d[e],this))){c=d[e];break}return c};e.prototype.last=function(b,n){for(var d=this.childNodes,f=null,c=a(b),g=d.length-1;-1<g;g--)if(c(d[g],b)&&(void 0===n||n(d[g],this))){f=d[g];break}return f};e.prototype.contains=function(b){return b.parentElement?b==this?!0:this.contains(b.parentElement):
!1};e.prototype.aKeys=function(){for(var b=[],a=this.element.attributes,n=a.length,f=0;f<n;f++)b.push(new d(a[f].name,a[f].value));return b};e.prototype.reverseChild=function(){for(var b=this.childNodes.length-1;-1<--b;)this.appendChild(this.childNodes[b])};c[1](2,"IDOMElement",e)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,e){g.call(this,"data-"+a,e?encodeURIComponent(String(e)):"")}var h=S("System.utils"),g=h[0]("IKey");p(a,g);h[1](2,"DataKey",a)})();BotanJS.define("System.utils");
(function(){var a=S("System.utils"),h=U("System.Global");a[1](3,"objGetProp",function(a,k,e){if(a&&a[k]){var c=a[k].constructor.toString().match(/function ([^\(]+)/);if(c&&2==c.length&&c[1].toUpperCase()==e.toUpperCase())return a[k]}return null});a[1](3,"objSearch",function(a,k,e){for(var c in a)if(k(a[c]))return a[c][e]||a[c];return null});a[1](3,"objMap",function(a,k){for(var e in a)a[e]=k(a[e])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?h.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(h.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.R=!1;this.loop=function(){for(var k in this.steppers)this.steppers[k]();a++};v(this,"count",function(){return a})}var h=S("System");a.prototype.putStepper=function(a){var k=this.steppers.length;this.steppers[k]=a;return k};a.prototype.start=function(){this.R||(this.id=setInterval(this.loop.bind(this),0),this.R=!0)};a.prototype.stop=function(){this.R&&(this.R=!1,clearInterval(this.id))};a.prototype.steppers=[];v(a.prototype,"started",function(){return this.R});
h[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=S("System.Log"),h=[];a[1](3,"writeLine",function(a,k){k=void 0===k?16:k;var e=!1,c;for(c in h)h[c](a,k),e=!0;!e&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var k=-1;h[k=h.length]=a;return k});a[1](3,"removeHandler",function(a){delete h[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){k&&g.writeLine(Array.prototype.join.call(arguments," "),g.INFO)}var h=S("System.Debug"),g=U("System.Log"),k=U("System.Global").debug,e=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());h[1](3,"Error",function(a){e&&g.writeLine(a.name+"\n\t"+a.message+"\n\t"+a.stack,g.ERROR)});h[1](3,"Info",a);h[1](3,"turnOff",function(a){"info"==a?k=!1:"error"==a&&(e=!1)});h[1](3,"turnOn",function(a){"info"==a?k=!0:"error"==a&&(e=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(d){d.target.removeEventListener("NS_IMPORT",a);d=U("System.Cycle.TICK",!0);d!=c&&d.xb?(k.Info("[System.Cycle] Global Tick exists"),c=null):(k.Info("[System.Cycle] Creating global Tick"),c.start())}var h=S("System.Cycle");U("System.utils");var g=U("System.Tick"),k=U("System.Debug"),e=[],c=new g;c.putStepper(function(){var a=(new Date).getTime(),f;for(f in e){var n=e[f];if(n&&a>n[1]){try{n[0]()}catch(b){k.Error(b);delete e[f];continue}n[2]?delete e[f]:n[1]=a+n[4]}}});h.addEventListener("NS_IMPORT",
a);h[1](3,"next",function(a){var f=[];f[0]=a;f[1]=0;f[2]=!0;e[e.length]=f});h[1](3,"delay",function(a,f){var n=[];n[0]=a;n[1]=(new Date).getTime()+f;n[2]=!0;e[e.length]=n});h[1](3,"perma",function(a,f,n){for(var b in e)if(e[b][3]==a)return!1;b=[];b[0]=f;b[1]=(new Date).getTime()+n;b[2]=!1;b[3]=a;b[4]=n;e[e.length]=b});h[1](3,"permaRemove",function(a){for(var f in e)e[f][3]==a&&delete e[f]});h[1](10,"TICK",function(){return c})})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.ca={}}function h(a,c){this.qa=a+"";this.newLine=Boolean(c)}var g=S("Components.Vim.State"),k=U("System.Debug");h.prototype.newLine=!1;h.prototype.toString=function(){return this.qa};h.prototype.indexOf=function(a,c){return this.qa.indexOf(a,c)};v(h.prototype,"length",function(){return this.qa.length});a.prototype.Va=function(a){this.ca['"']=a};a.prototype.yank=function(a,c){var d=new h(a,c);this.Va(d);this.ca[this.Q||0]=d;this.Q=!1};a.prototype.change=function(a,c){var d=
new h(a,c);this.Va(d);for(var f=this.ca,n=9;1<n;n--)void 0!=f[n-1]&&(f[n]=f[n-1]);f[1]=d;this.Q=!1};a.prototype.get=function(a){a||0===a||(a=this.Q||'"');this.Q=!1;return this.ca[a]};a.prototype.select=function(a){k.Info("Selecting Register: "+a);this.Q=a};g[1](2,"Registers",a)})();BotanJS.define("Components.Vim");VIMRE_VERSION="1.0.0b";
(function(){function a(a,d,f){if(void 0==a[d])return d;var n=0;return a[d].replace(/%\d+/g,function(){return f[n++]})}var h=S("Components.Vim"),g={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL  --",VISLINE:"-- VISUAL LINE --",REGISTERS:"--- Registers ---",WRITE:'"%1" %2L, %3C written',WAIT_FOR_INPUT:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",
UNDO_LIMIT:"Already at oldest change",REDO_LIMIT:"Already at newest change",NCHANGES:"%1 change(s); before #%2  %3",LINES_FEWER:"%1 fewer line(s)",LINES_MORE:"%1 more line(s)",LINES_YANKED:"%1 line(s) yanked",LINES_SHIFTED:"%1 line(s) %2ed %3 time(s)",NO_SHIFT:"No line to %1",SEARCH_HIT_BOTTOM:"search hit BOTTOM, continuing at TOP",SEARCH_HIT_TOP:"search hit TOP, continuing at BOTTOM",REPLACE:"%1 substitution(s) on %2 line(s)"},k={E35:"No previous regular expression",E37:"No write since last change (add ! to override)",
E481:"No range allowed",E492:"Not an editor command: %1",E486:"Pattern not found: %1",EX1:"Pattern Error( %1 )",EX2:"This pattern is causing infinite loop: %1",TODO:"%1 is not implemented yet",MISSING_FEATURE:'Sorry, I thought this command wasn\'t useful enough to implement. Please file a feature request titled "Implement %1" in github if you think this is important.'},e=new Audio("data:audio/ogg;base64,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");
h[1](3,"Message",function(c){return a(g,c,Array.prototype.slice.call(arguments,1))});h[1](3,"Error",function(c){return c+": "+a(k,c,Array.prototype.slice.call(arguments,1))});h[1](3,"Beep",function(){setTimeout(function(){e.pause();e.currentTime=0;e.play()},0)})})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var c=0;c<k;c++)for(var d=g[c],f=d.length,n=0;n<f;n++){var b=d[n];if(b[0]<=a&&a<=b[1]){a=d;break a}}a=[]}this.sb=a}var h=S("Components.Vim.Syntax"),g=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]],[[32,32],[9,9]]],k=g.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var c=this.sb,d=c.length;a=a.charCodeAt(0);for(var f=0;f<d;f++){var n=c[f];if(n[0]<=
a&&a<=n[1])return!0}return!1};h[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.Ha=this.oa=this.I=this.O=-1;this.Ma=null}function h(a){this.K=a;this.fa={}}function g(n,b){if(!b)throw Error("Parent not found");var d=new a;d.Ha=b[2];d.O=b[0];d.I=b[1];if(-1<b[3]){var f=n.find(b[3]);d.Ma=g(n,f)}return d}function k(a,b){for(var d=b.length,f=a.split("\n"),g=f[0],f=f[1],q=[],e=[],k=0,h=[],y=g.length,C=f.length,t=0;t<d;t++){var B=b.substr(t,C);if(b.substr(t,y)==g)q[k]=t,k++,t+=y-1;else if(B==f){B=t;if(0==k)e.push(B);else{var E=[];E[0]=q[--k];E[1]=B;E[2]=
k;E[3]=0<k?q[k-1]:-1;h.push(E)}t+=C-1}}e.length&&c.Info('Unmatched opening "'+g+'"@'+e.join(", "));0<k&&c.Info('Unmatched closing "'+f+'"@'+q.slice(0,k));this.Ka=h}var e=S("Components.Vim.Syntax"),c=U("System.Debug"),d=U("Components.Vim.Beep"),f=e[0]("Word");k.prototype.find=function(a,b){void 0==b&&(b=0);for(var d=this.Ka,f=d.length,c=0;c<f;c++){var g=d[c];if(g[b]==a)return g}return null};h.prototype.bracketAt=function(d){var b=this.K.content,f=1,c=null,e=b[d];switch(e){case "{":f=0;case "}":c=this.L("{\n}");
break;case "[":f=0;case "]":c=this.L("[\n]");break;case "(":f=0;case ")":c=this.L("(\n)");break;case "/":if("*"==b[d-1]){e="*/";d--;break}else if("*"==b[d+1]){e="/*";break}return new a;case "*":if("/"==b[d-1]){e="/*";d--;break}else if("/"==b[d+1]){e="*/";break}return new a;default:return new a}if(!c)switch(e){case "/*":f=0;case "*/":c=this.L("/*\n*/");break;default:return new a}b=c.find(d,f);c=g(c,b);c.oa=d;return c};h.prototype.bracketIn=function(d,b){var f="{[(".indexOf(d);0>f&&(f="}])".indexOf(d));
if(0>f)throw Error("Unsupported bracket: "+d);for(var c=this.L("{[("[f]+"\n"+"}])"[f]),e=c.Ka,q=e.length,k=null,f=0;f<q;f++){var h=e[f];h[0]<=b&&b<=h[1]&&(k&&k[2]<h[2]||!k)&&(k=h)}if(k){c=f=g(c,k);do c.O++,c.I--;while(c=c.parent);return f}return new a};h.prototype.quoteIn=function(f){for(var b=this.K,m=b.cursor,c=m.d().lineNum,g=0,e=0;-1!=g&&e<c;e++)g=b.content.indexOf("\n",g+1);var k=b.content.indexOf("\n",g+1);0<c&&g++;c=g;if(b.content[m.aPos]==f){for(var h=[],g=0,e=c;e<k;e++)b.content[e]==f&&(h[g++]=
e);e=h.indexOf(m.aPos);if(0!=g%2&&e==g-1)return d(),new a;m.moveX(0==e%2?1:-1)}e=b.content.indexOf(f,m.aPos+1);b=b.content.lastIndexOf(f,m.aPos-1);if(c<=b&&e<k)return k=new a,k.O=b+1,k.I=e-1,k.oa=f,k;d();return new a};h.prototype.L=function(a){if(this.fa[a])return this.fa[a];var b=new k(a,this.K.content);return this.fa[a]=b};h.prototype.reset=function(){this.fa={}};h.prototype.quoteAt=function(a){switch(this.K.content[a]){default:return{level:0,open:-1,close:-1}}};h.prototype.wordAt=function(d){var b=
this.K.content,m=b.length,c=d,g=d,e=new f(b[d]);if(0<d)for(;e.test(b[--c]););if(d<m)for(;e.test(b[++g]););d=new a;d.O=0<c?c+1:0;d.I=g-1;return d};v(a.prototype,"parent",function(){return this.Ma});v(a.prototype,"open",function(){return this.O});v(a.prototype,"close",function(){return this.I});v(a.prototype,"level",function(){return this.Ha});v(a.prototype,"selected",function(){return this.oa});e[1](2,"Analyzer",h);e[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,k){this.prev=null;this.cols=a;this.next=k;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=4;this.ra="";for(var e=0;e<this.tabWidth;e++)this.ra+=" ";k&&(k.prev=this)}var h=S("Components.Vim");U("System.Debug");U("System.utils.Perf.CountSubstr");a.prototype.V=function(a,k,e){this.lineNum=e;if(void 0==a||""===a)this.lineNum=++e,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.V(a,k,e+1);else{this.placeholder=!1;var c="",d=!1,f=0,n=0,b=this.tabWidth-
1;if(k){for(;f<this.cols-n*b;f++){var m=a[f];if(void 0===m)break;if("\n"==m){d=!0;f++;break}else"\t"==m&&n++;c+=m}d||f!=this.cols||"\n"!=a[f]||(f++,d=!0)}else for(d=!0;;f++){m=a[f];if(void 0===m)break;if("\n"==m){f++;break}else"\t"==m&&n++;f<this.cols-n*b&&(c+=m)}this.next&&(this.next.br=d,this.next.V(a.substr(f),k,d?e+1:e));this.content=c}};a.prototype.toString=function(){var a=this.content.replace(/\t/g,this.ra);return a.length<this.cols?a+" ":a||" "};v(a.prototype,"nextLine",function(){for(var a=
this,k=this.lineNum;(a=a.next)&&a.lineNum==k;);return a});v(a.prototype,"visualLines",function(){for(var a=[this],k=this;(k=k.next)&&!k.br;)a.push(k);return a});h[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");
(function(){function a(){this.S=[];this.ib=[];this.Ra=this.Fa=this.f=0}var h=S("Components.Vim.State");a.prototype.undo=function(){var a=this.f-1;return-1!=a&&this.S.length?this.S[this.f=a]:null};a.prototype.redo=function(){var a=this.S[this.f];return a?(this.f++,a):null};a.prototype.save=function(){this.Ra=this.f};a.prototype.record=function(a){this.S[this.f++]=a;this.ib[this.Fa++]=a;delete this.S[this.f];a.id=this.Fa};v(a.prototype,"changed",function(){return this.Ra!=this.f});h[1](2,"Recorder",
a)})();BotanJS.define("Components.Vim.Actions.QUIT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");var g=U("Components.Vim.Error");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=this.a;var e=a.Vim;if(a.rec.changed){a=g("E37");for(var e=this.a.feeder.firstBuffer.cols,c=a.length;c<e;c++)a+=" ";this.b=a}else return e.dispose(),!0};a.prototype.getMessage=function(){return this.b};h[1](2,"QUIT",
a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,k){this.a=a;this.jb=void 0==k?a.aPos:k;this.kb=this.Qa()}var h=S("Components.Vim.State");a.prototype.save=function(a,k,e){void 0==e&&(e=0);var c=this.a,d=c.feeder,f=this.jb-e,n=this.kb,b=this.Qa(),m=n;return function(){var u=d.content.substr(f,a);d.content=d.content.substring(0,f)+k+d.content.substring(f+a);a=k.length;k=u;c.PStart=m.e;c.PEnd=m.e+1;c.X=m.x;c.Y=m.y;c.pX=m.rb-1;d.panX=m.ub;d.panY=m.vb;d.pan();m=m==n?b:n}};a.prototype.Qa=function(){var a=this.a,a={e:a.PStart,
x:a.X,y:a.Y,rb:a.pX,ub:a.feeder.panX,vb:a.feeder.panY};0<a.x&&(--a.e,--a.x);return a};h[1](2,"Stator",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,k,e){if(void 0==a[k])return k;var c=0;return a[k].replace(/%\d+/g,function(){return e[c++]})}var h={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};S("Components.Vim.DateTime")[1](3,"String",function(g){return a(h,g,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(a,f){var n=a%10,b=a%100;if(1>=a)throw Error("Invalid number of Time units");return 2<=a&&4>=a?g(f[0],a):1==n&&11!=b?g(f[1],a):2<=n&&4>=n&&!(12<=b&&14>=b)?g(f[2],a):g(f[3],a)}var h=S("Components.Vim.DateTime"),g=h[0]("String"),k=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],e=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],c=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];h[1](3,"RelativeTime",function(d){var f=Math.round(.001*((new Date).getTime()-d.getTime()));if(31536E3<f)result=g("OverAYearAgo");else if(3952800<f)if(d=Math.round((f+1317600)/2635200),2<=d&&4>=d)result=g("XMonthsAgo_2To4",d);else if(5<=d&&12>=d)result=g("XMonthsAgo_5To12",d);else throw Error("Invalid number of Months");else if(2116800<=f)result=g("AboutAMonthAgo");else if(604800<=f)d=Math.round(f/604800),result=1<d?g("XWeeksAgo_2To4",d):g("AboutAWeekAgo");else{if(432E3<=f)switch(d.getDay()){case 1:d=
g("last Monday");break;case 2:d=g("last Tuesday");break;case 3:d=g("last Wednesday");break;case 4:d=g("last Thursday");break;case 5:d=g("last Friday");break;case 6:d=g("last Saturday");break;case 0:d=g("last Sunday");break;default:d=g("last Sunday")}else if(86400<=f)switch(d.getDay()){case 1:d=g("on Monday");break;case 2:d=g("on Tuesday");break;case 3:d=g("on Wednesday");break;case 4:d=g("on Thursday");break;case 5:d=g("on Friday");break;case 6:d=g("on Saturday");break;case 0:d=g("on Sunday");break;
default:d=g("on Sunday")}else d=7200<=f?a(Math.round(f/3600),k):3600<=f?g("AboutAnHourAgo"):120<=f?a(Math.round(f/60),e):60<=f?g("AboutAMinuteAgo"):a(1<f?f:2,c);result=d}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var h=S("Components.Vim.State"),g=U("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.Ea=a;this.ob=new Date;this.id=0};a.prototype.play=function(){this.Ea&&this.Ea()};v(a.prototype,"time",function(){return g(this.ob)});h[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.JOIN_LINES");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");var g=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),e=U("Components.Vim.Beep");U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d){a.preventDefault();var f=this.a,n=f.feeder,b,m,u,r;if(d)b=d.start;else{r=f.aPos;f.lineEnd(!0);u=new g(f);b=f.aPos;f.moveY(1);f.lineStart();
m=f.aPos;if(m<b)return f.moveTo(r),e(),!0;var q=n.content;r=n.content.substring(b,m);n.content=q.substring(0,b)+" "+q.substr(m)}n.pan();f.moveTo(b);n=new k;n.store(u.save(1,r));f.rec.record(n)};a.prototype.getMessage=function(){return this.b};h[1](2,"JOIN_LINES",a)})();BotanJS.define("Components.Vim.Actions.VERSION");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var g=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=":version\nVim;Re - Vim; Reverse Engineered for textarea v"+VIMRE_VERSION;a+="\n  + BotanJS - v1.0.0b\nProject home - https://github.com/tgckpg/BotanJS-vim";a+="\n  by \u659f\u914c\u9d6c\u5144 (penguin) - https://blog.astropenguin.net/";
a+="\n";for(var e=g("WAIT_FOR_INPUT"),c=this.a.feeder.firstBuffer.cols,d=a.length;d<c;d++)a+=" ";this.b=a+"\n"+e};a.prototype.getMessage=function(){return this.b};h[1](2,"VERSION",a)})();BotanJS.define("Components.Vim.Actions.TO");
(function(){function a(a){this.a=a;this.b="<TO COMMAND>";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");var g=U("Components.Vim.Beep");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,e){e.preventDefault();var c=this.a,d=c.feeder,f=c.d().lineNum,n=0;for(i=0;-1!=n&&i<f;i++)n=d.content.indexOf("\n",n+1);var b=d.content.indexOf("\n",n+1);0<f&&n++;f=n;n=e.key;e.kMap("Tab")&&(n="\t");if(1<n.length)g();else{var m=-1,m=a.kMap("t")||a.kMap("f")?
d.content.indexOf(n,c.aPos+1):d.content.lastIndexOf(n,c.aPos-1);f<=m&&m<b?c.moveTo(m):g()}};a.prototype.getMessage=function(){return this.b};h[1](2,"TO",a)})();BotanJS.define("Components.Vim.Actions.PUT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions"),g=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),e=U("Components.Vim.Message"),c=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f,n){a.preventDefault();var b=this.a.Vim.U.get();if(!b)return!0;var m=this.a,u=m.feeder;n=b.newLine;if(1<a.count){for(var r=b,q=1;q<a.count;q++)r+=b;b=
r;r=null}var r=c(b,"\n"),q=b.length,h=a.kMap("P")?0:-1;n&&(m.moveY(-h),m.lineStart());a=new g(m);var s=m.aPos,x="";void 0==f?(u.content=u.content.substring(0,s)+b+u.content.substring(s),u.pan(),m.moveTo(0<r?s:s+q,!0)):(f++,x=u.content.substring(s,f),u.content=u.content.substring(0,s)+b+u.content.substring(f),u.pan(),m.moveTo(s+q,!0));f=new k;if(n){var y=a.save(q,x);f.store(function(){y();m.moveY(h)})}else f.store(a.save(q,x));m.rec.record(f);r&&(this.b=e("LINES_MORE",r));m.moveX(-1);return!0};a.prototype.getMessage=
function(){return this.b};h[1](2,"PUT",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(a){this.a=a;this.ka=0;this.h=a.aPos;this.La=this.a.feeder.panY;a.suppressEvent()}var h=S("Components.Vim.Actions"),g=U("System.Debug"),k=U("Components.Vim.State.Stator"),e=U("Components.Vim.State.Stack"),c=U("Components.Vim.Message"),d=U("Components.Vim.Beep"),f=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b,m){a.preventDefault();if(!a.ModKeys){var c=a.target.U,r=this.a,
q=r.feeder;if(q.firstBuffer.next.placeholder&&2>q.content.length)return g.Info("Content is empty"),!0;var h=!1;if(void 0==b){h=!0;b=this.h;var s=r.aPos;if(this.h!=s)a.kMap("^")?b--:a.kMap("l")?r.moveX(-1):a.kMap("h")?b=s:a.kMap("j")?(m=!0,r.lineEnd(!0),b=r.aPos,r.moveY(-1),r.lineStart(),this.h=r.aPos):a.kMap("k")?(m=!0,r.moveY(1),r.lineEnd(!0),b=r.aPos,r.moveY(-1),r.lineStart()):this.h<s&&(b=s,r.moveTo(this.h));else if(a.kMap("d"))m=!0,r.lineEnd(!0),b=r.aPos,r.lineStart();else if(a.range)b=a.range.close,
r.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))b=r.aPos;else return d(),!0}}var s=q.content.slice(0,-1),x=b;a=r.aPos;a<x&&(x=r.aPos,a=b);b=s.substring(x,a+1);c.change(b,m);this.ka=f(b,"\n");q.content=s.substring(0,x)+s.substring(a+1)+"\n";q.pan(void 0,this.La<q.panY?this.La-q.panY:void 0);r.moveTo(x);a=new k(r,x);m=new e;var y=a.save(0,b);m.store(function(){y();r.moveX(1)});r.rec.record(m);return h}};a.prototype.getMessage=function(){return this.ka?c("LINES_FEWER",this.ka):
""};h[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(a){this.a=a;this.h=a.aPos;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");var g=U("Components.Vim.Message"),k=U("Components.Vim.Beep"),e=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d,f){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var n=a.target.U,b=this.a,m=!1;if(void 0==d){m=!0;d=this.h;var u=b.aPos;if(this.h!=u)a.kMap("^")?d--:a.kMap("l")?
b.moveX(-1):a.kMap("h")?d=u:a.kMap("j")?(f=!0,b.lineEnd(!0),d=b.aPos,b.moveY(-1),b.lineStart(),this.h=b.aPos):a.kMap("k")?(f=!0,b.moveY(1),b.lineEnd(!0),d=b.aPos,b.moveY(-1),b.lineStart()):this.h<u&&(d=u,b.moveTo(this.h));else if(a.kMap("y"))f=!0,b.lineEnd(!0),d=b.aPos,b.lineStart();else if(a.range)d=a.range.close,b.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))d=b.aPos;else return k(),!0}}u=d;a=b.aPos;a<u&&(u=b.aPos,a=d);b.moveTo(u);a=b.feeder.content.substring(u,a+1);n.yank(a,
f);if(f=e(a,"\n"))this.b=g("LINES_YANKED",f);return m}};a.prototype.getMessage=function(){return this.b};h[1](2,"YANK",a)})();BotanJS.define("Components.Vim.Actions.BUFFERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");var g=U("Dandelion"),k=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var e=U;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();g.tag("textarea");var d=this.a.Vim,f=e("Components.Vim.VimArea").Instances;a=":buffers";for(var n in f){var b=f[n],m=b.index+" ",u=b.contentFeeder.cursor,m=m+((b==d?"%a":"  ")+" "),m=m+
((u.rec.changed?"+":" ")+" "),m=m+('"'+b.stage.element.id+'" line '+(u.d().lineNum+1));a+="\n  "+m}d=k("WAIT_FOR_INPUT");f=this.a.feeder.firstBuffer.cols;for(n=a.length;n<f;n++)a+=" ";this.b=a+"\n"+d};a.prototype.getMessage=function(){return this.b};h[1](2,"BUFFERS",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.lb=new k(a);this.w=this.u=0;this.za=!1;this.C("",!0);a=this.a.feeder.firstBuffer.cols;for(var f=c("INSERT"),n=f.length;n<a;n++)f+=" ";this.b=f}var h=S("Components.Vim.Actions"),g=U("Components.Vim.State.Stack"),k=U("Components.Vim.State.Stator"),e=U("System.Debug"),c=U("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.za&&this.ba();this.wa()&&this.a.feeder.pan();this.b="";this.C("",!0);this.a.moveX(-1)};a.prototype.C=
function(a,f){if(f||!this.da){if(this.da){if(0==this.u&&0==this.q&&""===this.s)return;this.q<this.u&&(this.u=this.q);this.da.store(this.lb.save(this.w,this.s,-this.u));this.a.rec.record(this.da)}this.q=0;this.s="";this.da=new g}this.q<this.u&&(this.w=0,this.u=this.q);this.q+=a.length;this.w+=a.length};a.prototype.hb=function(a){var f=this.a,n=f.feeder;if(a.kMap("BS")||a.kMap("S-BS")){this.ba();if(0==f.X&&0==n.panY&&0==f.Y)return;a=f.aPos-1;this.q<=this.u&&(this.s=n.content.substr(a,1)+this.s);n.content=
n.content.substring(0,a)+n.content.substring(a+1);n.pan();f.moveX(-1,!0,!0);0<this.w&&this.w--;this.q--}else if(a.kMap("Del")||a.kMap("S-Del"))this.ba(),a=f.aPos,this.s+=n.content.substr(a,1),n.content=n.content.substring(0,a)+n.content.substring(a+1),n.pan();else return;n.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var f;a:switch(f=a.key,f){case "Tab":f="\t";break a;case "Enter":f="\n";break a}if(1!=f.length)this.hb(a);
else{a=this.a;var n=a.feeder,b=a.aPos,m="\n"!=n.content[b];n.content=n.content.substring(0,b)+f+n.content.substring(b);"\n"==f?(n.softReset(),n.pan(),a.moveY(1),a.lineStart(),this.$a(),this.za=m):(this.ba(),n.pan(),a.moveX("\t"==f?n.firstBuffer.tabWidth:1,!1,!0));n.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.C(f)}}};a.prototype.ba=function(){var a=this.A;if(this.A){e.Info("Realize Indentation: "+a);l=a[1];for(var f=a[0];f<l;f++)this.C(this.a.feeder.content[f]);this.s=a[2]+this.s;
this.A=null}};a.prototype.$a=function(){for(var a=this.A,f=this.wa(),n=this.a,b=n.feeder,m=n.aPos,c=b.content.lastIndexOf("\n",m-2),g=b.content.substring(c+1,m-1)||f;""==g&&0<c;)g=c,c=b.content.lastIndexOf("\n",g-2),g=b.content.substring(c+1,g-1);a=f?a[2]:"";for(f=m;-1!="\t ".indexOf(b.content[f]);f++)a+=b.content[f];for(c=0;-1!="\t ".indexOf(g[c]);c++);g&&(b.content=b.content.substring(0,m)+g.substr(0,c)+b.content.substring(f),b.softReset(),b.pan(),n.moveX(c*b.firstBuffer.tabWidth,!1,!0),n=[],n[0]=
m,n[1]=m+c,n[2]=a,this.A=n,e.Info("Phantom indent: "+n))};a.prototype.wa=function(){var a=this.A;if(!a)return"";e.Info("Erase phantom indent: "+a);var f=this.a.feeder,n=f.content.substring(a[0],a[1]);f.content=f.content.substring(0,a[0])+f.content.substring(a[1]);this.A=null;return n};a.prototype.getMessage=function(){return this.b};h[1](2,"INSERT",a)})();BotanJS.define("Components.Vim.Actions.UNDO");
(function(){function a(a){this.a=a;this.t="UNDO COMMAND"}var h=S("Components.Vim.Actions"),g=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.t=g("NCHANGES","<TODO>",a.id,a.time)):this.t=g("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.t};h[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var h=S("Components.Vim.Actions");U("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var k=a.length,e=[],c=0;c<k;c++)e[c]="\n"==a[c]?"a":a.charCodeAt(c).toString(16),1==e[c].length?e[c]="0"+e[c]:0==e[c].length&&(e[c]="00");this.b=e.join(" ")};a.prototype.getMessage=function(){return this.b};h[1](2,"PRINT_HEX",a)})();BotanJS.define("Components.Vim.Actions.WRITE");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");var g=U("Components.Vim.Message"),k=U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var c=this.a;a=c.Vim;a.content=c.feeder.content.slice(0,-1);a=g("WRITE",a.stage.element.id,k(a.content,"\n"),a.content.length);c.rec.save();for(var c=this.a.feeder.firstBuffer.cols,d=a.length;d<c;d++)a+=" ";
this.b=a};a.prototype.getMessage=function(){return this.b};h[1](2,"WRITE",a)})();BotanJS.define("Components.Vim.Actions.WORD");
(function(){function a(a){this.a=a;this.b="<WORD COMMAND>";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var k=this.a,e=k.feeder,c=k.Vim.contentAnalyzer,d=k.aPos,f=1;if(a.kMap("w")||a.kMap("W")){"\n"==e.content[d+1]&&d++;var n=c.wordAt(d);-1!=n.open&&(d=n.close+1)}if(a.kMap("b")||a.kMap("B")){if(0==d)return;f=-1;n=c.wordAt(d-1);-1!=n.open&&(d=n.open)}for(;-1!=" \t".indexOf(e.content[d]);)d+=
f;k.moveTo(d)};a.prototype.getMessage=function(){return this.b};h[1](2,"WORD",a)})();BotanJS.define("Components.Vim.Actions.SHIFT_LINES");
(function(){function a(a,b){this.a=a;this.h=a.aPos;this.b="<LINE_SHIFT>";this.Sa=a.d().lineNum;this.Ia=b.count-1;g.Info("Open shift: "+this.Ia+" line(s) from the cursor");this.Ca=b.kMap(">")?1:-1;g.Info("Direction is: "+(1==this.Ca?">":"<"));a.suppressEvent()}var h=S("Components.Vim.Actions"),g=U("System.Debug"),k=U("Components.Vim.Beep"),e=U("Components.Vim.State.Stator"),c=U("Components.Vim.State.Stack");U("Components.Vim.Error");var d=U("Components.Vim.Message"),f=U("System.utils.Perf.CountSubstr");
a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var m=this.a,u=m.feeder,r=!1,q=this.Ca,h=this.Sa,s=this.Ia,x=1;1<a.count&&(s+=a.count-1);var y=h;if(void 0==b){r=!0;b=this.h;var C=m.aPos;if(this.h!=C){y=h=0;s&&(C<b?h-=s-1:y+=s-1,console.log(h,y));C<b&&(b+=C,C=b-C,b-=C);for(var t=0;t<C;t++)"\n"==u.content[t]&&(y++,t<b&&h++)}else if(a.range){b=a.range.close;h=1;y=-1;for(t=0;t<b;t++)"\n"==
u.content[t]&&(y++,t<a.range.open&&h++);-1==y&&(h=y=0);y<h&&(y=--h);x=a.count}else if(!(0<q&&(a.kMap(">")||a.kMap("l"))||0>q&&(a.kMap("<")||a.kMap("h"))))return k(),!0}else{for(t=h=0;t<b;t++)"\n"==u.content[t]&&h++;y=this.Sa;x=a.count}y<h&&(h+=y,y=h-y,h-=y);var C=u.content.slice(0,-1),B=C.match(/^[\t ]+/gm),E="\t",H=u.firstBuffer.tabWidth;if(B){var I=B.length-1;if(1<I){g.Info("Guessing the tabstop:");for(var G=s=0,H=[],t=0;t<I;t++){var z=B[t],A=B[t+1],s=s+f(z,"\t"),G=G+f(z," "),z=A.length-z.length;
0!=z&&(z=0>z?-z:z,H[z]||(H[z]=0),H[z]++)}I=B=0;for(t in H)t=Number(t),z=H[t],B<z&&(B=z,I=t);G/=I;if(s<G)for(E="",t=0;t<I;t++)E+=" ";H=I;g.Info("\tTab count: "+s);g.Info("\tSpace count: "+G);g.Info("\ti.e. indent using "+JSON.stringify(E))}else g.Info("Not enough tabs to determine the tabstop, using default")}g.Info("Start: "+h,"End: "+y);var G="",B=0,I=!1,J=0;u.content="";s=0;z="";for(t=0;t<x;t++)z+=E;for(E=t=0;0<=t;t=C.indexOf("\n",t),E++)if(t++,!(E<h)){I||(I=!0,u.content=C.substring(0,t-1),J=u.content.length);
if(y<E)break;A=C.indexOf("\n",t);A=~A?C.substring(1<t?t:t-1,A):C.substring(1<t?t:t-1);1<t&&(u.content+="\n",G+="\n",B++);G+=A;if(""!==A){if(0<q)A=z+A;else{for(var T=0,K=0;T<x;T++){var P=A[K];if(" "==P)for(P=H+K++;K<P&&~"\t ".indexOf(A[K]);K++);else if("\t"==P)K++;else break}A=A.substring(K)}u.content+=A;B+=A.length;s++}}h=u.content.length;u.content+="\n";~t&&(u.content+=C.substring(t)+"\n");u.pan();m.moveTo(h);t=new e(m,J);h=new c;for(J++;~"\t ".indexOf(u.content[J]);J++);var V=t.save(B,G);h.store(function(){V();
m.moveTo(J);m.lineStart()});m.moveTo(J);m.rec.record(h);this.b=s?d("LINES_SHIFTED",s,0>q?"<":">",x):d("NO_SHIFT",0>q?"<":">");return r}};a.prototype.getMessage=function(){return this.b};h[1](2,"SHIFT_LINES",a)})();BotanJS.define("Components.Vim.Actions.REDO");
(function(){function a(a){this.a=a;this.t="REDO COMMAND"}var h=S("Components.Vim.Actions"),g=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.t=g("NCHANGES","<TODO>",a.id,a.time)):this.t=g("REDO_LIMIT")};a.prototype.getMessage=function(){return this.t};h[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.FIND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}function h(a){for(var f="",c=a.length,b=1;b<c;b++)switch(a[b]){case "^I":f+="\t";break;case "\\":var m=a[++b];if(-1!="nrts.[]()^".indexOf(m))f+="\\"+m;else throw Error('Missing token impl: "'+m+'"');break;default:f+=a[b]}return new RegExp("("+f+")","gm")}var g=S("Components.Vim.Actions");U("System.Debug");var k=U("Components.Vim.Error"),e=U("Components.Vim.Message"),c=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=
function(a,f){a.preventDefault();if(f){if(2>f.length){if(1>c.length)return this.b=k("E35"),!0;f=c}c=f}if(1>c.length)return this.b=k("E35"),!0;var n;try{n=h(c)}catch(b){return this.b=k("EX1",b.message),!0}var m=this.a.feeder.content,u=this.a;f=u.aPos;for(var g,q,D,s=[],x;null!==(g=n.exec(m));){void 0==D&&(D=g.index);if(x==g.index)return this.b=k("EX2",c.slice(1).join("")),!0;if(f<g.index){q=g.index;break}s.push(g.index);x=g.index}this.b=c.join("");if(a.kMap("N")){if(q=s[s.length-2],void 0==q)for(this.b=
e("SEARCH_HIT_TOP");null!==(g=n.exec(m));)q=g.index}else void 0!=D&&void 0==q&&(q=D,this.b=e("SEARCH_HIT_BOTTOM"));void 0==q?this.b=k("E486",c.slice(1).join("")):u.moveTo(q)};a.prototype.getMessage=function(){return this.b};F(a,"Pattern",h);g[1](2,"FIND",a)})();BotanJS.define("Components.Vim.Actions.REPLACE");
(function(){function a(a){this.a=a;this.D=this.b="";this.Oa=0;this.ma=this.ma.bind(this);this.la=0;this.na=[];a.suppressEvent()}function h(a){for(var b="",f=a.length,d=[""],c=1;c<f;c++)switch(a[c]){case "^I":b+="\t";break;case "\\":c++;var e=a[c];if(-1!="$nrt\\".indexOf(e)){b+=JSON.parse('"\\'+e+'"');break}if(-1!="012345678".indexOf(e))d.push(b.length),b+=e;else{if("9"==e)throw Error("Back ref 9 is reserved for back ref 0");throw Error('Missing token impl: "'+tok+'"');}break;default:b+=a[c]}d[0]=
b;return d}var g=S("Components.Vim.Actions"),k=U("System.Debug"),e=U("Components.Vim.State.Stack"),c=U("Components.Vim.Error"),d=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var f=g[0]("FIND");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();var m,e;try{var g=b.indexOf("/",0),q=b.indexOf("/",g+1);if(-1==g)return this.b=c("MISSING_FEATURE","REPLACE %s"),!0;if(-1==q)m=f.Pattern(b),e=b;else{e=b.slice(g,q);m=f.Pattern(e);var D=
b.indexOf("/",q+1);this.D=-1==D?h(b.slice(q)):h(b.slice(q,D));this.Oa=this.D[0].length}}catch(s){return this.b=c("EX1",s.message),!0}k.Info("Replace: "+m+", [ "+this.D+" ]");g=this.a.feeder;m=g.content.slice(0,-1).replace(m,this.ma)+"\n";q=this.na.length;q||(this.b=c("E486",e.join("")));g.content=m;this.b=d("REPLACE",q,"<TODO>");this.C();g.pan();g.softReset();return!0};a.prototype.ma=function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1,-2),f=this.la+arguments[arguments.length-
2],d="",c=this.D[0],e=0;e<this.Oa;e++)var g=this.D.indexOf(e,1),d=-1==g?d+c[e]:d+b[c[this.D[g]]];b=d.length;this.la+=b-a.length;c=[];c[0]=a;c[1]=f;c[2]=b;this.na.push(c);return d};a.prototype.C=function(){var a=new e,b=this.na,f=b.length,d=this.a,c=d.feeder;a.store(function(){for(var a=c.content,n="",e=0,g=-1,h=0;h<f;h++){var k=b[h],t=k[1],B=k[2],E=k[0],H=E.length,n=n+(a.substring(e,t)+E),e=k[1]+B;k[0]=a.substr(t,B);k[1]=n.length-H;k[2]=H;-1==g&&(g=t)}n+=a.substring(e);c.content=n;d.moveTo(g);c.pan()});
d.rec.record(a)};a.prototype.getMessage=function(){return this.b};g[1](2,"REPLACE",a)})();BotanJS.define("Components.Vim.Actions.REGISTERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var g=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var e=a.target.U;a=":register\n"+g("REGISTERS");for(var c=0,d='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[c];void 0!=d;c++,d='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[c]){var f=e.get(d);f&&(a+='\n"'+d+"   "+f.toString().replace("\t",
"^I").replace("\n","^J"))}e=g("WAIT_FOR_INPUT");d=this.a.feeder.firstBuffer.cols;for(c=a.length;c<d;c++)a+=" ";this.b=a+"\n"+e};a.prototype.getMessage=function(){return this.b};h[1](2,"REGISTERS",a)})();BotanJS.define("Components.Vim.Actions.EDITOR_COMMAND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var h=S("Components.Vim.Actions"),g=U("System.Debug"),k=U("Components.Vim.Error");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,c){a.preventDefault();var d=1,f="",n=[];if(-1!=".$%".indexOf(c[d]))f=c[d++];else for(;-1!="0123456789".indexOf(c[d]);d++)f+=c[d];var b="";if(-1!="/?".indexOf(c[d]))b=c[d];else for(var m=/\w/g,u=c[d];u=c[d];d++)if(u.match(m))b+=u;else break;m=!1;switch(b){case "s":case "su":case "substitute":m=
!0;n[1]="REPLACE";break;case "/":m=!0;n[1]="FIND";break;case "buffers":case "ls":n[1]="BUFFERS";break;case "w":case "write":n[1]="WRITE";break;case "q":case "quit":n[1]="QUIT";break;case "register":case "registers":n[1]="REGISTERS";break;case "ver":case "version":n[1]="VERSION";break;case "h":case "help":n[1]="HELP"}""!==f&&(m?n[0]=f:n[3]=k("E481"));n[2]=c.slice(d);if(n[3])return this.b=n[3],!0;if(!n[1])return this.b=k("E492",c.slice(1).join("")),!0;try{h[0](n[1])}catch(r){return this.b=k("TODO",
n[1]),!0}try{this.a.openRunAction(n[1],a,n[2],n[0]),this.b=this.a.message}catch(q){g.Error(q)}return!0};a.prototype.getMessage=function(){return this.b};h[1](2,"EDITOR_COMMAND",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.Pa(a);this.b="";a.blink=!1;a.pSpace=!0}function h(a,f){if(0==f)return 0;for(var d=a.feeder,c=0,n=-1,e=d.content.indexOf("\n");0<=e&&!(n=e,c++,f<=c);e=d.content.indexOf("\n",e+1));d.EOF&&(e=n);d=d.content[e+1];void 0!=d&&"\n"!=d&&e++;return e}var g=S("Components.Vim.Actions"),k=U("System.Debug"),e=U("Components.Vim.Message"),c=g[0]("YANK"),d=g[0]("DELETE"),f=g[0]("SHIFT_LINES"),n=g[0]("PUT");a.prototype.Pa=function(a){this.a=a;var f={lineNum:a.d().lineNum,X:a.X,aPos:a.aPos,
tb:a.PStart};f.qb=f.aPos-a.aX;a.suppressEvent();a.lineEnd(!0);f.pb=a.aPos;a.moveTo(f.aPos);a.unsuppressEvent();this.Ta=f};a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.blink=!0;a.pSpace=!1;a.updatePosition();a.feeder.wrap&&0<a.X&&(a.suppressEvent(),a.moveX(-1),a.moveX(1),a.unsuppressEvent())};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var m=this.a,g=m.feeder,r=null,q=!1;if(a.kMap("y"))r=new c(m);else if(a.kMap("d"))r=new d(m);else if(a.kMap("p"))r=
new n(m);else if(a.kMap("V")){if(1==this.n)return!0;q=!0;this.n=1;this.b=e("VISLINE")}else if(a.kMap("<")||a.kMap(">"))r=new f(m,a);else if(a.kMap("v")){if(0==this.n)return!0;q=!0;this.n=0;this.b=e("VISUAL");m.updatePosition()}q&&g.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));if(-1==this.n)return k.Error(Error("Mode is undefined")),!0;q=this.Ta;if(r){m.suppressEvent();if(g=1==this.n)q.aPos<m.aPos?(m.lineEnd(!0),q.aPos=q.qb):(m.lineStart(),q.aPos=q.pb);var D=~[d,n].indexOf(r.constructor);
if(D&&q.aPos<m.aPos){var s=m.aPos;m.moveTo(q.aPos,!0);q.aPos=s}r.handler(a,q.aPos,g);D||m.moveTo(q.aPos);this.b=r.getMessage();r.dispose();m.unsuppressEvent();q.tb=m.PStart;return!0}a.range&&(m.suppressEvent(),a=a.range,m.aPos==q.aPos&&(m.moveTo(a.open,!0),this.Pa(m),q=this.Ta),m.unsuppressEvent(),m.moveTo(a.close,!0));s=m.aPos;r=g.firstBuffer;a=r.lineNum;var x=h(m,a),y=h(m,a+g.moreAt+1)-1;k.Info("Min aPos: "+x,"Max aPos: "+y);a=q.X;D=m.PStart;if(q.aPos<x)a=0,1==this.n&&(m.suppressEvent(),m.lineEnd(!0),
D=m.PStart,m.moveTo(s,!0),m.unsuppressEvent());else if(y<q.aPos){a=-2;q=0;do{if(r.placeholder)break;q<=g.moreAt&&(a+=r.toString().length+1);q++}while(r=r.next)}else{g=q.lineNum;if(1==this.n)m.suppressEvent(),a=0,s<q.aPos?(a=-1,g++,m.lineStart(),D=m.PStart):q.aPos<s?(m.lineEnd(!0),D=m.PStart):(m.lineStart(),D=m.PStart,m.lineEnd(!0),a=m.PStart,g=r.lineNum),m.moveTo(s,!0),m.unsuppressEvent();else if(0==this.n&&s==q.aPos)return;do{if(r.lineNum==g||r.placeholder)break;a+=r.toString().length+1}while(r=
r.next)}q=a;g=D;r=g-q;0<=r?g+=1:0>r&&(q+=r,g=a+1);m.PStart=q;m.PEnd=g}};a.prototype.getMessage=function(){return this.b};g[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new e;this.action=null;this.blink=!0;this.pSpace=!1;this.N=this.ea=0}function h(a,d){var b=a.d(),c=a.Y+d,e=a.Y;b||(b=a.feeder.firstBuffer,e=0,c=d);for(b!=a.feeder.firstBuffer&&e--;e<c&&!b.placeholder;b=b.nextLine)b.br&&e++;return e}var g=S("Components.Vim"),k=U("System.Debug"),e=U("Components.Vim.State.Recorder"),c=U("Components.Vim.Actions.*"),d=U("System.utils.Perf.CountSubstr");
a.prototype.Vim;a.prototype.moveTo=function(a,c){var b=this.feeder.content,m=this.d(),e=m.lineNum;m.placeholder&&(this.Y=e=0);for(var g=0,h=0,k=b.indexOf("\n");0<=k&&!(a<=k);k=b.indexOf("\n",k))h=k,k++,g++;e=g-e;g=a<h?h-a:a-h;g+=Math.ceil(g/m.cols)-1;g+=d(b.substring(h+1,a),"\t")*(m.tabWidth-1);e&&this.moveY(e);0<this.d().lineNum&&h<=a&&g--;this.moveX(-Number.MAX_VALUE);this.moveX(g,!1,c)};a.prototype.moveX=function(a,c,b){var m=this.pX,e=Boolean(a);0<this.N&&(0<a&&b&&(a+=this.N),this.N=0);e&&(m=
this.X+a);a||(a=1);var g=this.feeder;if(c&&0>m&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),this.lineEnd(b);else{var h=this.d(),k=h.visualLines.join("\n");c=k.length;var s=0,x=!0;1<c&&(s=this.rawLine,s=(x=0<(s.length+d(s,"\t")*(h.tabWidth-1))%h.cols)?b?c-1:c-2:b?c:c-1);h=k[m];(c=void 0==h||c==m+1&&" "==h)?m=0<m?s:0:"\n"==h&&(m+=a);g.wrap&&c&&!x&&b&&(this.N=1);this.X=m;e&&(this.pX=m,this.updatePosition())}};a.prototype.lineStart=function(){this.pX=0;this.moveX();this.updatePosition()};a.prototype.lineEnd=
function(a){this.moveX(Number.MAX_VALUE,!1,a)};a.prototype.updatePosition=function(){var a=0,d=0,b=this.feeder.lineBuffers[0];a:for(;b&&d<this.Y;d++)for(;b;){if(b.next&&b.next.placeholder)break a;a+=b.toString().length+1;if((b=b.next)&&b.br)break}this.PStart=a=this.X+a+this.N;this.PEnd=a+1;this.F()};a.prototype.F=function(){0<this.ea?k.Info("Event suppressed, suppression level is: "+this.ea):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=function(a){var d=
this.Y+a,b=this.feeder,c;if(0>d)b.pan(void 0,d),this.Y=0,this.moveX(),this.updatePosition(),b.softReset();else if(!b.EOF&&b.moreAt<d){b=this.feeder;if(b.linesTotal<d){for(;!b.EOF;)b.pan(void 0,1);a=h(this,a)}else{c=b.lastBuffer.lineNum;var d=d-b.moreAt,e=this.d().lineNum;b.EOF||b.pan(void 0,d);for(d=e+a;!b.EOF&&(b.lastBuffer.lineNum==c||b.lastBuffer.lineNum<d);)b.pan(void 0,1);this.Y=0;for(c=this.d();c&&c.lineNum!=d&&!c.placeholder;this.Y++,c=this.d());a=this.Y;b.EOF||b.lastBuffer.next.lineNum!=c.lineNum||
a--}this.Y=a;this.moveX();this.updatePosition();b.softReset()}else{if(0<a){c=this.d();if(c.nextLine.placeholder)return;d=h(this,a)}this.Y=d;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a,d){this.action&&this.action.dispose();k.Info("openAction: "+a);this.action=new c[a](this,d);this.B=null;this.F()};a.prototype.closeAction=function(){this.action&&(this.action.dispose(),this.B=this.action.getMessage(),this.action=null,k.Info("closeAction: "+this.B),this.Vim.contentAnalyzer.reset(),
this.F())};a.prototype.openRunAction=function(a,d,b,m,e,g,h){k.Info("OpenRunAction: "+a);a=new c[a](this);a.handler(d,b,m,e,g,h);this.B=a.getMessage();a.dispose();this.Vim.contentAnalyzer.reset();this.F()};a.prototype.suppressEvent=function(){++this.ea};a.prototype.unsuppressEvent=function(){--this.ea};a.prototype.d=function(){for(var a=this.feeder,d=a.firstBuffer,a=a.lastBuffer.next,b=0;d!=a;d=d.next)if(d.br&&b++,this.Y==b)return d;return null};v(a.prototype,"rawLine",function(){for(var a=this.feeder.content,
d=this.d().lineNum-1,b=a.indexOf("\n"),c=0;0<=b&&d!=c;b=a.indexOf("\n",b),c++)b++;0==c&&-1==b&&(b=0);return a.substring(b+1,a.indexOf("\n",b+1))});v(a.prototype,"aX",function(){var a=this.X,c=0;if(this.feeder.wrap){var b=this.d().visualLines,m=a,e;for(e in b){var g=b[e],h=g.content.length,k=g.toString().length,a=a-(k+1);if(0<=a)c+=h,m-=1+d(g.content,"\t")*(g.tabWidth-1);else if(0>a){a+=k+1;b=this.rawLine.substr(c);h=0;"\t"==b[0]&&(a-=g.tabWidth-1,m-=g.tabWidth-1);for(e=1;h<a&&e<b.length;e++)"\t"==
b[e]&&(a-=g.tabWidth-1,m-=g.tabWidth-1),h++;c+=h;c<m&&(c=m);break}}}else return this.X;return c});v(a.prototype,"aPos",function(){var a=this.feeder,d=this.d().lineNum,b=0;if(0<d){b=a.content.indexOf("\n");for(i=1;-1!=b&&i<d;i++)b=a.content.indexOf("\n",b+1);a.wrap&&b++}return b+=this.aX});v(a.prototype,"face",function(){return"\u2588"});v(a.prototype,"message",function(){if(this.B){var a=this.B;this.B=null;return a}return this.action&&this.action.getMessage()});v(a.prototype,"position",function(){return{start:this.PStart,
end:this.PEnd}});g[1](2,"Cursor",a)})();BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,d){var f=[];f[a]=new g(d);for(var e=a-1;0<=e;e--)f[e]=new g(d,f[e+1]);this.lineBuffers=f;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new k(this);this.dispatcher=new L;this.J=null;this.aa=-1;this.P=a}var h=S("Components.Vim");U("System.Debug");var g=h[0]("LineBuffer"),k=h[0]("Cursor"),e=U("System.utils.Perf.CountSubstr");a.prototype.init=function(a,d){this.content=a;this.setWrap(d);this.firstBuffer.V(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var d=this,f=a?function(){return!0}:function(a){return!a.placeholder};this.fb=function(a,b){for(var c=(void 0==a?"":a)+"",e=!1,g=0;a&&g<b&&(a=a.next)&&f(a);g++)e||a.br&&b<g+a.visualLines.length?(e||(d.J=a),e=!0,c+="\n@"):c+="\n"+a;return c};this.gb=function(){for(var a=d.lineBuffers[d.eb],b=d.Na+1,c=0;a&&c<b&&(a=a.next)&&f(a);c++)if(a.br&&b<c+a.visualLines.length){d.J=a;break}}};a.prototype.render=function(a,d){var f=this.lineBuffers;
if(void 0==a)a=0;else if(this.P<a)return"";if(void 0==d||this.P-a<d)d=this.rows-a;if(0==d)return"";this.eb=a;this.Na=d-1;return this.fb(f[a],this.Na)};a.prototype.pan=function(a,d){void 0==a&&(a=0);void 0==d&&(d=0);var f=this.panX+a,e=this.panY+d,b=-1,m=0;0>e&&(e=0);var g=this.content.slice(0,-1);if(0<e)for(b=g.indexOf("\n"),m=1;-1!=b&&m<e;m++){var h=g.indexOf("\n",b+1);if(-1==h){e=m;break}b=h}this.firstBuffer.V(this.content.substr(b+1),this.wrap,m);this.panX=f;this.panY=e};a.prototype.softReset=
function(){this.aa=-1;this.J=null;this.gb()};v(a.prototype,"linesTotal",function(){return e(this.content,"\n")});v(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});v(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.P-1]});v(a.prototype,"EOF",function(){return this.lineBuffers[this.P].placeholder});v(a.prototype,"moreAt",function(){if(0<this.aa)return this.aa;var a=this.firstBuffer;if(a.placeholder)return 0;var d=0;do{if(this.J==a)break;a.br&&d++}while(a=a.next);void 0==
a&&d--;return this.aa=d});v(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,d=this.cursor.d(),f="",e=0,b=this.cursor.aPos,m=b-a;do"\t"==this.content[m+1]&&e++,m++;while(m<b);e&&(f="-"+(a+e*(d.tabWidth-1)));return d.lineNum+1+","+a+f});v(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY)a=this.EOF?"BOTTOM":Math.floor(this.panY/(this.linesTotal-(this.P-1))*100)+"%";else if(this.J||!this.EOF)a="TOP";return a});v(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;
var d=0;do d++;while((a=a.next)&&!a.placeholder);return d});h[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");
(function(){function a(a){this.cols=a;this.sa={};this.override=null}var h=S("Components.Vim");U("System.Debug");h[0]("LineFeeder");a.prototype.stamp=function(a,h){this.sa[a]=h};a.prototype.override;v(a.prototype,"statusText",function(){if(this.override)return this.override();for(var a="",h=this.cols,e=0;e<h;e++){var c=h-e,d=this.sa[e]||this.sa[-c];if(d){if(d=d(),void 0!=d&&""!==d){if(0==e&&h<=d.length)return d;a+=d.substr(0,c);e=a.length}}else a+=" "}return a});h[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.State.History");
(function(){function a(a){e[a]||(e[a]=[]);this.r=e[a];this.reset()}function h(a,d){var f=d.length;if(a.length<f)return!1;for(var e=0;e<f;e++)if(a[e]!=d[e])return!1;return!0}var g=S("Components.Vim.State"),k=U("System.Debug"),e={};a.prototype.push=function(a){var d;if(d=this.r.length)a:{d=this.r[this.r.length-1];for(var f=d.length<a.length?a.length:d.length,e=0;e<f;e++)if(d[e]!=a[e]){d=!1;break a}d=!0}d?k.Info("This is the previous command, skipping"):this.r.push(a)};a.prototype.prev=function(a){for(this.r.length<=
this.f&&this.reset();-1<this.f;){var d=this.r[this.f--];if(d&&h(d,a))return d.slice()}return null};a.prototype.next=function(a){0>this.f&&(this.f++,this.next(a));for(;this.f<this.r.length;){var d=this.r[this.f++];if(d&&h(d,a))return d.slice()}return null};a.prototype.reset=function(){this.f=this.r.length-1};g[1](2,"History",a)})();BotanJS.define("Components.Vim.Ex.Command");
(function(){function a(a,c){var b=this;if(!d[c])throw Error("Unsupport mode: "+c);this.a=a;this.Ua=a.Vim.statusBar;this.n=c;this.$=new e(d[c]);this.g=[];this.p=null;this.ua="ExCommandBlinkCycle"+k.uuid;this.j=0;var m=a.feeder,h=!1,r=!1;this.G=function(){r=h=!0};g.perma(this.ua,function(){r?r=!1:h=!h;m.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))},600);this.ab=function(){for(var d="",e=b.g,c=b.j,m=e.length,g=0;g<m;g++){var k=e[g];h&&g==c&&(face=!0,k=a.face+k.substr(1));d+=k}h&&m<=c&&(d+=
a.face);return d};this.Ua.override=this.ab}var h=S("Components.Vim.Ex"),g=U("System.Cycle");U("System.Debug");var k=U("System.utils.Perf"),e=U("Components.Vim.State.History");U("Components.Vim.Message");var c=U("Components.Vim.Beep"),d={"/":k.uuid,":":k.uuid};a.prototype.dispose=function(){this.Ua.override=null;g.permaRemove(this.ua);this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){this.G();var d=null,b=!1;if(a.kMap("Tab"))d=
"^I";else if(!a.kMap("C-v"))if(a.kMap("BS")){if(1==this.j&&1<this.g.length)return!1;this.g.splice(--this.j,1);if(0==this.g.length)return a.cancel(),!0}else if(a.kMap("Del"))this.g.splice(this.j,1);else{if(a.kMap("Enter"))return this.cb(a),!0;if(a.kMap("Left"))1<this.j&&this.j--;else if(a.kMap("Right"))this.j<this.g.length&&this.j++;else if(b=a.kMap("Up")){this.p||(this.p=this.g);var e=this.$.prev(this.p);e?(this.g=e,this.j=e.length):c()}else(b=a.kMap("Down"))?(e=this.$.next(this.p))?(this.g=e,this.j=
e.length):this.p?(this.g=this.p,this.p=null):c():d=a.key}null!=d&&this.g.splice(this.j++,0,d);b||(this.$.reset(),this.p&&(this.p=this.g));a.cancel();this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))}};a.prototype.cb=function(a){this.$.push(this.g);var d="";switch(this.n){case "/":d="FIND";break;case ":":d="EDITOR_COMMAND"}var b=this.a;b.suppressEvent();this.a.openRunAction(d,a,this.g.slice());b.unsuppressEvent()};h[1](2,"Command",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,b){this.mb=a;this.xa=!1;if("string"==typeof b)this.Ga=b,this.Ja=0,this.M=k(b),this.Da=27==this.M;else{this.ha=b;if(";"==b.key||":"==b.key)n=b.keyCode;var d=this.ha.keyCode;this.Da=27==d||b.ctrlKey&&67==d;this.M=d+(b.shiftKey||b.getModifierState("CapsLock")?512:0)+(b.ctrlKey?1024:0)+(b.altKey?2048:0);this.Ja=16==d||17==d||18==d;this.Ga=b.key||g(this.M)}this.Aa=1;this.v=null}function h(a){this.Wa=a;this.ya=a.contentFeeder;this.H=this.ya.cursor;this.k=null}function g(a){switch(a){case 32:return" ";
case 65:return"a";case 66:return"b";case 67:return"c";case 68:return"d";case 69:return"e";case 70:return"f";case 71:return"g";case 72:return"h";case 73:return"i";case 74:return"j";case 75:return"k";case 76:return"l";case 77:return"m";case 78:return"n";case 79:return"o";case 80:return"p";case 81:return"q";case 82:return"r";case 83:return"s";case 84:return"t";case 85:return"u";case 86:return"v";case 87:return"w";case 88:return"x";case 89:return"y";case 90:return"z";case 49:return"1";case 50:return"2";
case 51:return"3";case 52:return"4";case 53:return"5";case 54:return"6";case 55:return"7";case 56:return"8";case 57:return"9";case 48:return"0";case 219:return"[";case 221:return"]";case n:case 186:return";";case 222:return"'";case 188:return",";case 190:return".";case 191:return"/";case 220:return"\\";case 173:case 189:return"-";case 61:case 187:return"=";case 561:return"!";case 562:return"@";case 563:return"#";case 564:return"$";case 565:return"%";case 566:return"^";case 567:return"&";case 568:return"*";
case 569:return"(";case 560:return")";case 731:return"{";case 733:return"}";case 512+n:case 698:return":";case 734:return'"';case 700:return"<";case 702:return">";case 732:return"|";case 685:case 701:return"_";case 573:case 699:return"+";case 577:return"A";case 578:return"B";case 579:return"C";case 580:return"D";case 581:return"E";case 582:return"F";case 583:return"G";case 584:return"H";case 585:return"I";case 586:return"J";case 587:return"K";case 588:return"L";case 589:return"M";case 590:return"N";
case 591:return"O";case 592:return"P";case 593:return"Q";case 594:return"R";case 595:return"S";case 596:return"T";case 597:return"U";case 598:return"V";case 599:return"W";case 600:return"X";case 601:return"Y";case 602:return"Z";case 27:return"Escape";case 8:return"Backspace";case 46:return"Delete";case 512:return"Shift";case 2048:return"Alt";case 1024:return"Control";case 13:return"Enter";case 9:return"Tab"}return"?"}function k(a){if(b[a])return b[a];var d=a.split("-"),e=d[0],c=0;if(2==d.length){var f=
!0;switch(d[0]){case "C":c=1024;break;case "A":c=2048;break;case "S":c=512;break;default:f=!1}f&&(e=d[1])}switch(e){case "BS":d=c+8;break;case "Del":d=c+46;break;case "Enter":d=c+13;break;case "Tab":d=c+9;break;case "Up":d=c+38;break;case "Down":d=c+40;break;case "Left":d=c+37;break;case "Right":d=c+39;break;case "A":c=512;case "a":d=c+65;break;case "B":c=512;case "b":d=c+66;break;case "C":c=512;case "c":d=c+67;break;case "D":c=512;case "d":d=c+68;break;case "E":c=512;case "e":d=c+69;break;case "F":c=
512;case "f":d=c+70;break;case "G":c=512;case "g":d=c+71;break;case "H":c=512;case "h":d=c+72;break;case "I":c=512;case "i":d=c+73;break;case "J":c=512;case "j":d=c+74;break;case "K":c=512;case "k":d=c+75;break;case "L":c=512;case "l":d=c+76;break;case "M":c=512;case "m":d=c+77;break;case "N":c=512;case "n":d=c+78;break;case "O":c=512;case "o":d=c+79;break;case "P":c=512;case "p":d=c+80;break;case "Q":c=512;case "q":d=c+81;break;case "R":c=512;case "r":d=c+82;break;case "S":c=512;case "s":d=c+83;
break;case "T":c=512;case "t":d=c+84;break;case "U":c=512;case "u":d=c+85;break;case "V":c=512;case "v":d=c+86;break;case "W":c=512;case "w":d=c+87;break;case "X":c=512;case "x":d=c+88;break;case "Y":c=512;case "y":d=c+89;break;case "Z":c=512;case "z":d=c+90;break;case "!":c=512;case "1":d=c+49;break;case "@":c=512;case "2":d=c+50;break;case "#":c=512;case "3":d=c+51;break;case "$":c=512;case "4":d=c+52;break;case "%":c=512;case "5":d=c+53;break;case "^":c=512;case "6":d=c+54;break;case "&":c=512;
case "7":d=c+55;break;case "*":c=512;case "8":d=c+56;break;case "(":c=512;case "9":d=c+57;break;case ")":c=512;case "0":d=c+48;break;case "<":c=512;case ",":d=c+188;break;case ">":c=512;case ".":d=c+190;break;default:throw Error("Unsupport keys: "+a);}return b[a]=d}var e=S("Components.Vim"),c=U("System.Debug"),d=U("Components.Vim.Ex.Command"),f=e[0]("Beep"),n=59,b={};h.prototype.c=function(a,d){if(d)this.i||(this.i=[]),this.i.push({keys:Array.prototype.slice.call(arguments,2),handler:d,Xa:0});else{for(var b=
a.keyCode,c=0;c<this.i.length;c++){var e=this.i[c],g=e.keys,h=g[e.Xa++];if(-1==h||h==b){e.Xa==g.length&&(this.i=null,e.handler(a));return}}this.i&&f();this.i=null}};h.prototype.Za=function(b){var c=this.H;switch(b.keyCode){case 577:c.lineEnd();case 65:c.moveX(1,!0,!0);case 73:c.openAction("INSERT",b);break;case 83:""!=c.d().content&&c.openRunAction("DELETE",b,c.aPos);c.openAction("INSERT",b);break;case 591:c.lineStart();c.openAction("INSERT",b);c.action.handler(new a(b.wb,"Enter"));c.moveY(-1);break;
case 79:c.lineEnd(!0);c.openAction("INSERT",b);c.action.handler(new a(b.wb,"Enter"));break;case 85:c.openRunAction("UNDO",b);break;case 1106:c.openRunAction("REDO",b);break;case 68:c.openAction("DELETE",b);break;case 89:c.openAction("YANK",b);break;case 80:c.suppressEvent(),c.moveX(1,!1,!0),c.unsuppressEvent();case 592:c.openRunAction("PUT",b);break;case 600:if(!this.Z(-1))break;case 88:if(""==c.d().content){f();break}c.openRunAction("DELETE",b,c.aPos);break;case 586:c.openRunAction("JOIN_LINES",
b);break;case 86:case 598:c.openAction("VISUAL",b);c.action.handler(b);break;case 512+n:case 698:this.k=new d(c,":");this.k.handler(b);break;case 700:case 702:c.openAction("SHIFT_LINES",b)}};h.prototype.Z=function(a,d){var c=this.H,b=c.X,e=c.Y;c.moveX(a,d,c.pSpace);return c.X==b&&c.Y==e?(f(),!1):!0};h.prototype.va=function(a){var d=this.H,c=this.ya,b=d.Y+c.panY;d.moveY(a);b!=d.Y+c.panY||0<a&&!c.EOF||f()};h.prototype.bb=function(a){if(this.ja)a.preventDefault(),this.c(a);else{var d=this,b=!0;switch(a.keyCode){case 734:this.c(a,
function(a){a.target.U.select(a.key);a.cancel();d.ja=!1},-1);break;case 48:if(!this.i){b=!1;break}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:var e=a.key,f=function(a){var b=a.ModKeys;switch(a.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e+=a.key,b=!0}b?(d.c(a,f,-1),a.cancel()):(a.Aa=Number(e),c.Info("Count is: "+e),d.ja=!1)};this.c(a,f,-1);break;default:b=!1}(this.ja=b)&&a.cancel()}};h.prototype.Ba=function(a){var c=a.keyCode;
if(this.o&&!a.ModKeys)return this.c(a),this.o=!1,!0;var b=this.H,e=b.feeder,g=!0;switch(c){case 8:this.Z(-1,!0);break;case 72:this.Z(-a.count);break;case 76:this.Z(a.count);break;case 173:case 189:case 75:this.va(-a.count);break;case 13:case 74:this.va(a.count);break;case 1094:if(e.firstBuffer.nextLine.placeholder){f();break}e.pan(void 0,e.moreAt);e.softReset();b.moveY(-b.Y);break;case 1090:if(0==e.panY){f();break}e.pan(void 0,-e.moreAt);e.softReset();b.moveY(-b.Y);e.EOF||b.moveY(e.moreAt);break;
case 584:break;case 588:break;case 48:b.lineStart();break;case 566:b.lineStart();break;case 564:b.lineEnd(b.pSpace);break;case 583:b.moveY(Number.MAX_VALUE);b.moveX(Number.MAX_VALUE,!0);break;case 565:var h=this.Wa.contentAnalyzer,c=h.bracketAt(b.aPos);if(-1==c.open){f();break}b.moveTo(c.selected==c.close?c.open:c.close);break;case 596:case 84:this.o=!0;this.c(a,function(d){var c=b.X;b.openRunAction("TO",a,d);b.X<c?b.moveX(1):c<b.X&&b.moveX(-1)},-1);break;case 582:case 70:this.o=!0;this.c(a,function(c){b.openRunAction("TO",
a,c)},-1);break;case 87:case 599:case 66:case 578:b.openRunAction("WORD",a);break;case 73:if(!b.action){g=!1;break}h=this.Wa.contentAnalyzer;this.o=!0;this.c(a,function(a){var c=h.wordAt(b.aPos);a.v=c},87);var c=function(a){var c=h.bracketIn("(",b.aPos);a.v=c},e=function(a){var c=h.bracketIn("{",b.aPos);a.v=c},k=function(a){var c=h.bracketIn("[",b.aPos);a.v=c};this.c(a,c,560);this.c(a,c,569);this.c(a,k,219);this.c(a,k,221);this.c(a,e,731);this.c(a,e,733);this.c(a,function(a){var c=h.quoteIn("'",b.aPos);
a.v=c},222);this.c(a,function(a){var c=h.quoteIn('"',b.aPos);a.v=c},734);break;case 71:this.o=!0;this.c(a,function(){b.moveY(-Number.MAX_VALUE);b.moveX(-Number.MAX_VALUE,!0)},71);this.c(a,function(){b.openRunAction("PRINT_HEX",a)},56);this.c(a,function(){b.action&&f()},85);this.c(a,function(){b.action&&f()},597);break;case 590:case 78:b.openRunAction("FIND",a);break;case 191:this.o=!0;this.k=new d(b,"/");this.k.handler(a);break;default:g=!1}return g};h.prototype.handler=function(a,c){if(!(2116==c.keyCode||
112<c.keyCode&&123>=c.keyCode)){if(c.Escape){var b=!1;this.o=!1;this.i?(b=!0,this.i=null):this.k&&(b=!0,this.k.dispose(),this.k=null);if(b){f();return}}if(this.k){if(this.k.handler(c)){this.k.dispose();this.o=!1;this.k=null;return}if(c.canceled)return}b=this.H;if(!this.o&&(!b.action||b.action.allowMovement)&&(this.bb(c),c.canceled))return;if(b.action)if(c.Escape)c.preventDefault(),b.closeAction();else{if(b.action.allowMovement){var d=!this.i;this.Ba(c);if(d&&this.i){c.preventDefault();return}}b.action.handler(c)&&
b.closeAction()}else c.preventDefault(),this.Ba(c)||this.Za(c)}};v(a.prototype,"target",function(){return this.mb});v(a.prototype,"key",function(){return this.Ga});v(a.prototype,"keyCode",function(){return this.M});v(a.prototype,"ModKeys",function(){return this.Ja});v(a.prototype,"Escape",function(){return this.Da});v(a.prototype,"canceled",function(){return this.xa});v(a.prototype,"range",function(){var a=this.v;return a&&-1==a.open&&-1==a.close?null:a});v(a.prototype,"count",function(){return this.Aa});
a.prototype.kMap=function(a){return this.M==k(a)};a.prototype.cancel=function(){this.preventDefault();this.xa=!0};a.prototype.preventDefault=function(){this.ha&&this.ha.preventDefault()};e[1](2,"Controls",h);e[1](2,"ActionEvent",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a,b){if(!a)throw Error("Invalid argument");a=k(a);var d=a.element;if(!d||"TEXTAREA"!=d.nodeName)throw Error("This element is not compatible for VimArea");for(var g in s){var h=s[g];if(h.stage.element==d)return f.Info("Instance exists"),h}a.setAttribute(new e("vimarea",1));this.stage=a;this.rows=d.rows;this.cols=d.cols;this.W=!1;var m=this;this.pa=[new c("Focus",function(){m.W=!0}),new c("Blur",function(){m.W=!1})];if(b){var n=d.value;this.nb(function(){m.ta(n)})}else this.ta(d.value);
this.ia=x++;s[this.ia]=this}function h(a,c){return function(b){a.W=!0;b=b||window.event;b.keyCode?code=b.keyCode:b.which&&(code=b.which);c(a,new q(a,b))}}var g=S("Components.Vim"),k=U("Dandelion.IDOMElement"),e=U("System.utils.DataKey"),c=U("System.utils.EventKey"),d=U("System.Cycle"),f=U("System.Debug"),n=U("Components.Vim.State.Registers"),b=U("Components.Vim.Syntax.Analyzer"),m=g[0]("LineFeeder"),u=g[0]("StatusBar"),r=g[0]("Controls"),q=g[0]("ActionEvent"),D=g[0]("Message"),s=[],x=0;a.prototype.nb=
function(a){function b(){f.value+=e();++k;m==f.scrollHeight?d.next(b):(n.rows=k,n.cols=g,a())}function c(){f.value+=e();if(h==f.scrollWidth)d.next(c);else{var a="";--g;for(var m=0;m<g;m++)a+=".";f.value=a;f.style.whiteSpace="";e=function(){return"\n"+a};b()}}function e(){return"Please wait while Vim;Re is testing for screen dimensions"[g++]||"."}var f=this.stage.element;f.value="";var g=0;f.style.whiteSpace="nowrap";var h=f.scrollWidth;c();var m=f.scrollHeight,k=0,n=this};a.prototype.select=function(a){if(this.W){var b=
this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.ta=function(a){function e(){z.init(A.statusText);var a=z.linesOccupied;g.value=s.render(a-1,k-a)+"\n"+z.render(0,a<k?a:k);f.G=!1;f.select(s.cursor.position)}var f=this;this.content=a;var g=this.stage.element,k=this.rows,q=this.cols,s=new m(k-1,q),x=new b(s);s.init(a+"\n");var z=new m(k,q);z.setRender(!1);s.cursor.Vim=this;z.cursor.Vim=this;var A=new u(q);A.stamp(-18,function(){return s.lineStat});A.stamp(-3,function(){return D(s.docPos)});
A.stamp(0,function(){return s.cursor.message});z.init(A.statusText);s.dispatcher.addEventListener("SelectionChanged",function(){f.select(s.cursor.position)});s.dispatcher.addEventListener("VisualUpdate",e);g.value="Please wait ...";d.delay(e,70);this.F=e;this.contentFeeder=s;this.contentAnalyzer=x;this.statusFeeder=z;this.statusBar=A;this.U=new n;this.a=s.cursor;this.G=!0;d.perma("VimCursorBlinkCycle"+g.id,function(){f.select(!f.a.blink||(f.G=!f.G)?f.a.position:{start:0,end:0})},600);a=new r(this);
this.pa.push(new c("KeyDown",h(this,a.handler.bind(a))));this.stage.addEventListeners(this.pa)};a.prototype.dispose=function(){var a=this.stage,b=this.pa,c=this.contentFeeder,e=a.element.id;f.Info("Destroy instance: "+e);c.dispatcher.removeEventListener("VisualUpdate",this.F);a.removeAttribute("data-vimarea");d.permaRemove("VimCursorBlinkCycle"+e);for(var g in b)a.removeEventListener(b[g]);a.element.value=this.content;delete s[this.ia]};v(a.prototype,"index",function(){return this.ia+1});v(a,"Instances",
function(){var a=[],b;for(b in s)a.push(s[b]);return a});g[1](2,"VimArea",a)})();})();
