(function(){function p(a,g){a.prototype=Object.create(g.prototype);a.prototype.constructor=a}function u(a,g,f){Object.defineProperty(a,g,{get:f,set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:g})})}function x(a,g){Object.defineProperty(a,"propagating",{get:g,set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:"propagating"})})}
function E(a,g,f){Object.defineProperty(a,g,{get:function(){return f},set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:g})})}function BotanEvent(a,g){var f=!1,k=!1;E(this,"propagate",function(){k||(f=!0);k=!0});E(this,"stopPropagating",function(){f=!1});E(this,"type",a);x(this,function(){return f});E(this,"data",g);this.setTarget=function(a){E(this,"target",a);this.setTarget=void 0}.bind(this)}
function L(){function a(){this.ga.propagate();for(var a in this.stack)if(this.ga.propagating)this.stack[a](this.ga);this.ga.stopPropagating()}function g(a){f[a]||(f[a]=[]);return f[a]}var f={},k=this;this.addEventListener=function(a,c){var b=g(a);b[b.length]=c};this.removeEventListener=function(a,c){var b=g(a),h=b.indexOf(c);0>h||delete b[h]};this.dispatchEvent=function(d){var c=g(d.type);d.setTarget&&d.setTarget(k);setTimeout(a.bind({ga:d,stack:c}),0)}}function M(){L.call(this)}M.prototype=[];
var N={},O={},Q={},R=window.BotanJS,BotanJS=null,S=null,U=null;R&&(BotanJS=R.sg[0],S=R.sg[1],U=R.sg[2]);BotanJS=BotanJS||function(){var a=0,g=[],f=[],k=new L,d={write:function(a){g[g.length]=a}};E(d,"read",function(){return g[a++]});E(d,"end",function(){return g.length<=a});E(k,"log",d);E(k,"define",function(a){f[f.length]=a});E(k,"getDef",function(){return f.slice()});return k}();
S=S||function(a){if(O[a])return O[a];for(var g=a.split("."),f=g.length,k=N,d=0;d<f;d++)k[g[d]]=k[g[d]]||{},k=k[g[d]];k.Xa=[];nsObj=new M;nsObj[1]=function(a,b,h){this.m[b]||(this.m[b]=[a,h],a=new BotanEvent("NS_EXPORT",{name:this.Q+"."+b,type:a}),BotanJS.dispatchEvent(a))}.bind({m:k,Q:a});nsObj[0]=function(a){if(!this.m[a])throw Error("["+this.Q+"] Invoke failed: "+a+" does not exists");return this.m[a][1]}.bind({m:k,Q:a});nsObj[10]=function(a,b){this.Xa[a]=b}.bind(k);nsObj[11]=function(a,b){throw Error("["+
this.Q+(b?"."+b:"")+"] "+a);}.bind({Q:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return O[a]=nsObj};
U=U||function(a,g){var f=a.replace(".*","");O[f]&&O[f].dispatchEvent(new BotanEvent("NS_IMPORT",c));if(!g&&Q[a])return Q[a];for(var k=a.split("."),d=k.length,c=N,f=!1,b=0;b<d;b++){if("*"==k[b]){f=!0;break}c=c[k[b]];if(!c)throw Error("No such class: "+a);}if(c instanceof Array&&"*"!=k[b])return f=null,f=10==c[0]?c[1]():c[1],Q[a]=f;k={};for(b in c)d=c[b],d instanceof Array&&(f&&2==d[0]?k[b]=d[1]:3==d[0]?k[b]=d[1]:0==d[0]?Object.defineProperty(k,b,{get:function(){return this.m[this.c][1]}.bind({c:b,
m:c}),set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:b})}):1==d[0]?Object.defineProperty(k,b,{get:function(){return this.m[this.c][1]()}.bind({c:b,m:c}),set:function(b){this.m[this.c][1](b)}.bind({c:b,m:c})}):10==d[0]&&Object.defineProperty(k,b,{get:d[1],set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:b})}));return Q[a]=k};window.BotanJS={};window.BotanJS.version="1.0.0b";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return U(a)}catch(g){if(R)return R["import"](a);throw g;}};window.BotanJS.sg=[BotanJS,S,U];BotanJS.define("System.utils.IKey");
(function(){function a(f,k){f&&"string"!=typeof f||(this.keyName=f,this.keyValue=k instanceof a?k:void 0!=k?String(k):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var g=S("System.utils");a.prototype.keyName="";a.prototype.keyValue="";E(a,"quickDef",function(){var f=arguments.length;if(0!=f%2)g[11]("Invalid Definition Count","IKey");for(var k=[],d=0;d<f;d+=2)k[k.length]=new a(arguments[d],arguments[d+1]);return k});g[1](2,"IKey",a)})();BotanJS.define("System.utils.Perf");
(function(){for(var a=S("System.utils.Perf"),g=[],f=0;256>f;f++)g[f]=(16>f?"0":"")+f.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,d=4294967295*Math.random()|0,c=4294967295*Math.random()|0,b=4294967295*Math.random()|0;return g[a&255]+g[a>>8&255]+g[a>>16&255]+g[a>>24&255]+"-"+g[d&255]+g[d>>8&255]+"-"+g[d>>16&15|64]+g[d>>24&255]+"-"+g[c&63|128]+g[c>>8&255]+"-"+g[c>>16&255]+g[c>>24&255]+g[b&255]+g[b>>8&255]+g[b>>16&255]+g[b>>24&255]});a[1](3,"CountSubstr",function(a,d){if(0>=
d.length)return a.length+1;for(var c=0,b=a.indexOf(d);0<=b;b=a.indexOf(d,b))c++,b++;return c});a[1](3,"ArrayReverse",function(a){for(var d=null,c=a.length,b=null,d=0,b=c-1;d<b;d+=1,--b){var c=a[d],h=a[b],c=c^h,h=h^c,c=c^h;a[d]=c;a[b]=h}})})();BotanJS.define("System.Global");
(function(){var a=S("System.Global"),g=Boolean(document.all),f=window.allowed_origins||[],k=window.location.href.match(/^https:\/\//),d=navigator.userAgent,d=Boolean(~d.indexOf("Android")||~d.indexOf("webOS")||~d.indexOf("iPhone")||~d.indexOf("iPad")||~d.indexOf("iPod")||~d.indexOf("BlackBerry")||~d.indexOf("Windows Phone"));a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",g);a[1](0,"ALLOWED_ORIGINS",f);a[1](0,"SECURE_HTTP",k);a[1](0,"MOBILE",d)})();BotanJS.define("Dandelion");
(function(){function a(){if(m)return!0;try{return m=U("Dandelion.IDOMElement"),!0}catch(b){}return!1}function g(b,e){if(e&&a()){for(var q=b.length,h=[],c=0;c<q;c++)h[c]=m(b[c]);return h}return b}function f(b,e){b&&e(b)&&b.parentNode&&f(b.parentNode,e)}function k(b,e){return e(b)?b:b.parentNode&&k(b.parentNode,e)}function d(b){return document.createTextNode(b)}function c(a,h,c,m,d){a=document.createElement(a||"div");h&&(a.id=h);c&&(e?a.className=c:a.setAttribute("class",c));if(d)if(d instanceof Array)for(var f in d)a.setAttribute(d[f].keyName,
d[f].keyValue);else d instanceof q&&a.setAttribute(d.keyName,d.keyValue);m&&b(a,m);return a}function b(e,a){if(a instanceof Array)for(var q=a.length,h=0;h<q;h++)a[h]&&b(e,a[h]);else"string"==typeof a?e.appendChild(d(a)):a&&e.appendChild(a)}var h=S("Dandelion"),e=U("System.Global.IE"),q=U("System.utils.IKey"),m;h[1](3,"wrap",c);h[1](3,"wrapc",function(b,e,a){return c(!1,!1,b,e,a)});h[1](3,"wrape",function(b,e){return c(!1,!1,!1,b,e)});h[1](3,"wrapne",function(b,e,a){return c(b,!1,!1,e,a)});h[1](3,
"wrapna",function(b,e){return c(b,!1,!1,!1,e)});h[1](3,"textNode",d);h[1](3,"bubbleUp",k);h[1](3,"chainUpApply",f);h[1](3,"id",function(b,e){var q=document.getElementById(b);return q?e&&a()?m(q):q:q});h[1](3,"tag",function(b,e,a){a=void 0===a?document:a;return g(a.getElementsByTagName(b),e)});h[1](3,"name",function(b,e,a){a=void 0===a?document:a;return g(a.getElementsByName(b),e)});h[1](3,"glass",function(b,e,a){a=void 0===a?document:a;return g(a.getElementsByClassName(b),e)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,d){f.call(this,a,d);this.type=a.toLowerCase();this.handler=d}var g=S("System.utils"),f=g[0]("IKey");p(a,f);a.prototype.type="";a.prototype.handler=null;g[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(d,c){if(d instanceof a)return d;if(c)this.addEventListener=this.addEventListener.bind(d),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(d),this.removeEventListener=this.removeEventListener.bind(d);else{if(d)return new a(d,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function g(){}var f=S("Dandelion"),k=U("System.utils.EventKey");g.prototype.indexOf=function(a){for(var c=this.length,b=0;b<c;b++){var h=this[b];if(h.type==
a.type&&h.handler==a.handler)return b}return-1};p(g,Array);a.prototype.hasListener=function(a){return a instanceof k&&this.l&&-1!=this.l.indexOf(a)?this.l[this.l.indexOf(a)]:null};a.prototype.addEventListener=function(a,c){var b;if("string"==typeof a&&c)b=new k(a,c);else if(a instanceof k)b=a;else return!1;if(this.l)if(0>this.l.indexOf(b))this.l.push(b);else return!1;else this.l=new g,this.l[0]=b;this.addEventListener?this.addEventListener(b.type,b.handler,!1):this.attachEvent?this.attachEvent("on"+
b.type,b.handler):this["on"+b.type]=b.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var c in a)this.addEventListener(a[c])};a.prototype.removeEventListener=function(a,c){c&&(a=new k(a,c));this.l&&delete this.l[this.l.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};f[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(b){b=typeof b;return"number"==b?f:"string"==b?g:k}function g(b,e){return b.nodeName==e}function f(b,e){return b.nodeType==e}function k(){return!1}function d(b,a){if(b instanceof d)return b;if(a)e.call(this,b,!0),this.getDAttribute=this.getDAttribute.bind(b),this.loot=this.loot.bind(b),this.foreach=this.foreach.bind(b),this.reverseChild=this.reverseChild.bind(b),this.clear=this.clear.bind(b),this.first=this.first.bind(b),this.last=this.last.bind(b),this.contains=this.contains.bind(b),
this.style=b.style,this.hasAttribute=function(){}.bind(b),this.removeAttribute=function(b){this.removeAttribute(b)}.bind(b),this.element=b,this.setAttribute=this.setAttribute.bind(b);else{if(b&&void 0!=b.nodeType&&1==b.nodeType)return new d(b,!0);if(void 0===b)return new d(h(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var c=S("Dandelion"),b=U("System.utils.IKey");U("System.utils.Perf");var h=c[0]("wrap"),e=c[0]("IDOMObject");p(d,e);d.prototype.setAttribute=function(e,
a){if(e instanceof b)this.setAttribute(e.keyName,e.keyValue);else if(e instanceof Array)for(var h in e)e[h]instanceof b&&this.setAttribute(e[h].keyName,e[h].keyValue);else this.setAttribute(e,a)};d.prototype.loot=function(b){for(var e=b.childNodes;e.length;)this.appendChild(b.removeChild(e[0]))};d.prototype.clear=function(){for(var b=this.childNodes;b.length;)this.removeChild(b[0])};d.prototype.getDAttribute=function(b){return(b=this.getAttribute("data-"+b))&&decodeURIComponent(b)};d.prototype.foreach=
function(b,e){for(var a=Array.apply([],this.childNodes),h=a.length,c=0;c<h;c++)a[c].nodeType==b&&e(a[c],this)};d.prototype.first=function(b,e){for(var h=this.childNodes,c=h.length,d=null,f=a(b),k=0;k<c;k++)if(f(h[k],b)&&(void 0===e||e(h[k],this))){d=h[k];break}return d};d.prototype.last=function(b,e){for(var h=this.childNodes,c=null,d=a(b),f=h.length-1;-1<f;f--)if(d(h[f],b)&&(void 0===e||e(h[f],this))){c=h[f];break}return c};d.prototype.contains=function(b){return b.parentElement?b==this?!0:this.contains(b.parentElement):
!1};d.prototype.aKeys=function(){for(var e=[],a=this.element.attributes,h=a.length,c=0;c<h;c++)e.push(new b(a[c].name,a[c].value));return e};d.prototype.reverseChild=function(){for(var b=this.childNodes.length-1;-1<--b;)this.appendChild(this.childNodes[b])};c[1](2,"IDOMElement",d)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,d){f.call(this,"data-"+a,d?encodeURIComponent(String(d)):"")}var g=S("System.utils"),f=g[0]("IKey");p(a,f);g[1](2,"DataKey",a)})();BotanJS.define("System.utils");
(function(){var a=S("System.utils"),g=U("System.Global");a[1](3,"objGetProp",function(a,k,d){if(a&&a[k]){var c=a[k].constructor.toString().match(/function ([^\(]+)/);if(c&&2==c.length&&c[1].toUpperCase()==d.toUpperCase())return a[k]}return null});a[1](3,"objSearch",function(a,k,d){for(var c in a)if(k(a[c]))return a[c][d]||a[c];return null});a[1](3,"objMap",function(a,k){for(var d in a)a[d]=k(a[d])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?g.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(g.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.O=!1;this.loop=function(){for(var k in this.steppers)this.steppers[k]();a++};u(this,"count",function(){return a})}var g=S("System");a.prototype.putStepper=function(a){var k=this.steppers.length;this.steppers[k]=a;return k};a.prototype.start=function(){this.O||(this.id=setInterval(this.loop.bind(this),0),this.O=!0)};a.prototype.stop=function(){this.O&&(this.O=!1,clearInterval(this.id))};a.prototype.steppers=[];u(a.prototype,"started",function(){return this.O});
g[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=S("System.Log"),g=[];a[1](3,"writeLine",function(a,k){k=void 0===k?16:k;var d=!1,c;for(c in g)g[c](a,k),d=!0;!d&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var k=-1;g[k=g.length]=a;return k});a[1](3,"removeHandler",function(a){delete g[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){k&&f.writeLine(Array.prototype.join.call(arguments," "),f.INFO)}var g=S("System.Debug"),f=U("System.Log"),k=U("System.Global").debug,d=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());g[1](3,"Error",function(a){d&&f.writeLine(a.name+"\n\t"+a.message+"\n\t"+a.stack,f.ERROR)});g[1](3,"Info",a);g[1](3,"turnOff",function(a){"info"==a?k=!1:"error"==a&&(d=!1)});g[1](3,"turnOn",function(a){"info"==a?k=!0:"error"==a&&(d=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(b){b.target.removeEventListener("NS_IMPORT",a);b=U("System.Cycle.TICK",!0);b!=c&&b.wb?(k.Info("[System.Cycle] Global Tick exists"),c=null):(k.Info("[System.Cycle] Creating global Tick"),c.start())}var g=S("System.Cycle");U("System.utils");var f=U("System.Tick"),k=U("System.Debug"),d=[],c=new f;c.putStepper(function(){var b=(new Date).getTime(),a;for(a in d){var e=d[a];if(e&&b>e[1]){try{e[0]()}catch(c){k.Error(c);delete d[a];continue}e[2]?delete d[a]:e[1]=b+e[4]}}});g.addEventListener("NS_IMPORT",
a);g[1](3,"next",function(b){var a=[];a[0]=b;a[1]=0;a[2]=!0;d[d.length]=a});g[1](3,"delay",function(b,a){var e=[];e[0]=b;e[1]=(new Date).getTime()+a;e[2]=!0;d[d.length]=e});g[1](3,"perma",function(b,a,e){for(var c in d)if(d[c][3]==b)return!1;c=[];c[0]=a;c[1]=(new Date).getTime()+e;c[2]=!1;c[3]=b;c[4]=e;d[d.length]=c});g[1](3,"permaRemove",function(b){for(var a in d)d[a][3]==b&&delete d[a]});g[1](10,"TICK",function(){return c})})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.ca={}}function g(a,c){this.pa=a+"";this.newLine=Boolean(c)}var f=S("Components.Vim.State"),k=U("System.Debug");g.prototype.newLine=!1;g.prototype.toString=function(){return this.pa};g.prototype.indexOf=function(a,c){return this.pa.indexOf(a,c)};u(g.prototype,"length",function(){return this.pa.length});a.prototype.Ua=function(a){this.ca['"']=a};a.prototype.yank=function(a,c){var b=new g(a,c);this.Ua(b);this.ca[this.N||0]=b;this.N=!1};a.prototype.change=function(a,c){var b=
new g(a,c);this.Ua(b);for(var h=this.ca,e=9;1<e;e--)void 0!=h[e-1]&&(h[e]=h[e-1]);h[1]=b;this.N=!1};a.prototype.get=function(a){a||0===a||(a=this.N||'"');this.N=!1;return this.ca[a]};a.prototype.select=function(a){k.Info("Selecting Register: "+a);this.N=a};f[1](2,"Registers",a)})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var c=0;c<k;c++)for(var b=f[c],h=b.length,e=0;e<h;e++){var q=b[e];if(q[0]<=a&&a<=q[1]){a=b;break a}}a=[]}this.rb=a}var g=S("Components.Vim.Syntax"),f=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]],[[32,32],[9,9]]],k=f.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var c=this.rb,b=c.length;a=a.charCodeAt(0);for(var h=0;h<b;h++){var e=c[h];if(e[0]<=
a&&a<=e[1])return!0}return!1};g[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.Fa=this.Qa=this.V=this.aa=-1;this.Ka=null}function g(a){this.W=a;this.fa={}}function f(b,e){if(!e)throw Error("Parent not found");var c=new a;c.Fa=e[2];c.aa=e[0];c.V=e[1];if(-1<e[3]){var m=b.find(e[3]);c.Ka=f(b,m)}return c}function k(a,b){for(var q=b.length,m=a.split("\n"),n=m[0],m=m[1],d=[],k=[],f=0,g=[],w=n.length,y=m.length,z=0;z<q;z++){var t=b.substr(z,y);if(b.substr(z,w)==n)d[f]=z,f++,z+=w-1;else if(t==m){t=z;if(0==f)k.push(t);else{var C=[];C[0]=d[--f];C[1]=t;C[2]=
f;C[3]=0<f?d[f-1]:-1;g.push(C)}z+=y-1}}k.length&&c.Info('Unmatched opening "'+n+'"@'+k.join(", "));0<f&&c.Info('Unmatched closing "'+m+'"@'+d.slice(0,f));this.Ia=g}var d=S("Components.Vim.Syntax"),c=U("System.Debug"),b=d[0]("Word");k.prototype.find=function(a,b){void 0==b&&(b=0);for(var c=this.Ia,m=c.length,n=0;n<m;n++){var d=c[n];if(d[b]==a)return d}return null};g.prototype.bracketAt=function(b){var e=this.W.content,c=1,m=null,n=e[b];switch(n){case "{":c=0;case "}":m=this.I("{\n}");break;case "[":c=
0;case "]":m=this.I("[\n]");break;case "(":c=0;case ")":m=this.I("(\n)");break;case "/":if("*"==e[b-1]){n="*/";b--;break}else if("*"==e[b+1]){n="/*";break}return new a;case "*":if("/"==e[b-1]){n="/*";b--;break}else if("/"==e[b+1]){n="*/";break}return new a;default:return new a}if(!m)switch(n){case "/*":c=0;case "*/":m=this.I("/*\n*/");break;default:return new a}e=m.find(b,c);m=f(m,e);m.Qa=b;return m};g.prototype.bracketIn=function(b,e){var c="{[(".indexOf(b);0>c&&(c="}])".indexOf(b));if(0>c)throw Error("Unsupported bracket: "+
b);for(var m=this.I("{[("[c]+"\n"+"}])"[c]),n=m.Ia,d=n.length,k=null,c=0;c<d;c++){var g=n[c];g[0]<=e&&e<=g[1]&&(k&&k[2]<g[2]||!k)&&(k=g)}if(k){m=c=f(m,k);do m.aa++,m.V--;while(m=m.parent);return c}return new a};g.prototype.I=function(a){if(this.fa[a])return this.fa[a];var b=new k(a,this.W.content);return this.fa[a]=b};g.prototype.reset=function(){this.fa={}};g.prototype.quoteAt=function(a){switch(this.W.content[a]){default:return{level:0,open:-1,close:-1}}};g.prototype.wordAt=function(c){var e=this.W.content,
q=e.length,m=c,n=c,d=new b(e[c]);if(0<c)for(;d.test(e[--m]););if(c<q)for(;d.test(e[++n]););c=new a;c.aa=0<m?m+1:0;c.V=n-1;return c};u(a.prototype,"parent",function(){return this.Ka});u(a.prototype,"open",function(){return this.aa});u(a.prototype,"close",function(){return this.V});u(a.prototype,"level",function(){return this.Fa});u(a.prototype,"selected",function(){return this.Qa});d[1](2,"Analyzer",g);d[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,d){this.prev=null;this.cols=a;this.next=d;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=8;d&&(d.prev=this)}var g=S("Components.Vim");U("System.Debug");var f=U("System.utils.Perf.CountSubstr");a.prototype.S=function(a,d,c){this.lineNum=c;if(void 0==a||""===a)this.lineNum=++c,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.S(a,d,c+1);else{this.placeholder=!1;var b="",h=!1,e=0,q=0,m=this.tabWidth-1;if(d){for(;e<this.cols-q*m;e++){var n=a[e];if(void 0===
n)break;if("\n"==n){h=!0;e++;break}else"\t"==n&&q++;b+=n}h||e!=this.cols||"\n"!=a[e]||(e++,h=!0)}else for(h=!0;;e++){n=a[e];if(void 0===n)break;if("\n"==n){e++;break}else"\t"==n&&q++;e<this.cols-q*m&&(b+=n)}this.next&&(this.next.br=h,this.next.S(a.substr(e),d,h?c+1:c));this.content=b}};a.prototype.toString=function(){var a=this.cols-f(this.content,"\t")*(this.tabWidth-1);return this.content.length<a?this.content+" ":this.content||" "};u(a.prototype,"nextLine",function(){for(var a=this,d=this.lineNum;(a=
a.next)&&a.lineNum==d;);return a});u(a.prototype,"visualLines",function(){for(var a=[this],d=this;(d=d.next)&&!d.br;)a.push(d);return a});g[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");
(function(){function a(){this.P=[];this.hb=[];this.Pa=this.Da=this.f=0}var g=S("Components.Vim.State");a.prototype.undo=function(){var a=this.f-1;return-1!=a&&this.P.length?this.P[this.f=a]:null};a.prototype.redo=function(){var a=this.P[this.f];return a?(this.f++,a):null};a.prototype.save=function(){this.Pa=this.f};a.prototype.record=function(a){this.P[this.f++]=a;this.hb[this.Da++]=a;delete this.P[this.f];a.id=this.Da};u(a.prototype,"changed",function(){return this.Pa!=this.f});g[1](2,"Recorder",
a)})();BotanJS.define("Components.Vim");VIMRE_VERSION="1.0.0b";
(function(){function a(a,b,h){if(void 0==a[b])return b;var e=0;return a[b].replace(/%\d+/g,function(){return h[e++]})}var g=S("Components.Vim"),f={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL  --",VISLINE:"-- VISUAL LINE --",REGISTERS:"--- Registers ---",WRITE:'"%1" %2L, %3C written',WAIT_FOR_INPUT:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",
UNDO_LIMIT:"Already at oldest change",REDO_LIMIT:"Already at newest change",NCHANGES:"%1 change(s); before #%2  %3",LINES_FEWER:"%1 fewer line(s)",LINES_MORE:"%1 more line(s)",LINES_YANKED:"%1 line(s) yanked",LINES_SHIFTED:"%1 line(s) %2ed %3 time(s)",NO_SHIFT:"No line to %1",SEARCH_HIT_BOTTOM:"search hit BOTTOM, continuing at TOP",SEARCH_HIT_TOP:"search hit TOP, continuing at BOTTOM",REPLACE:"%1 substitution(s) on %2 line(s)"},k={E35:"No previous regular expression",E37:"No write since last change (add ! to override)",
E481:"No range allowed",E492:"Not an editor command: %1",E486:"Pattern not found: %1",EX1:"Pattern Error( %1 )",EX2:"This pattern is causing infinite loop: %1",TODO:"%1 is not implemented yet",MISSING_FEATURE:'Sorry, I thought this command wasn\'t useful enough to implement. Please file a feature request titled "Implement %1" in github if you think this is important.'},d=new Audio("data:audio/ogg;base64,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");
g[1](3,"Message",function(c){return a(f,c,Array.prototype.slice.call(arguments,1))});g[1](3,"Error",function(c){return c+": "+a(k,c,Array.prototype.slice.call(arguments,1))});g[1](3,"Beep",function(){setTimeout(function(){d.pause();d.currentTime=0;d.play()},0)})})();BotanJS.define("Components.Vim.Actions.QUIT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var f=U("Components.Vim.Error");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=this.a;var d=a.Vim;if(a.rec.changed){a=f("E37");for(var d=this.a.feeder.firstBuffer.cols,c=a.length;c<d;c++)a+=" ";this.b=a}else return d.dispose(),!0};a.prototype.getMessage=function(){return this.b};g[1](2,"QUIT",
a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,k){this.a=a;this.ib=void 0==k?a.aPos:k;this.jb=this.Oa()}var g=S("Components.Vim.State");a.prototype.save=function(a,k,d){void 0==d&&(d=0);var c=this.a,b=c.feeder,h=this.ib-d,e=this.jb,q=this.Oa(),m=e;return function(){var n=b.content.substr(h,a);b.content=b.content.substring(0,h)+k+b.content.substring(h+a);a=k.length;k=n;c.PStart=m.c;c.PEnd=m.c+1;c.X=m.x;c.Y=m.y;c.pX=m.qb-1;b.panX=m.tb;b.panY=m.ub;b.pan();m=m==e?q:e}};a.prototype.Oa=function(){var a=this.a,a={c:a.PStart,
x:a.X,y:a.Y,qb:a.pX,tb:a.feeder.panX,ub:a.feeder.panY};0<a.x&&(--a.c,--a.x);return a};g[1](2,"Stator",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,k,d){if(void 0==a[k])return k;var c=0;return a[k].replace(/%\d+/g,function(){return d[c++]})}var g={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};S("Components.Vim.DateTime")[1](3,"String",function(f){return a(g,f,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(a,c){var e=a%10,q=a%100;if(1>=a)throw Error("Invalid number of Time units");return 2<=a&&4>=a?f(c[0],a):1==e&&11!=q?f(c[1],a):2<=e&&4>=e&&!(12<=q&&14>=q)?f(c[2],a):f(c[3],a)}var g=S("Components.Vim.DateTime"),f=g[0]("String"),k=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],d=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],c=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];g[1](3,"RelativeTime",function(b){var h=Math.round(.001*((new Date).getTime()-b.getTime()));if(31536E3<h)result=f("OverAYearAgo");else if(3952800<h)if(b=Math.round((h+1317600)/2635200),2<=b&&4>=b)result=f("XMonthsAgo_2To4",b);else if(5<=b&&12>=b)result=f("XMonthsAgo_5To12",b);else throw Error("Invalid number of Months");else if(2116800<=h)result=f("AboutAMonthAgo");else if(604800<=h)b=Math.round(h/604800),result=1<b?f("XWeeksAgo_2To4",b):f("AboutAWeekAgo");else{if(432E3<=h)switch(b.getDay()){case 1:b=
f("last Monday");break;case 2:b=f("last Tuesday");break;case 3:b=f("last Wednesday");break;case 4:b=f("last Thursday");break;case 5:b=f("last Friday");break;case 6:b=f("last Saturday");break;case 0:b=f("last Sunday");break;default:b=f("last Sunday")}else if(86400<=h)switch(b.getDay()){case 1:b=f("on Monday");break;case 2:b=f("on Tuesday");break;case 3:b=f("on Wednesday");break;case 4:b=f("on Thursday");break;case 5:b=f("on Friday");break;case 6:b=f("on Saturday");break;case 0:b=f("on Sunday");break;
default:b=f("on Sunday")}else b=7200<=h?a(Math.round(h/3600),k):3600<=h?f("AboutAnHourAgo"):120<=h?a(Math.round(h/60),d):60<=h?f("AboutAMinuteAgo"):a(1<h?h:2,c);result=b}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var g=S("Components.Vim.State"),f=U("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.Ca=a;this.nb=new Date;this.id=0};a.prototype.play=function(){this.Ca&&this.Ca()};u(a.prototype,"time",function(){return f(this.nb)});g[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.JOIN_LINES");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var f=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),d=U("Components.Vim.Beep");U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();var h=this.a,e=h.feeder,q,m,n,r;if(b)q=b.start;else{r=h.aPos;h.lineEnd(!0);n=new f(h);q=h.aPos;h.moveY(1);h.lineStart();
m=h.aPos;if(m<q)return h.moveTo(r),d(),!0;var D=e.content;r=e.content.substring(q,m);e.content=D.substring(0,q)+" "+D.substr(m)}e.pan();h.moveTo(q);e=new k;e.store(n.save(1,r));h.rec.record(e)};a.prototype.getMessage=function(){return this.b};g[1](2,"JOIN_LINES",a)})();BotanJS.define("Components.Vim.Actions.VERSION");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var f=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=":version\nVim;Re - Vim; Reverse Engineered for textarea v"+VIMRE_VERSION;a+="\n  + BotanJS - v1.0.0b\nProject home - https://github.com/tgckpg/BotanJS-vim";a+="\n  by \u659f\u914c\u9d6c\u5144 (penguin) - https://blog.astropenguin.net/";
a+="\n";for(var d=f("WAIT_FOR_INPUT"),c=this.a.feeder.firstBuffer.cols,b=a.length;b<c;b++)a+=" ";this.b=a+"\n"+d};a.prototype.getMessage=function(){return this.b};g[1](2,"VERSION",a)})();BotanJS.define("Components.Vim.Actions.TO");
(function(){function a(a){this.a=a;this.b="<TO COMMAND>";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var f=U("Components.Vim.Beep");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d){d.preventDefault();var c=this.a,b=c.feeder,h=c.e().lineNum,e=0;for(i=0;-1!=e&&i<h;i++)e=b.content.indexOf("\n",e+1);var q=b.content.indexOf("\n",e+1);0<h&&e++;h=e;e=d.key;d.kMap("Tab")&&(e="\t");if(1<e.length)f();else{var m=-1,m=a.kMap("t")||a.kMap("f")?
b.content.indexOf(e,c.aPos+1):b.content.lastIndexOf(e,c.aPos-1);h<=m&&m<q?c.moveTo(m):f()}};a.prototype.getMessage=function(){return this.b};g[1](2,"TO",a)})();BotanJS.define("Components.Vim.Actions.PUT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions"),f=U("Components.Vim.State.Stator"),k=U("Components.Vim.State.Stack"),d=U("Components.Vim.Message"),c=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var h=this.a.Vim.R.get();if(!h)return!0;var e=this.a,q=e.feeder,m=h.newLine;if(1<a.count){for(var n=h,r=1;r<a.count;r++)n+=h;h=n;n=
null}var n=c(h,"\n"),r=h.length,D=a.kMap("P")?0:-1;m&&(e.moveY(-D),e.lineStart());a=new f(e);var g=e.aPos;q.content=q.content.substring(0,g)+h+q.content.substring(g);q.pan();e.moveTo(0<n?g:g+r,!0);h=new k;if(m){var s=a.save(r,"");h.store(function(){s();e.moveY(D)})}else h.store(a.save(r,""));e.rec.record(h);n&&(this.b=d("LINES_MORE",n));e.moveX(-1);return!0};a.prototype.getMessage=function(){return this.b};g[1](2,"PUT",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(a){this.a=a;this.ka=0;this.h=a.aPos;this.Ja=this.a.feeder.panY;a.suppressEvent()}var g=S("Components.Vim.Actions"),f=U("System.Debug"),k=U("Components.Vim.State.Stator"),d=U("Components.Vim.State.Stack"),c=U("Components.Vim.Message"),b=U("Components.Vim.Beep"),h=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,c,m){a.preventDefault();if(!a.ModKeys){var n=a.target.R,r=this.a,
g=r.feeder;if(g.firstBuffer.next.placeholder&&2>g.content.length)return f.Info("Content is empty"),!0;var v=!1;if(void 0==c){v=!0;c=this.h;var s=r.aPos;if(this.h!=s)a.kMap("^")?c--:a.kMap("l")?r.moveX(-1):a.kMap("h")?c=s:a.kMap("j")?(m=!0,r.lineEnd(!0),c=r.aPos,r.moveY(-1),r.lineStart(),this.h=r.aPos):a.kMap("k")?(m=!0,r.moveY(1),r.lineEnd(!0),c=r.aPos,r.moveY(-1),r.lineStart()):this.h<s&&(c=s,r.moveTo(this.h));else if(a.kMap("d"))m=!0,r.lineEnd(!0),c=r.aPos,r.lineStart();else if(a.range)c=a.range.close,
r.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))c=r.aPos;else return b(),!0}}var s=g.content.slice(0,-1),w=c;a=r.aPos;a<w&&(w=r.aPos,a=c);c=s.substring(w,a+1);n.change(c,m);this.ka=h(c,"\n");g.content=s.substring(0,w)+s.substring(a+1)+"\n";g.pan(void 0,this.Ja<g.panY?this.Ja-g.panY:void 0);r.moveTo(w);a=new k(r,w);m=new d;var y=a.save(0,c);m.store(function(){y();r.moveX(1)});r.rec.record(m);return v}};a.prototype.getMessage=function(){return this.ka?c("LINES_FEWER",this.ka):
""};g[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(a){this.a=a;this.h=a.aPos;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var f=U("Components.Vim.Message"),k=U("Components.Vim.Beep"),d=U("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b,h){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var e=a.target.R,q=this.a,m=!1;if(void 0==b){m=!0;b=this.h;var n=q.aPos;if(this.h!=n)a.kMap("^")?b--:a.kMap("l")?
q.moveX(-1):a.kMap("h")?b=n:a.kMap("j")?(h=!0,q.lineEnd(!0),b=q.aPos,q.moveY(-1),q.lineStart(),this.h=q.aPos):a.kMap("k")?(h=!0,q.moveY(1),q.lineEnd(!0),b=q.aPos,q.moveY(-1),q.lineStart()):this.h<n&&(b=n,q.moveTo(this.h));else if(a.kMap("y"))h=!0,q.lineEnd(!0),b=q.aPos,q.lineStart();else if(a.range)b=a.range.close,q.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))b=q.aPos;else return k(),!0}}n=b;a=q.aPos;a<n&&(n=q.aPos,a=b);q.moveTo(n);a=q.feeder.content.substring(n,a+1);e.yank(a,
h);if(h=d(a,"\n"))this.b=f("LINES_YANKED",h);return m}};a.prototype.getMessage=function(){return this.b};g[1](2,"YANK",a)})();BotanJS.define("Components.Vim.Actions.BUFFERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var f=U("Dandelion"),k=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var d=U;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();f.tag("textarea");var b=this.a.Vim,h=d("Components.Vim.VimArea").Instances;a=":buffers";for(var e in h){var q=h[e],m=q.index+" ",n=q.contentFeeder.cursor,m=m+((q==b?"%a":"  ")+" "),m=m+
((n.rec.changed?"+":" ")+" "),m=m+('"'+q.stage.element.id+'" line '+(n.e().lineNum+1));a+="\n  "+m}b=k("WAIT_FOR_INPUT");h=this.a.feeder.firstBuffer.cols;for(e=a.length;e<h;e++)a+=" ";this.b=a+"\n"+b};a.prototype.getMessage=function(){return this.b};g[1](2,"BUFFERS",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.kb=new k(a);this.v=this.u=0;this.xa=!1;this.B("",!0);a=this.a.feeder.firstBuffer.cols;for(var h=c("INSERT"),e=h.length;e<a;e++)h+=" ";this.b=h}var g=S("Components.Vim.Actions"),f=U("Components.Vim.State.Stack"),k=U("Components.Vim.State.Stator"),d=U("System.Debug"),c=U("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.xa&&this.ba();this.ua()&&this.a.feeder.pan();this.b="";this.B("",!0);this.a.moveX(-1)};a.prototype.B=
function(a,c){if(c||!this.da){if(this.da){if(0==this.u&&0==this.q&&""===this.s)return;this.q<this.u&&(this.u=this.q);this.da.store(this.kb.save(this.v,this.s,-this.u));this.a.rec.record(this.da)}this.q=0;this.s="";this.da=new f}this.q<this.u&&(this.v=0,this.u=this.q);this.q+=a.length;this.v+=a.length};a.prototype.gb=function(a){var c=this.a,e=c.feeder;if(a.kMap("BS")||a.kMap("S-BS")){this.ba();if(0==c.X&&0==e.panY&&0==c.Y)return;a=c.aPos-1;this.q<=this.u&&(this.s=e.content.substr(a,1)+this.s);e.content=
e.content.substring(0,a)+e.content.substring(a+1);e.pan();c.moveX(-1,!0,!0);0<this.v&&this.v--;this.q--}else if(a.kMap("Del")||a.kMap("S-Del"))this.ba(),a=c.aPos,this.s+=e.content.substr(a,1),e.content=e.content.substring(0,a)+e.content.substring(a+1),e.pan();else return;e.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var c;a:switch(c=a.key,c){case "Tab":c="\t";break a;case "Enter":c="\n";break a}if(1!=c.length)this.gb(a);
else{a=this.a;var e=a.feeder,d=a.aPos,m="\n"!=e.content[d];e.content=e.content.substring(0,d)+c+e.content.substring(d);"\n"==c?(e.softReset(),e.pan(),a.moveY(1),a.lineStart(),this.Za(),this.xa=m):(this.ba(),e.pan(),a.moveX(1,!1,!0));e.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.B(c)}}};a.prototype.ba=function(){var a=this.w;if(this.w){d.Info("Realize Indentation: "+a);l=a[1];for(var c=a[0];c<l;c++)this.B(this.a.feeder.content[c]);this.s=a[2]+this.s;this.w=null}};a.prototype.Za=function(){for(var a=
this.w,c=this.ua(),e=this.a,q=e.feeder,m=e.aPos,n=q.content.lastIndexOf("\n",m-2),r=q.content.substring(n+1,m-1)||c;""==r&&0<n;)r=n,n=q.content.lastIndexOf("\n",r-2),r=q.content.substring(n+1,r-1);a=c?a[2]:"";for(c=m;-1!="\t ".indexOf(q.content[c]);c++)a+=q.content[c];for(n=0;-1!="\t ".indexOf(r[n]);n++);r&&(q.content=q.content.substring(0,m)+r.substr(0,n)+q.content.substring(c),q.softReset(),q.pan(),e.moveX(n,!1,!0),e=[],e[0]=m,e[1]=m+n,e[2]=a,this.w=e,d.Info("Phantom indent: "+e))};a.prototype.ua=
function(){var a=this.w;if(!a)return"";d.Info("Erase phantom indent: "+a);var c=this.a.feeder,e=c.content.substring(a[0],a[1]);c.content=c.content.substring(0,a[0])+c.content.substring(a[1]);this.w=null;return e};a.prototype.getMessage=function(){return this.b};g[1](2,"INSERT",a)})();BotanJS.define("Components.Vim.Actions.UNDO");
(function(){function a(a){this.a=a;this.t="UNDO COMMAND"}var g=S("Components.Vim.Actions"),f=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.t=f("NCHANGES","<TODO>",a.id,a.time)):this.t=f("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.t};g[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var g=S("Components.Vim.Actions");U("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var g=a.length,d=[],c=0;c<g;c++)d[c]="\n"==a[c]?"a":a.charCodeAt(c).toString(16),1==d[c].length?d[c]="0"+d[c]:0==d[c].length&&(d[c]="00");this.b=d.join(" ")};a.prototype.getMessage=function(){return this.b};g[1](2,"PRINT_HEX",a)})();BotanJS.define("Components.Vim.Actions.WRITE");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");var f=U("Components.Vim.Message"),k=U("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var c=this.a;a=c.Vim;a.content=c.feeder.content.slice(0,-1);a=f("WRITE",a.stage.element.id,k(a.content,"\n"),a.content.length);c.rec.save();for(var c=this.a.feeder.firstBuffer.cols,b=a.length;b<c;b++)a+=" ";
this.b=a};a.prototype.getMessage=function(){return this.b};g[1](2,"WRITE",a)})();BotanJS.define("Components.Vim.Actions.WORD");
(function(){function a(a){this.a=a;this.b="<WORD COMMAND>";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var g=this.a,d=g.feeder,c=g.Vim.contentAnalyzer,b=g.aPos,h=1;if(a.kMap("w")||a.kMap("W")){"\n"==d.content[b+1]&&b++;var e=c.wordAt(b);-1!=e.open&&(b=e.close+1)}if(a.kMap("b")||a.kMap("B")){if(0==b)return;h=-1;e=c.wordAt(b-1);-1!=e.open&&(b=e.open)}for(;-1!=" \t".indexOf(d.content[b]);)b+=
h;g.moveTo(b)};a.prototype.getMessage=function(){return this.b};g[1](2,"WORD",a)})();BotanJS.define("Components.Vim.Actions.SHIFT_LINES");
(function(){function a(a,b){this.a=a;this.h=a.aPos;this.b="<LINE_SHIFT>";this.Ra=a.e().lineNum;this.Ga=b.count-1;f.Info("Open shift: "+this.Ga+" line(s) from the cursor");this.Aa=b.kMap(">")?1:-1;f.Info("Direction is: "+(1==this.Aa?">":"<"));a.suppressEvent()}var g=S("Components.Vim.Actions"),f=U("System.Debug"),k=U("Components.Vim.Beep"),d=U("Components.Vim.State.Stator"),c=U("Components.Vim.State.Stack");U("Components.Vim.Error");var b=U("Components.Vim.Message"),h=U("System.utils.Perf.CountSubstr");
a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,q){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var m=this.a,n=m.feeder,r=!1,g=this.Aa,v=this.Ra,s=this.Ga,w=1;1<a.count&&(s+=a.count-1);var y=v;if(void 0==q){r=!0;q=this.h;var z=m.aPos;if(this.h!=z){y=v=0;s&&(z<q?v-=s-1:y+=s-1,console.log(v,y));z<q&&(q+=z,z=q-z,q-=z);for(var t=0;t<z;t++)"\n"==n.content[t]&&(y++,t<q&&v++)}else if(a.range){q=a.range.close;v=1;y=-1;for(t=0;t<q;t++)"\n"==
n.content[t]&&(y++,t<a.range.open&&v++);-1==y&&(v=y=0);y<v&&(y=--v);w=a.count}else if(!(0<g&&(a.kMap(">")||a.kMap("l"))||0>g&&(a.kMap("<")||a.kMap("h"))))return k(),!0}else{for(t=v=0;t<q;t++)"\n"==n.content[t]&&v++;y=this.Ra;w=a.count}y<v&&(v+=y,y=v-y,v-=y);var z=n.content.slice(0,-1),C=z.match(/^[\t ]+/gm),F="\t",H=n.firstBuffer.tabWidth;if(C){var I=C.length-1;if(1<I){f.Info("Guessing the tabstop:");for(var G=s=0,H=[],t=0;t<I;t++){var A=C[t],B=C[t+1],s=s+h(A,"\t"),G=G+h(A," "),A=B.length-A.length;
0!=A&&(A=0>A?-A:A,H[A]||(H[A]=0),H[A]++)}I=C=0;for(t in H)t=Number(t),A=H[t],C<A&&(C=A,I=t);G/=I;if(s<G)for(F="",t=0;t<I;t++)F+=" ";H=I;f.Info("\tTab count: "+s);f.Info("\tSpace count: "+G);f.Info("\ti.e. indent using "+JSON.stringify(F))}else f.Info("Not enough tabs to determine the tabstop, using default")}f.Info("Start: "+v,"End: "+y);var G="",C=0,I=!1,J=0;n.content="";s=0;A="";for(t=0;t<w;t++)A+=F;for(F=t=0;0<=t;t=z.indexOf("\n",t),F++)if(t++,!(F<v)){I||(I=!0,n.content=z.substring(0,t-1),J=n.content.length);
if(y<F)break;B=z.indexOf("\n",t);B=~B?z.substring(1<t?t:t-1,B):z.substring(1<t?t:t-1);1<t&&(n.content+="\n",G+="\n",C++);G+=B;if(""!==B){if(0<g)B=A+B;else{for(var T=0,K=0;T<w;T++){var P=B[K];if(" "==P)for(P=H+K++;K<P&&~"\t ".indexOf(B[K]);K++);else if("\t"==P)K++;else break}B=B.substring(K)}n.content+=B;C+=B.length;s++}}v=n.content.length;n.content+="\n";~t&&(n.content+=z.substring(t)+"\n");n.pan();m.moveTo(v);t=new d(m,J);v=new c;for(J++;~"\t ".indexOf(n.content[J]);J++);var V=t.save(C,G);v.store(function(){V();
m.moveTo(J);m.lineStart()});m.moveTo(J);m.rec.record(v);this.b=s?b("LINES_SHIFTED",s,0>g?"<":">",w):b("NO_SHIFT",0>g?"<":">");return r}};a.prototype.getMessage=function(){return this.b};g[1](2,"SHIFT_LINES",a)})();BotanJS.define("Components.Vim.Actions.REDO");
(function(){function a(a){this.a=a;this.t="REDO COMMAND"}var g=S("Components.Vim.Actions"),f=U("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(this.a.suppressEvent(),a.play(),this.a.unsuppressEvent(),this.t=f("NCHANGES","<TODO>",a.id,a.time)):this.t=f("REDO_LIMIT")};a.prototype.getMessage=function(){return this.t};g[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.FIND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}function g(a){for(var c="",e=a.length,d=1;d<e;d++)switch(a[d]){case "^I":c+="\t";break;case "\\":var m=a[++d];if(-1!="nrts.[]()^".indexOf(m))c+="\\"+m;else throw Error('Missing token impl: "'+m+'"');break;default:c+=a[d]}return new RegExp("("+c+")","gm")}var f=S("Components.Vim.Actions");U("System.Debug");var k=U("Components.Vim.Error"),d=U("Components.Vim.Message"),c=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=
function(a,h){a.preventDefault();if(h){if(2>h.length){if(1>c.length)return this.b=k("E35"),!0;h=c}c=h}if(1>c.length)return this.b=k("E35"),!0;var e;try{e=g(c)}catch(q){return this.b=k("EX1",q.message),!0}var m=this.a.feeder.content,n=this.a;h=n.aPos;for(var r,f,v,s=[],w;null!==(r=e.exec(m));){void 0==v&&(v=r.index);if(w==r.index)return this.b=k("EX2",c.slice(1).join("")),!0;if(h<r.index){f=r.index;break}s.push(r.index);w=r.index}this.b=c.join("");if(a.kMap("N")){if(f=s[s.length-2],void 0==f)for(this.b=
d("SEARCH_HIT_TOP");null!==(r=e.exec(m));)f=r.index}else void 0!=v&&void 0==f&&(f=v,this.b=d("SEARCH_HIT_BOTTOM"));void 0==f?this.b=k("E486",c.slice(1).join("")):n.moveTo(f)};a.prototype.getMessage=function(){return this.b};E(a,"Pattern",g);f[1](2,"FIND",a)})();BotanJS.define("Components.Vim.Actions.REPLACE");
(function(){function a(a){this.a=a;this.C=this.b="";this.Ma=0;this.ma=this.ma.bind(this);this.la=0;this.na=[];a.suppressEvent()}function g(a){for(var b="",c=a.length,n=[""],h=1;h<c;h++)switch(a[h]){case "^I":b+="\t";break;case "\\":h++;var d=a[h];if(-1!="$nrt\\".indexOf(d)){b+=JSON.parse('"\\'+d+'"');break}if(-1!="012345678".indexOf(d))n.push(b.length),b+=d;else{if("9"==d)throw Error("Back ref 9 is reserved for back ref 0");throw Error('Missing token impl: "'+tok+'"');}break;default:b+=a[h]}n[0]=
b;return n}var f=S("Components.Vim.Actions"),k=U("System.Debug"),d=U("Components.Vim.State.Stack"),c=U("Components.Vim.Error"),b=U("Components.Vim.Message");U("System.utils.Perf.CountSubstr");var h=f[0]("FIND");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d){a.preventDefault();var m,n;try{var r=d.indexOf("/",0),f=d.indexOf("/",r+1);if(-1==r)return this.b=c("MISSING_FEATURE","REPLACE %s"),!0;if(-1==f)m=h.Pattern(d),n=d;else{n=d.slice(r,f);m=h.Pattern(n);var v=
d.indexOf("/",f+1);this.C=-1==v?g(d.slice(f)):g(d.slice(f,v));this.Ma=this.C[0].length}}catch(s){return this.b=c("EX1",s.message),!0}k.Info("Replace: "+m+", [ "+this.C+" ]");r=this.a.feeder;m=r.content.slice(0,-1).replace(m,this.ma)+"\n";f=this.na.length;f||(this.b=c("E486",n.join("")));r.content=m;this.b=b("REPLACE",f,"<TODO>");this.B();r.pan();r.softReset();return!0};a.prototype.ma=function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1,-2),c=this.la+arguments[arguments.length-
2],n="",h=this.C[0],d=0;d<this.Ma;d++)var g=this.C.indexOf(d,1),n=-1==g?n+h[d]:n+b[h[this.C[g]]];b=n.length;this.la+=b-a.length;h=[];h[0]=a;h[1]=c;h[2]=b;this.na.push(h);return n};a.prototype.B=function(){var a=new d,b=this.na,c=b.length,n=this.a,h=n.feeder;a.store(function(){for(var a=h.content,e="",d=0,g=-1,f=0;f<c;f++){var k=b[f],t=k[1],C=k[2],F=k[0],H=F.length,e=e+(a.substring(d,t)+F),d=k[1]+C;k[0]=a.substr(t,C);k[1]=e.length-H;k[2]=H;-1==g&&(g=t)}e+=a.substring(d);h.content=e;n.moveTo(g);h.pan()});
n.rec.record(a)};a.prototype.getMessage=function(){return this.b};f[1](2,"REPLACE",a)})();BotanJS.define("Components.Vim.Actions.REGISTERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions");U("System.Debug");U("Components.Vim.Error");var f=U("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var d=a.target.R;a=":register\n"+f("REGISTERS");for(var c=0,b='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[c];void 0!=b;c++,b='"0123456789abcdefghijklmnopqrstuvwxyz-.:%/='[c]){var h=d.get(b);h&&(a+='\n"'+b+"   "+h.toString().replace("\t",
"^I").replace("\n","^J"))}d=f("WAIT_FOR_INPUT");b=this.a.feeder.firstBuffer.cols;for(c=a.length;c<b;c++)a+=" ";this.b=a+"\n"+d};a.prototype.getMessage=function(){return this.b};g[1](2,"REGISTERS",a)})();BotanJS.define("Components.Vim.Actions.EDITOR_COMMAND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var g=S("Components.Vim.Actions"),f=U("System.Debug"),k=U("Components.Vim.Error");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,c){a.preventDefault();var b=1,h="",e=[];if(-1!=".$%".indexOf(c[b]))h=c[b++];else for(;-1!="0123456789".indexOf(c[b]);b++)h+=c[b];var q="";if(-1!="/?".indexOf(c[b]))q=c[b];else for(var m=/\w/g,n=c[b];n=c[b];b++)if(n.match(m))q+=n;else break;m=!1;switch(q){case "s":case "su":case "substitute":m=
!0;e[1]="REPLACE";break;case "/":m=!0;e[1]="FIND";break;case "buffers":case "ls":e[1]="BUFFERS";break;case "w":case "write":e[1]="WRITE";break;case "q":case "quit":e[1]="QUIT";break;case "register":case "registers":e[1]="REGISTERS";break;case "ver":case "version":e[1]="VERSION";break;case "h":case "help":e[1]="HELP"}""!==h&&(m?e[0]=h:e[3]=k("E481"));e[2]=c.slice(b);if(e[3])return this.b=e[3],!0;if(!e[1])return this.b=k("E492",c.slice(1).join("")),!0;try{g[0](e[1])}catch(r){return this.b=k("TODO",
e[1]),!0}try{this.a.openRunAction(e[1],a,e[2],e[0]),this.b=this.a.message}catch(D){f.Error(D)}return!0};a.prototype.getMessage=function(){return this.b};g[1](2,"EDITOR_COMMAND",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.Na(a);this.b="";a.blink=!1;a.pSpace=!0}function g(a,b){if(0==b)return 0;for(var c=a.feeder,n=0,h=-1,d=c.content.indexOf("\n");0<=d&&!(h=d,n++,b<=n);d=c.content.indexOf("\n",d+1));c.EOF&&(d=h);c=c.content[d+1];void 0!=c&&"\n"!=c&&d++;return d}var f=S("Components.Vim.Actions"),k=U("System.Debug"),d=U("Components.Vim.Message"),c=f[0]("YANK"),b=f[0]("DELETE"),h=f[0]("SHIFT_LINES");a.prototype.Na=function(a){this.a=a;var b={lineNum:a.e().lineNum,X:a.X,aPos:a.aPos,sb:a.PStart};
b.pb=b.aPos-a.aX;a.suppressEvent();a.lineEnd(!0);b.ob=a.aPos;a.moveTo(b.aPos);a.unsuppressEvent();this.Sa=b};a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.blink=!0;a.pSpace=!1;a.updatePosition();a.feeder.wrap&&0<a.X&&(a.suppressEvent(),a.moveX(-1),a.moveX(1),a.unsuppressEvent())};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var f=this.a,m=f.feeder,n=null,r=!1;if(a.kMap("y"))n=new c(f);else if(a.kMap("d"))n=new b(f);else if(a.kMap("V")){if(1==this.n)return!0;
r=!0;this.n=1;this.b=d("VISLINE")}else if(a.kMap("<")||a.kMap(">"))n=new h(f,a);else if(a.kMap("v")){if(0==this.n)return!0;r=!0;this.n=0;this.b=d("VISUAL");f.updatePosition()}r&&m.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));if(-1==this.n)return k.Error(Error("Mode is undefined")),!0;r=this.Sa;if(n){f.suppressEvent();if(m=1==this.n)r.aPos<f.aPos?(f.lineEnd(!0),r.aPos=r.pb):(f.lineStart(),r.aPos=r.ob);if(n.constructor==b&&r.aPos<f.aPos){var D=f.aPos;f.moveTo(r.aPos,!0);r.aPos=D}n.handler(a,
r.aPos,m);n.constructor!=b&&f.moveTo(r.aPos);this.b=n.getMessage();n.dispose();f.unsuppressEvent();r.sb=f.PStart;return!0}a.range&&(f.suppressEvent(),a=a.range,f.aPos==r.aPos&&(f.moveTo(a.open,!0),this.Na(f),r=this.Sa),f.unsuppressEvent(),f.moveTo(a.close,!0));var v=f.aPos,n=m.firstBuffer;a=n.lineNum;var s=g(f,a),w=g(f,a+m.moreAt+1)-1;k.Info("Min aPos: "+s,"Max aPos: "+w);a=r.X;D=f.PStart;if(r.aPos<s)a=0,1==this.n&&(f.suppressEvent(),f.lineEnd(!0),D=f.PStart,f.moveTo(v,!0),f.unsuppressEvent());else if(w<
r.aPos){a=-2;r=0;do{if(n.placeholder)break;r<=m.moreAt&&(a+=n.toString().length+1);r++}while(n=n.next)}else{m=r.lineNum;if(1==this.n)f.suppressEvent(),a=0,v<r.aPos?(a=-1,m++,f.lineStart(),D=f.PStart):r.aPos<v?(f.lineEnd(!0),D=f.PStart):(f.lineStart(),D=f.PStart,f.lineEnd(!0),a=f.PStart,m=n.lineNum),f.moveTo(v,!0),f.unsuppressEvent();else if(0==this.n&&v==r.aPos)return;do{if(n.lineNum==m||n.placeholder)break;a+=n.toString().length+1}while(n=n.next)}r=a;m=D;n=m-r;0<=n?m+=1:0>n&&(r+=n,m=a+1);f.PStart=
r;f.PEnd=m}};a.prototype.getMessage=function(){return this.b};f[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new d;this.action=null;this.blink=!0;this.pSpace=!1;this.K=this.ea=0}function g(a,c){var e=a.e(),d=a.Y+c,m=a.Y;e||(e=a.feeder.firstBuffer,m=0,d=c);for(e!=a.feeder.firstBuffer&&m--;m<d&&!e.placeholder;e=e.nextLine)e.br&&m++;return m}var f=S("Components.Vim"),k=U("System.Debug"),d=U("Components.Vim.State.Recorder"),c=U("Components.Vim.Actions.*");a.prototype.Vim;a.prototype.moveTo=
function(a,c){var e=this.feeder.content,d=this.e(),m=d.lineNum;d.placeholder&&(this.Y=m=0);for(var n=0,f=0,g=e.indexOf("\n");0<=g&&!(a<=g);g=e.indexOf("\n",g))f=g,g++,n++;e=n-m;m=a<f?f-a:a-f;m+=Math.ceil(m/d.cols)-1;e&&this.moveY(e);0<this.e().lineNum&&f<=a&&m--;this.moveX(-Number.MAX_VALUE);this.moveX(m,!1,c)};a.prototype.moveX=function(a,c,e){var d=this.pX,f=Boolean(a);0<this.K&&(0<a&&e&&(a+=this.K),this.K=0);f&&(d=this.X+a);a||(a=1);var n=this.feeder;if(c&&0>d&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),
this.lineEnd(e);else{var g=this.e(),k=g.visualLines.join("\n");c=k.length;var v=0,s=!0;if(1<c){for(var w=g.lineNum-1,v=n.content,s=v.indexOf("\n"),y=0;0<=s&&w!=y;s=v.indexOf("\n",s),y++)s++;0==y&&-1==s&&(s=0);w=v.indexOf("\n",s+1);w=-1==w?v.length:w;v=(s=0<(w-s-1)%g.cols)?e?c-1:c-2:e?c:c-1}g=k[d];(c=void 0==g||c==d+1&&" "==g)?d=0<d?v:0:"\n"==g&&(d+=a);n.wrap&&c&&!s&&e&&(this.K=1);this.X=d;f&&(this.pX=d,this.updatePosition())}};a.prototype.lineStart=function(){this.pX=0;this.moveX();this.updatePosition()};
a.prototype.lineEnd=function(a){this.moveX(Number.MAX_VALUE,!1,a)};a.prototype.updatePosition=function(){var a=0,c=0,e=this.feeder.lineBuffers[0];a:for(;e&&c<this.Y;c++)for(;e;){if(e.next&&e.next.placeholder)break a;a+=e.toString().length+1;if((e=e.next)&&e.br)break}this.PStart=a=this.X+a+this.K;this.PEnd=a+1;this.D()};a.prototype.D=function(){0<this.ea?k.Info("Event suppressed, suppression level is: "+this.ea):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=
function(a){var c=this.Y+a,e=this.feeder,d;if(0>c)e.pan(void 0,c),this.Y=0,this.moveX(),this.updatePosition(),e.softReset();else if(!e.EOF&&e.moreAt<c){e=this.feeder;if(e.linesTotal<c){for(;!e.EOF;)e.pan(void 0,1);a=g(this,a)}else{d=e.lastBuffer.lineNum;var c=c-e.moreAt,f=this.e().lineNum;e.EOF||e.pan(void 0,c);for(c=f+a;!e.EOF&&(e.lastBuffer.lineNum==d||e.lastBuffer.lineNum<c);)e.pan(void 0,1);this.Y=0;for(d=this.e();d&&d.lineNum!=c&&!d.placeholder;this.Y++,d=this.e());a=this.Y;e.EOF||e.lastBuffer.next.lineNum!=
d.lineNum||a--}this.Y=a;this.moveX();this.updatePosition();e.softReset()}else{if(0<a){d=this.e();if(d.nextLine.placeholder)return;c=g(this,a)}this.Y=c;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a,d){this.action&&this.action.dispose();k.Info("openAction: "+a);this.action=new c[a](this,d);this.A=null;this.D()};a.prototype.closeAction=function(){this.action&&(this.action.dispose(),this.A=this.action.getMessage(),this.action=null,k.Info("closeAction: "+this.A),this.Vim.contentAnalyzer.reset(),
this.D())};a.prototype.openRunAction=function(a,d,e,f,m,n,g){k.Info("OpenRunAction: "+a);a=new c[a](this);a.handler(d,e,f,m,n,g);this.A=a.getMessage();a.dispose();this.Vim.contentAnalyzer.reset();this.D()};a.prototype.suppressEvent=function(){++this.ea};a.prototype.unsuppressEvent=function(){--this.ea};a.prototype.e=function(){for(var a=this.feeder,c=a.firstBuffer,a=a.lastBuffer.next,e=0;c!=a;c=c.next)if(c.br&&e++,this.Y==e)return c;return null};u(a.prototype,"aX",function(){var a=this.X,c=1;if(this.feeder.wrap){var e=
this.e().visualLines,d;for(d in e){var f=e[d],n=f.content.toString().length,f=f.toString().length,a=a-(f+1);if(0<=a)c+=n;else if(0>a){c+=a+f;break}}}else return this.X;return c});u(a.prototype,"aPos",function(){var a=this.feeder,c=this.e().lineNum,e=0;if(0<c){e=a.content.indexOf("\n");for(i=1;-1!=e&&i<c;i++)e=a.content.indexOf("\n",e+1);a.wrap&&e++}return e+=this.aX});u(a.prototype,"face",function(){return"\u2588"});u(a.prototype,"message",function(){if(this.A){var a=this.A;this.A=null;return a}return this.action&&
this.action.getMessage()});u(a.prototype,"position",function(){return{start:this.PStart,end:this.PEnd}});f[1](2,"Cursor",a)})();BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,b){var d=[];d[a]=new f(b);for(var e=a-1;0<=e;e--)d[e]=new f(b,d[e+1]);this.lineBuffers=d;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new k(this);this.dispatcher=new L;this.H=null;this.$=-1;this.M=a}var g=S("Components.Vim");U("System.Debug");var f=g[0]("LineBuffer"),k=g[0]("Cursor"),d=U("System.utils.Perf.CountSubstr");a.prototype.init=function(a,b){this.content=a;this.setWrap(b);this.firstBuffer.S(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var b=this,d=a?function(){return!0}:function(a){return!a.placeholder};this.eb=function(a,c){for(var f=(void 0==a?"":a)+"",n=!1,g=0;a&&g<c&&(a=a.next)&&d(a);g++)n||a.br&&c<g+a.visualLines.length?(n||(b.H=a),n=!0,f+="\n@"):f+="\n"+a;return f};this.fb=function(){for(var a=b.lineBuffers[b.cb],c=b.La+1,f=0;a&&f<c&&(a=a.next)&&d(a);f++)if(a.br&&c<f+a.visualLines.length){b.H=a;break}}};a.prototype.render=function(a,b){var d=this.lineBuffers;
if(void 0==a)a=0;else if(this.M<a)return"";if(void 0==b||this.M-a<b)b=this.rows-a;if(0==b)return"";this.cb=a;this.La=b-1;return this.eb(d[a],this.La)};a.prototype.pan=function(a,b){void 0==a&&(a=0);void 0==b&&(b=0);var d=this.panX+a,e=this.panY+b,f=-1,m=0;0>e&&(e=0);var n=this.content.slice(0,-1);if(0<e)for(f=n.indexOf("\n"),m=1;-1!=f&&m<e;m++){var g=n.indexOf("\n",f+1);if(-1==g){e=m;break}f=g}this.firstBuffer.S(this.content.substr(f+1),this.wrap,m);this.panX=d;this.panY=e};a.prototype.softReset=
function(){this.$=-1;this.H=null;this.fb()};u(a.prototype,"linesTotal",function(){return d(this.content,"\n")});u(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});u(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.M-1]});u(a.prototype,"EOF",function(){return this.lineBuffers[this.M].placeholder});u(a.prototype,"moreAt",function(){if(0<this.$)return this.$;var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do{if(this.H==a)break;a.br&&b++}while(a=a.next);void 0==
a&&b--;return this.$=b});u(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,b=this.cursor.e(),d="",e=b.content.match(/\t/g);e&&(d="-"+(a+e.length*(b.tabWidth-1)));return b.lineNum+1+","+a+d});u(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY)a=this.EOF?"BOTTOM":Math.floor(this.panY/(this.linesTotal-(this.M-1))*100)+"%";else if(this.H||!this.EOF)a="TOP";return a});u(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do b++;while((a=a.next)&&
!a.placeholder);return b});g[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");
(function(){function a(a){this.cols=a;this.qa={};this.override=null}var g=S("Components.Vim");U("System.Debug");g[0]("LineFeeder");a.prototype.stamp=function(a,g){this.qa[a]=g};a.prototype.override;u(a.prototype,"statusText",function(){if(this.override)return this.override();for(var a="",g=this.cols,d=0;d<g;d++){var c=g-d,b=this.qa[d]||this.qa[-c];if(b){if(b=b(),void 0!=b&&""!==b){if(0==d&&g<=b.length)return b;a+=b.substr(0,c);d=a.length}}else a+=" "}return a});g[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.State.History");
(function(){function a(a){d[a]||(d[a]=[]);this.r=d[a];this.reset()}function g(a,b){var d=b.length;if(a.length<d)return!1;for(var e=0;e<d;e++)if(a[e]!=b[e])return!1;return!0}var f=S("Components.Vim.State"),k=U("System.Debug"),d={};a.prototype.push=function(a){var b;if(b=this.r.length)a:{b=this.r[this.r.length-1];for(var d=b.length<a.length?a.length:b.length,e=0;e<d;e++)if(b[e]!=a[e]){b=!1;break a}b=!0}b?k.Info("This is the previous command, skipping"):this.r.push(a)};a.prototype.prev=function(a){for(this.r.length<=
this.f&&this.reset();-1<this.f;){var b=this.r[this.f--];if(b&&g(b,a))return b.slice()}return null};a.prototype.next=function(a){0>this.f&&(this.f++,this.next(a));for(;this.f<this.r.length;){var b=this.r[this.f++];if(b&&g(b,a))return b.slice()}return null};a.prototype.reset=function(){this.f=this.r.length-1};f[1](2,"History",a)})();BotanJS.define("Components.Vim.Ex.Command");
(function(){function a(a,c){var g=this;if(!b[c])throw Error("Unsupport mode: "+c);this.a=a;this.Ta=a.Vim.statusBar;this.n=c;this.Z=new d(b[c]);this.g=[];this.p=null;this.sa="ExCommandBlinkCycle"+k.uuid;this.j=0;var m=a.feeder,n=!1,r=!1;this.F=function(){r=n=!0};f.perma(this.sa,function(){r?r=!1:n=!n;m.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))},600);this.$a=function(){for(var b="",c=g.g,e=g.j,d=c.length,f=0;f<d;f++){var m=c[f];n&&f==e&&(face=!0,m=a.face+m.substr(1));b+=m}n&&d<=e&&(b+=
a.face);return b};this.Ta.override=this.$a}var g=S("Components.Vim.Ex"),f=U("System.Cycle");U("System.Debug");var k=U("System.utils.Perf"),d=U("Components.Vim.State.History");U("Components.Vim.Message");var c=U("Components.Vim.Beep"),b={"/":k.uuid,":":k.uuid};a.prototype.dispose=function(){this.Ta.override=null;f.permaRemove(this.sa);this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){this.F();var b=null,d=!1;if(a.kMap("Tab"))b=
"^I";else if(!a.kMap("C-v"))if(a.kMap("BS")){if(1==this.j&&1<this.g.length)return!1;this.g.splice(--this.j,1);if(0==this.g.length)return a.cancel(),!0}else if(a.kMap("Del"))this.g.splice(this.j,1);else{if(a.kMap("Enter"))return this.bb(a),!0;if(a.kMap("Left"))1<this.j&&this.j--;else if(a.kMap("Right"))this.j<this.g.length&&this.j++;else if(d=a.kMap("Up")){this.p||(this.p=this.g);var f=this.Z.prev(this.p);f?(this.g=f,this.j=f.length):c()}else(d=a.kMap("Down"))?(f=this.Z.next(this.p))?(this.g=f,this.j=
f.length):this.p?(this.g=this.p,this.p=null):c():b=a.key}null!=b&&this.g.splice(this.j++,0,b);d||(this.Z.reset(),this.p&&(this.p=this.g));a.cancel();this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))}};a.prototype.bb=function(a){this.Z.push(this.g);var b="";switch(this.n){case "/":b="FIND";break;case ":":b="EDITOR_COMMAND"}var c=this.a;c.suppressEvent();this.a.openRunAction(b,a,this.g.slice());c.unsuppressEvent()};g[1](2,"Command",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,b){this.lb=a;this.va=!1;if("string"==typeof b)this.Ea=b,this.Ha=0,this.J=k(b),this.Ba=27==this.J;else{this.ha=b;if(";"==b.key||":"==b.key)e=b.keyCode;var c=this.ha.keyCode;this.Ba=27==c||b.ctrlKey&&67==c;this.J=c+(b.shiftKey||b.getModifierState("CapsLock")?512:0)+(b.ctrlKey?1024:0)+(b.altKey?2048:0);this.Ha=16==c||17==c||18==c;this.Ea=b.key||f(this.J)}this.ya=1;this.L=null}function g(a){this.Va=a;this.wa=a.contentFeeder;this.G=this.wa.cursor;this.k=null}function f(a){switch(a){case 32:return" ";
case 65:return"a";case 66:return"b";case 67:return"c";case 68:return"d";case 69:return"e";case 70:return"f";case 71:return"g";case 72:return"h";case 73:return"i";case 74:return"j";case 75:return"k";case 76:return"l";case 77:return"m";case 78:return"n";case 79:return"o";case 80:return"p";case 81:return"q";case 82:return"r";case 83:return"s";case 84:return"t";case 85:return"u";case 86:return"v";case 87:return"w";case 88:return"x";case 89:return"y";case 90:return"z";case 49:return"1";case 50:return"2";
case 51:return"3";case 52:return"4";case 53:return"5";case 54:return"6";case 55:return"7";case 56:return"8";case 57:return"9";case 48:return"0";case 219:return"[";case 221:return"]";case e:case 186:return";";case 222:return"'";case 188:return",";case 190:return".";case 191:return"/";case 220:return"\\";case 173:case 189:return"-";case 61:case 187:return"=";case 561:return"!";case 562:return"@";case 563:return"#";case 564:return"$";case 565:return"%";case 566:return"^";case 567:return"&";case 568:return"*";
case 569:return"(";case 560:return")";case 731:return"{";case 733:return"}";case 512+e:case 698:return":";case 734:return'"';case 700:return"<";case 702:return">";case 732:return"|";case 685:case 701:return"_";case 573:case 699:return"+";case 577:return"A";case 578:return"B";case 579:return"C";case 580:return"D";case 581:return"E";case 582:return"F";case 583:return"G";case 584:return"H";case 585:return"I";case 586:return"J";case 587:return"K";case 588:return"L";case 589:return"M";case 590:return"N";
case 591:return"O";case 592:return"P";case 593:return"Q";case 594:return"R";case 595:return"S";case 596:return"T";case 597:return"U";case 598:return"V";case 599:return"W";case 600:return"X";case 601:return"Y";case 602:return"Z";case 27:return"Escape";case 8:return"Backspace";case 46:return"Delete";case 512:return"Shift";case 2048:return"Alt";case 1024:return"Control";case 13:return"Enter";case 9:return"Tab"}return"?"}function k(a){if(q[a])return q[a];var b=a.split("-"),c=b[0],d=0;if(2==b.length){var e=
!0;switch(b[0]){case "C":d=1024;break;case "A":d=2048;break;case "S":d=512;break;default:e=!1}e&&(c=b[1])}switch(c){case "BS":b=d+8;break;case "Del":b=d+46;break;case "Enter":b=d+13;break;case "Tab":b=d+9;break;case "Up":b=d+38;break;case "Down":b=d+40;break;case "Left":b=d+37;break;case "Right":b=d+39;break;case "A":d=512;case "a":b=d+65;break;case "B":d=512;case "b":b=d+66;break;case "C":d=512;case "c":b=d+67;break;case "D":d=512;case "d":b=d+68;break;case "E":d=512;case "e":b=d+69;break;case "F":d=
512;case "f":b=d+70;break;case "G":d=512;case "g":b=d+71;break;case "H":d=512;case "h":b=d+72;break;case "I":d=512;case "i":b=d+73;break;case "J":d=512;case "j":b=d+74;break;case "K":d=512;case "k":b=d+75;break;case "L":d=512;case "l":b=d+76;break;case "M":d=512;case "m":b=d+77;break;case "N":d=512;case "n":b=d+78;break;case "O":d=512;case "o":b=d+79;break;case "P":d=512;case "p":b=d+80;break;case "Q":d=512;case "q":b=d+81;break;case "R":d=512;case "r":b=d+82;break;case "S":d=512;case "s":b=d+83;
break;case "T":d=512;case "t":b=d+84;break;case "U":d=512;case "u":b=d+85;break;case "V":d=512;case "v":b=d+86;break;case "W":d=512;case "w":b=d+87;break;case "X":d=512;case "x":b=d+88;break;case "Y":d=512;case "y":b=d+89;break;case "Z":d=512;case "z":b=d+90;break;case "!":d=512;case "1":b=d+49;break;case "@":d=512;case "2":b=d+50;break;case "#":d=512;case "3":b=d+51;break;case "$":d=512;case "4":b=d+52;break;case "%":d=512;case "5":b=d+53;break;case "^":d=512;case "6":b=d+54;break;case "&":d=512;
case "7":b=d+55;break;case "*":d=512;case "8":b=d+56;break;case "(":d=512;case "9":b=d+57;break;case ")":d=512;case "0":b=d+48;break;case "<":d=512;case ",":b=d+188;break;case ">":d=512;case ".":b=d+190;break;default:throw Error("Unsupport keys: "+a);}return q[a]=b}var d=S("Components.Vim"),c=U("System.Debug"),b=U("Components.Vim.Ex.Command"),h=d[0]("Beep"),e=59,q={};g.prototype.d=function(a,b){if(b)this.i||(this.i=[]),this.i.push({keys:Array.prototype.slice.call(arguments,2),handler:b,Wa:0});else{for(var d=
a.keyCode,c=0;c<this.i.length;c++){var e=this.i[c],f=e.keys,g=f[e.Wa++];if(-1==g||g==d){e.Wa==f.length&&(this.i=null,e.handler(a));return}}this.i&&h();this.i=null}};g.prototype.Ya=function(d){var c=this.G;switch(d.keyCode){case 577:c.lineEnd();case 65:c.moveX(1,!0,!0);case 73:c.openAction("INSERT",d);break;case 83:""!=c.e().content&&c.openRunAction("DELETE",d,c.aPos);c.openAction("INSERT",d);break;case 591:c.lineStart();c.openAction("INSERT",d);c.action.handler(new a(d.vb,"Enter"));c.moveY(-1);break;
case 79:c.lineEnd(!0);c.openAction("INSERT",d);c.action.handler(new a(d.vb,"Enter"));break;case 85:c.openRunAction("UNDO",d);break;case 1106:c.openRunAction("REDO",d);break;case 68:c.openAction("DELETE",d);break;case 89:c.openAction("YANK",d);break;case 80:c.suppressEvent(),c.moveX(1,!1,!0),c.unsuppressEvent();case 592:c.openRunAction("PUT",d);break;case 600:if(!this.U(-1))break;case 88:if(""==c.e().content){h();break}c.openRunAction("DELETE",d,c.aPos);break;case 586:c.openRunAction("JOIN_LINES",
d);break;case 86:case 598:c.openAction("VISUAL",d);c.action.handler(d);break;case 512+e:case 698:this.k=new b(c,":");this.k.handler(d);break;case 700:case 702:c.openAction("SHIFT_LINES",d)}};g.prototype.U=function(a,b){var d=this.G,c=d.X,e=d.Y;d.moveX(a,b,d.pSpace);return d.X==c&&d.Y==e?(h(),!1):!0};g.prototype.ta=function(a){var b=this.G,d=this.wa,c=b.Y+d.panY;b.moveY(a);c!=b.Y+d.panY||0<a&&!d.EOF||h()};g.prototype.ab=function(a){if(this.ja)a.preventDefault(),this.d(a);else{var b=this,d=!0;switch(a.keyCode){case 734:this.d(a,
function(a){a.target.R.select(a.key);a.cancel();b.ja=!1},-1);break;case 48:if(!this.i){d=!1;break}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:var e=a.key,f=function(a){var d=a.ModKeys;switch(a.keyCode){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e+=a.key,d=!0}d?(b.d(a,f,-1),a.cancel()):(a.ya=Number(e),c.Info("Count is: "+e),b.ja=!1)};this.d(a,f,-1);break;default:d=!1}(this.ja=d)&&a.cancel()}};g.prototype.za=function(a){var d=a.keyCode;
if(this.o&&!a.ModKeys)return this.d(a),this.o=!1,!0;var c=this.G,e=c.feeder,f=!0;switch(d){case 8:this.U(-1,!0);break;case 72:this.U(-a.count);break;case 76:this.U(a.count);break;case 173:case 189:case 75:this.ta(-a.count);break;case 13:case 74:this.ta(a.count);break;case 1094:if(e.firstBuffer.nextLine.placeholder){h();break}e.pan(void 0,e.moreAt);e.softReset();c.moveY(-c.Y);break;case 1090:if(0==e.panY){h();break}e.pan(void 0,-e.moreAt);e.softReset();c.moveY(-c.Y);e.EOF||c.moveY(e.moreAt);break;
case 584:break;case 588:break;case 48:c.lineStart();break;case 566:c.lineStart();break;case 564:c.lineEnd(c.pSpace);break;case 583:c.moveY(Number.MAX_VALUE);c.moveX(Number.MAX_VALUE,!0);break;case 565:var g=this.Va.contentAnalyzer,d=g.bracketAt(c.aPos);if(-1==d.open){h();break}c.moveTo(d.selected==d.close?d.open:d.close);break;case 596:case 84:this.o=!0;this.d(a,function(b){var d=c.X;c.openRunAction("TO",a,b);c.X<d?c.moveX(1):d<c.X&&c.moveX(-1)},-1);break;case 582:case 70:this.o=!0;this.d(a,function(b){c.openRunAction("TO",
a,b)},-1);break;case 87:case 599:case 66:case 578:c.openRunAction("WORD",a);break;case 73:if(!c.action){f=!1;break}g=this.Va.contentAnalyzer;this.o=!0;this.d(a,function(a){var b=g.wordAt(c.aPos);a.L=b},87);var d=function(a){var b=g.bracketIn("(",c.aPos);a.L=b},e=function(a){var b=g.bracketIn("{",c.aPos);a.L=b},k=function(a){var b=g.bracketIn("[",c.aPos);a.L=b};this.d(a,d,560);this.d(a,d,569);this.d(a,k,219);this.d(a,k,221);this.d(a,e,731);this.d(a,e,733);break;case 71:this.o=!0;this.d(a,function(){c.moveY(-Number.MAX_VALUE);
c.moveX(-Number.MAX_VALUE,!0)},71);this.d(a,function(){c.openRunAction("PRINT_HEX",a)},56);this.d(a,function(){c.action&&h()},85);this.d(a,function(){c.action&&h()},597);break;case 590:case 78:c.openRunAction("FIND",a);break;case 191:this.o=!0;this.k=new b(c,"/");this.k.handler(a);break;default:f=!1}return f};g.prototype.handler=function(a,b){if(!(2116==b.keyCode||112<b.keyCode&&123>=b.keyCode)){if(b.Escape){var c=!1;this.o=!1;this.i?(c=!0,this.i=null):this.k&&(c=!0,this.k.dispose(),this.k=null);
if(c){h();return}}if(this.k){if(this.k.handler(b)){this.k.dispose();this.o=!1;this.k=null;return}if(b.canceled)return}c=this.G;if(!this.o&&(!c.action||c.action.allowMovement)&&(this.ab(b),b.canceled))return;if(c.action)if(b.Escape)b.preventDefault(),c.closeAction();else{if(c.action.allowMovement){var d=!this.i;this.za(b);if(d&&this.i){b.preventDefault();return}}c.action.handler(b)&&c.closeAction()}else b.preventDefault(),this.za(b)||this.Ya(b)}};u(a.prototype,"target",function(){return this.lb});
u(a.prototype,"key",function(){return this.Ea});u(a.prototype,"keyCode",function(){return this.J});u(a.prototype,"ModKeys",function(){return this.Ha});u(a.prototype,"Escape",function(){return this.Ba});u(a.prototype,"canceled",function(){return this.va});u(a.prototype,"range",function(){var a=this.L;return a&&-1==a.open&&-1==a.close?null:a});u(a.prototype,"count",function(){return this.ya});a.prototype.kMap=function(a){return this.J==k(a)};a.prototype.cancel=function(){this.preventDefault();this.va=
!0};a.prototype.preventDefault=function(){this.ha&&this.ha.preventDefault()};d[1](2,"Controls",g);d[1](2,"ActionEvent",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a,b){if(!a)throw Error("Invalid argument");a=k(a);var e=a.element;if(!e||"TEXTAREA"!=e.nodeName)throw Error("This element is not compatible for VimArea");for(var f in s){var g=s[f];if(g.stage.element==e)return h.Info("Instance exists"),g}a.setAttribute(new d("vimarea",1));this.stage=a;this.rows=e.rows;this.cols=e.cols;this.T=!1;var m=this;this.oa=[new c("Focus",function(){m.T=!0}),new c("Blur",function(){m.T=!1})];if(b){var n=e.value;this.mb(function(){m.ra(n)})}else this.ra(e.value);
this.ia=w++;s[this.ia]=this}function g(a,b){return function(c){a.T=!0;c=c||window.event;c.keyCode?code=c.keyCode:c.which&&(code=c.which);b(a,new D(a,c))}}var f=S("Components.Vim"),k=U("Dandelion.IDOMElement"),d=U("System.utils.DataKey"),c=U("System.utils.EventKey"),b=U("System.Cycle"),h=U("System.Debug"),e=U("Components.Vim.State.Registers"),q=U("Components.Vim.Syntax.Analyzer"),m=f[0]("LineFeeder"),n=f[0]("StatusBar"),r=f[0]("Controls"),D=f[0]("ActionEvent"),v=f[0]("Message"),s=[],w=0;a.prototype.mb=
function(a){function c(){f.value+=e();++m;k==f.scrollHeight?b.next(c):(n.rows=m,n.cols=g,a())}function d(){f.value+=e();if(h==f.scrollWidth)b.next(d);else{var a="";--g;for(var k=0;k<g;k++)a+=".";f.value=a;f.style.whiteSpace="";e=function(){return"\n"+a};c()}}function e(){return"Please wait while Vim;Re is testing for screen dimensions"[g++]||"."}var f=this.stage.element;f.value="";var g=0;f.style.whiteSpace="nowrap";var h=f.scrollWidth;d();var k=f.scrollHeight,m=0,n=this};a.prototype.select=function(a){if(this.T){var b=
this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.ra=function(a){function d(){A.init(B.statusText);var a=A.linesOccupied;h.value=w.render(a-1,k-a)+"\n"+A.render(0,a<k?a:k);f.F=!1;f.select(w.cursor.position)}var f=this;this.content=a;var h=this.stage.element,k=this.rows,s=this.cols,w=new m(k-1,s),D=new q(w);w.init(a+"\n");var A=new m(k,s);A.setRender(!1);w.cursor.Vim=this;A.cursor.Vim=this;var B=new n(s);B.stamp(-18,function(){return w.lineStat});B.stamp(-3,function(){return v(w.docPos)});
B.stamp(0,function(){return w.cursor.message});A.init(B.statusText);w.dispatcher.addEventListener("SelectionChanged",function(){f.select(w.cursor.position)});w.dispatcher.addEventListener("VisualUpdate",d);h.value="Please wait ...";b.delay(d,70);this.D=d;this.contentFeeder=w;this.contentAnalyzer=D;this.statusFeeder=A;this.statusBar=B;this.R=new e;this.a=w.cursor;this.F=!0;b.perma("VimCursorBlinkCycle"+h.id,function(){f.select(!f.a.blink||(f.F=!f.F)?f.a.position:{start:0,end:0})},600);a=new r(this);
this.oa.push(new c("KeyDown",g(this,a.handler.bind(a))));this.stage.addEventListeners(this.oa)};a.prototype.dispose=function(){var a=this.stage,c=this.oa,d=this.contentFeeder,e=a.element.id;h.Info("Destroy instance: "+e);d.dispatcher.removeEventListener("VisualUpdate",this.D);a.removeAttribute("data-vimarea");b.permaRemove("VimCursorBlinkCycle"+e);for(var f in c)a.removeEventListener(c[f]);a.element.value=this.content;delete s[this.ia]};u(a.prototype,"index",function(){return this.ia+1});u(a,"Instances",
function(){var a=[],b;for(b in s)a.push(s[b]);return a});f[1](2,"VimArea",a)})();})();
