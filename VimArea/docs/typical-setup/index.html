<!DOCTYPE html><!--[if lt IE 7]> <html class="lt-ie10 lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]> <html class="lt-ie10 lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]> <html class="lt-ie10 lt-ie9"> <![endif]--><!--[if IE 9]> <html class="lt-ie10"> <![endif]--><!--[if gt IE 9]><!--> <html> <!--<![endif]--><head> <meta content="width=980" id="viewport" name="viewport"> <title>VimArea - Penguin&#39;s lab</title> <meta name="description" content="This is were I put my project info"><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> <script> var _AstConf_ = {}, debugEnv = true; </script> <link rel="stylesheet" type="text/css" href="/assets/botanjs/cdeeb013b7f6d5c15f3108a42b3e663e.c.css"> <script src="/assets/botanjs/d2d5313503d920cb3b924bed910798bf.c.js"></script> <script>window.onload=function(){BotanJS.import("Astro.Bootstrap").init();}</script></head><body> <div id="begin-wrapper" class="begin-wrapper"> <div id="main_background" class="no_transition_recursive flsf"></div> <!--header--><div id="horizon" class="horizon"></div><!-- horizon line --><div id="header" class="home"> <header class="main-column"> <div id="menu" class="compx"><a id="menu_home" href="/">Home</a>&nbsp;<a id="menu_project" href="/VimArea/" data-active="1">VimArea</a>&nbsp;<a id="menu_blog" href="http://blog.astropenguin.net">Blog</a> </div> </header></div><!-- end header --> <div id="mbody" class="mbody main-column"> <h1> VimArea - Demo </h1><div class="panel desc"> <h2> Typical Setup </h2> <div class="panel"> <pre class="brush: jscript">
var vimArea = document.getElementById( "vim-area" );
vimArea.value = TestString;
var VimArea = new ( BotanJS.import( "Components.Vim.VimArea" ) )( vimArea );
        </pre> <textarea id="vim-area" class="vima" rows="25" cols="90" spellcheck="false"></textarea> </div><a href="/VimArea/docs/#typical-setup">Back</a><script>(function(){ window.VimArea = BotanJS.import( "Components.Vim.VimArea" ); var d = BotanJS.import( "Dandelion" ); var vimArea = d.id( "vim-area" ); vimArea.value = "(function(){\n\tvar ns = __namespace( \"Components.Vim.Actions\" );\n\n\t\n\tvar debug = __import( \"System.Debug\" );\n\n\t\n\tvar Stator                                 = __import( \"Components.Vim.State.Stator\" );\n\t\n\tvar Stack                                  = __import( \"Components.Vim.State.Stack\" );\n\n\tvar Mesg = __import( \"Components.Vim.Message\" );\n\tvar beep = __import( \"Components.Vim.Beep\" );\n\n\tvar occurence = __import( \"System.utils.Perf.CountSubstr\" );\n\n\t\n\tvar DELETE = function( Cursor )\n\t{\n\t\t\n\t\tthis.__cursor = Cursor;\n\t\tthis.__nline = 0;\n\t\tthis.__startX = Cursor.aPos;\n\t\tthis.__panY = this.__cursor.feeder.panY;\n\n\t\tCursor.suppressEvent();\n\t};\n\n\tDELETE.prototype.allowMovement = true;\n\n\tDELETE.prototype.dispose = function()\n\t{\n\t\tthis.__cursor.unsuppressEvent();\n\t};\n\n\tDELETE.prototype.handler = function( e, sp )\n\t{\n\t\te.preventDefault();\n\n\t\tif( e.ModKeys ) return;\n\n\t\t\n\t\tvar reg = e.target.registers;\n\n\t\tvar cur = this.__cursor;\n\t\tvar feeder = cur.feeder;\n\n\t\tvar Triggered = false;\n\t\tvar newLine = false;\n\n\t\tif( sp == undefined )\n\t\t{\n\t\t\tTriggered = true;\n\n\t\t\tsp = this.__startX;\n\n\t\t\tvar currAp = cur.aPos;\n\t\t\tif( this.__startX != currAp )\n\t\t\t{\n\t\t\t\t// Remove to start\n\t\t\t\tif( e.kMap( \"^\" ) )\n\t\t\t\t{\n\t\t\t\t\tsp --;\n\t\t\t\t}\n\t\t\t\t// Remove char in cursor\n\t\t\t\telse if( e.kMap( \"l\" ) )\n\t\t\t\t{\n\t\t\t\t\tcur.moveX( -1 );\n\t\t\t\t}\n\t\t\t\t// Remove char before cursor\n\t\t\t\telse if( e.kMap( \"h\" ) )\n\t\t\t\t{\n\t\t\t\t\tsp = currAp;\n\t\t\t\t}\n\t\t\t\t// Remove the current and the following line\n\t\t\t\telse if( e.kMap( \"j\" ) )\n\t\t\t\t{\n\t\t\t\t\tnewLine = true;\n\t\t\t\t\tcur.lineEnd( true );\n\t\t\t\t\tsp = cur.aPos;\n\t\t\t\t\tcur.moveY( -1 );\n\t\t\t\t\tcur.lineStart();\n\t\t\t\t\tthis.__startX = cur.aPos;\n\t\t\t\t}\n\t\t\t\t// Remove the current and the preceding line\n\t\t\t\telse if( e.kMap( \"k\" ) )\n\t\t\t\t{\n\t\t\t\t\tnewLine = true;\n\t\t\t\t\tcur.moveY( 1 );\n\t\t\t\t\tcur.lineEnd( true );\n\t\t\t\t\tsp = cur.aPos;\n\t\t\t\t\tcur.moveY( -1 );\n\t\t\t\t\tcur.lineStart();\n\t\t\t\t}\n\t\t\t\telse if( this.__startX < currAp )\n\t\t\t\t{\n\t\t\t\t\t// Swap the movement\n\t\t\t\t\t// This is to move the REDO / UNDO Cursor\n\t\t\t\t\t// position to the earlier position\n\t\t\t\t\tsp = currAp;\n\t\t\t\t\tcur.moveTo( this.__startX );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove the current line\n\t\t\telse\n\t\t\t{\n\t\t\t\tif( e.kMap( \"d\" ) )\n\t\t\t\t{\n\t\t\t\t\tnewLine = true;\n\t\t\t\t\tcur.lineEnd( true );\n\t\t\t\t\tsp = cur.aPos;\n\t\t\t\t\tcur.lineStart();\n\t\t\t\t}\n\t\t\t\telse if( e.range )\n\t\t\t\t{\n\t\t\t\t\tsp = e.range.close;\n\t\t\t\t\tcur.moveTo( e.range.open, true );\n\t\t\t\t}\n\t\t\t\telse if( e.kMap( \"^\" ) )\n\t\t\t\t{\n\t\t\t\t\t// Do nothing as nothing can be removed\n\t\t\t\t\t// since there is no successful movement\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// this is the same as kMap( \"h\" ) above\n\t\t\t\telse if( e.kMap( \"$\" ) )\n\t\t\t\t{\n\t\t\t\t\tsp = cur.aPos;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbeep();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar c = feeder.content;\n\n\t\tvar s = sp;\n\t\tvar e = cur.aPos;\n\n\t\tif( e < s )\n\t\t{\n\t\t\ts = cur.aPos;\n\t\t\te = sp;\n\t\t}\n\n\t\tvar removed = c.substring( s, e + 1 );\n\t\treg.change( removed, newLine );\n\n\t\tthis.__nline = occurence( removed, \"\n\" );\n\n\t\tfeeder.content = c.substring( 0, s ) + c.substring( e + 1 );\n\n\t\t// Try to keep the original panning if possible\n\t\tfeeder.pan( undefined\n\t\t\t, this.__panY < feeder.panY\n\t\t\t\t? this.__panY - feeder.panY\n\t\t\t\t: undefined\n\t\t);\n\t\tcur.moveTo( s );\n\n\t\tvar stator = new Stator( cur, s );\n\t\tvar stack = new Stack();\n\n\t\tvar f = stator.save( 0, removed );\n\t\tstack.store( function() {\n\t\t\tf();\n\t\t\t// Offset correction after REDO / UNDO\n\t\t\tcur.moveX( 1 );\n\t\t} );\n\n\t\tcur.rec.record( stack );\n\n\t\treturn Triggered;\n\t};\n\n\tDELETE.prototype.getMessage = function()\n\t{\n\t\tif( this.__nline )\n\t\t{\n\t\t\treturn Mesg( \"LINES_FEWER\", this.__nline );\n\t\t}\n\n\t\treturn \"\";\n\t};\n\n\tns[ NS_EXPORT ]( EX_CLASS, \"DELETE\", DELETE );\n})();";; new VimArea( vimArea );})();</script></div> <div class="clearfix"></div> </div></div><footer> <div id="fhorizon" class="horizon"></div> <div class="footer_bg main-column"> <div class="f_links"> <!-- Powered by --> <div class="flink_section"> <span>powered by</span> <a target="_blank" href="Github">Github</a> </div> <!-- About --> <div class="flink_section"> <span>about</span> <a target="_blank" href="http://blog.astropenguin.net/about">Me</a> </div> </div> <div class="copysign flsf"> CopyLeft Astropenguin 2016 </div> </div></footer> </body></html>