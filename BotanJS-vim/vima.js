(function(){function m(a,e){a.prototype=Object.create(e.prototype);a.prototype.constructor=a}function n(a,e,g){Object.defineProperty(a,e,{get:g,set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:e})})}function u(a,e){Object.defineProperty(a,"propagating",{get:e,set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:"propagating"})})}
function z(a,e,g){Object.defineProperty(a,e,{get:function(){return g},set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:e})})}function BotanEvent(a,e){var g=!1,h=!1;z(this,"propagate",function(){h||(g=!0);h=!0});z(this,"stopPropagating",function(){g=!1});z(this,"type",a);u(this,function(){return g});z(this,"data",e);this.setTarget=function(a){z(this,"target",a);this.setTarget=void 0}.bind(this)}
function D(){function a(){this.aa.propagate();for(var a in this.stack)if(this.aa.propagating)this.stack[a](this.aa);this.aa.stopPropagating()}function e(a){g[a]||(g[a]=[]);return g[a]}var g={},h=this;this.addEventListener=function(a,d){var b=e(a);b[b.length]=d};this.removeEventListener=function(a,d){var b=e(a),k=b.indexOf(d);0>k||delete b[k]};this.dispatchEvent=function(c){var d=e(c.type);c.setTarget&&c.setTarget(h);setTimeout(a.bind({aa:c,stack:d}),0)}}function F(){D.call(this)}F.prototype=[];
var G={},H={},I={},J=window.BotanJS,BotanJS=null,K=null,M=null;J&&(BotanJS=J.sg[0],K=J.sg[1],M=J.sg[2]);BotanJS=BotanJS||function(){var a=0,e=[],g=[],h=new D,c={write:function(d){e[e.length]=d}};z(c,"read",function(){return e[a++]});z(c,"end",function(){return e.length<=a});z(h,"log",c);z(h,"define",function(d){g[g.length]=d});z(h,"getDef",function(){return g.slice()});return h}();
K=K||function(a){if(H[a])return H[a];for(var e=a.split("."),g=e.length,h=G,c=0;c<g;c++)h[e[c]]=h[e[c]]||{},h=h[e[c]];h.Ma=[];nsObj=new F;nsObj[1]=function(d,b,k){this.l[b]||(this.l[b]=[d,k],d=new BotanEvent("NS_EXPORT",{name:this.M+"."+b,type:d}),BotanJS.dispatchEvent(d))}.bind({l:h,M:a});nsObj[0]=function(d){if(!this.l[d])throw Error("["+this.M+"] Invoke failed: "+d+" does not exists");return this.l[d][1]}.bind({l:h,M:a});nsObj[10]=function(d,b){this.Ma[d]=b}.bind(h);nsObj[11]=function(d,b){throw Error("["+
this.M+(b?"."+b:"")+"] "+d);}.bind({M:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return H[a]=nsObj};
M=M||function(a,e){var g=a.replace(".*","");H[g]&&H[g].dispatchEvent(new BotanEvent("NS_IMPORT",d));if(!e&&I[a])return I[a];for(var h=a.split("."),c=h.length,d=G,g=!1,b=0;b<c;b++){if("*"==h[b]){g=!0;break}d=d[h[b]];if(!d)throw Error("No such class: "+a);}if(d instanceof Array&&"*"!=h[b])return g=null,g=10==d[0]?d[1]():d[1],I[a]=g;h={};for(b in d)c=d[b],c instanceof Array&&(g&&2==c[0]?h[b]=c[1]:3==c[0]?h[b]=c[1]:0==c[0]?Object.defineProperty(h,b,{get:function(){return this.l[this.c][1]}.bind({c:b,
l:d}),set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:b})}):1==c[0]?Object.defineProperty(h,b,{get:function(){return this.l[this.c][1]()}.bind({c:b,l:d}),set:function(b){this.l[this.c][1](b)}.bind({c:b,l:d})}):10==c[0]&&Object.defineProperty(h,b,{get:c[1],set:function(){throw Error("Setting a read-only property: "+this.c);}.bind({c:b})}));return I[a]=h};window.BotanJS={};window.BotanJS.version="1.0.0b";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return M(a)}catch(e){if(J)return J["import"](a);throw e;}};window.BotanJS.sg=[BotanJS,K,M];BotanJS.define("System.utils.IKey");
(function(){function a(g,h){g&&"string"!=typeof g||(this.keyName=g,this.keyValue=h instanceof a?h:void 0!=h?String(h):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var e=K("System.utils");a.prototype.keyName="";a.prototype.keyValue="";z(a,"quickDef",function(){var g=arguments.length;if(0!=g%2)e[11]("Invalid Definition Count","IKey");for(var h=[],c=0;c<g;c+=2)h[h.length]=new a(arguments[c],arguments[c+1]);return h});e[1](2,"IKey",a)})();BotanJS.define("System.utils.Perf");
(function(){for(var a=K("System.utils.Perf"),e=[],g=0;256>g;g++)e[g]=(16>g?"0":"")+g.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0,b=4294967295*Math.random()|0;return e[a&255]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255]+"-"+e[c&255]+e[c>>8&255]+"-"+e[c>>16&15|64]+e[c>>24&255]+"-"+e[d&63|128]+e[d>>8&255]+"-"+e[d>>16&255]+e[d>>24&255]+e[b&255]+e[b>>8&255]+e[b>>16&255]+e[b>>24&255]});a[1](3,"CountSubstr",function(a,c){if(0>=
c.length)return a.length+1;for(var d=0,b=a.indexOf(c);0<=b;b=a.indexOf(c,b))d++,b++;return d});a[1](3,"ArrayReverse",function(a){for(var c=null,d=a.length,b=null,c=0,b=d-1;c<b;c+=1,--b){var d=a[c],k=a[b],d=d^k,k=k^d,d=d^k;a[c]=d;a[b]=k}})})();BotanJS.define("System.Global");
(function(){var a=K("System.Global"),e=Boolean(document.all),g=window.allowed_origins||[],h=window.location.href.match(/^https:\/\//);a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",e);a[1](0,"ALLOWED_ORIGINS",g);a[1](0,"SECURE_HTTP",h)})();BotanJS.define("Dandelion");
(function(){function a(){if(v)return!0;try{return v=M("Dandelion.IDOMElement"),!0}catch(b){}return!1}function e(b,d){if(d&&a()){for(var f=b.length,k=[],l=0;l<f;l++)k[l]=v(b[l]);return k}return b}function g(b,d){b&&d(b)&&b.parentNode&&g(b.parentNode,d)}function h(b,d){return d(b)?b:b.parentNode&&h(b.parentNode,d)}function c(b){return document.createTextNode(b)}function d(d,k,a,c,v){d=document.createElement(d||"div");k&&(d.id=k);a&&(f?d.className=a:d.setAttribute("class",a));if(v)if(v instanceof Array)for(var h in v)d.setAttribute(v[h].keyName,
v[h].keyValue);else v instanceof l&&d.setAttribute(v.keyName,v.keyValue);c&&b(d,c);return d}function b(d,f){if(f instanceof Array)for(var k=f.length,l=0;l<k;l++)f[l]&&b(d,f[l]);else"string"==typeof f?d.appendChild(c(f)):f&&d.appendChild(f)}var k=K("Dandelion"),f=M("System.Global.IE"),l=M("System.utils.IKey"),v;k[1](3,"wrap",d);k[1](3,"wrapc",function(b,f,l){return d(!1,!1,b,f,l)});k[1](3,"wrape",function(b,f){return d(!1,!1,!1,b,f)});k[1](3,"wrapne",function(b,f,l){return d(b,!1,!1,f,l)});k[1](3,
"wrapna",function(b,f){return d(b,!1,!1,!1,f)});k[1](3,"textNode",c);k[1](3,"bubbleUp",h);k[1](3,"chainUpApply",g);k[1](3,"id",function(b,d){var f=document.getElementById(b);return f?d&&a()?v(f):f:f});k[1](3,"tag",function(b,d,f){f=void 0===f?document:f;return e(f.getElementsByTagName(b),d)});k[1](3,"name",function(b,d,f){f=void 0===f?document:f;return e(f.getElementsByName(b),d)});k[1](3,"glass",function(b,d,f){f=void 0===f?document:f;return e(f.getElementsByClassName(b),d)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,c){g.call(this,a,c);this.type=a.toLowerCase();this.handler=c}var e=K("System.utils"),g=e[0]("IKey");m(a,g);a.prototype.type="";a.prototype.handler=null;e[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(c,d){if(c instanceof a)return c;if(d)this.addEventListener=this.addEventListener.bind(c),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(c),this.removeEventListener=this.removeEventListener.bind(c);else{if(c)return new a(c,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function e(){}var g=K("Dandelion"),h=M("System.utils.EventKey");e.prototype.indexOf=function(a){for(var d=this.length,b=0;b<d;b++){var k=this[b];if(k.type==
a.type&&k.handler==a.handler)return b}return-1};m(e,Array);a.prototype.hasListener=function(a){return a instanceof h&&this.k&&-1!=this.k.indexOf(a)?this.k[this.k.indexOf(a)]:null};a.prototype.addEventListener=function(a,d){var b;if("string"==typeof a&&d)b=new h(a,d);else if(a instanceof h)b=a;else return!1;if(this.k)if(0>this.k.indexOf(b))this.k.push(b);else return!1;else this.k=new e,this.k[0]=b;this.addEventListener?this.addEventListener(b.type,b.handler,!1):this.attachEvent?this.attachEvent("on"+
b.type,b.handler):this["on"+b.type]=b.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var d in a)this.addEventListener(a[d])};a.prototype.removeEventListener=function(a,d){d&&(a=new h(a,d));this.k&&delete this.k[this.k.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};g[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(b){b=typeof b;return"number"==b?g:"string"==b?e:h}function e(b,d){return b.nodeName==d}function g(b,d){return b.nodeType==d}function h(){return!1}function c(b,d){if(b instanceof c)return b;if(d)f.call(this,b,!0),this.getDAttribute=this.getDAttribute.bind(b),this.lootChildren=this.lootChildren.bind(b),this.foreach=this.foreach.bind(b),this.reverseChild=this.reverseChild.bind(b),this.first=this.first.bind(b),this.last=this.last.bind(b),this.contains=this.contains.bind(b),this.style=
b.style,this.hasAttribute=function(){}.bind(b),this.removeAttribute=function(b){this.removeAttribute(b)}.bind(b),this.element=b,this.setAttribute=this.setAttribute.bind(b);else{if(b&&void 0!=b.nodeType&&1==b.nodeType)return new c(b,!0);if(void 0===b)return new c(k(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var d=K("Dandelion"),b=M("System.utils.IKey");M("System.utils.Perf");var k=d[0]("wrap"),f=d[0]("IDOMObject");m(c,f);c.prototype.setAttribute=function(d,f){if(d instanceof
b)this.setAttribute(d.keyName,d.keyValue);else if(d instanceof Array)for(var a in d)d[a]instanceof b&&this.setAttribute(d[a].keyName,d[a].keyValue);else this.setAttribute(d,f)};c.prototype.lootChildren=function(b){for(var d=b.childNodes;d.length;)this.appendChild(b.removeChild(d[0]))};c.prototype.getDAttribute=function(b){return(b=this.getAttribute("data-"+b))&&decodeURIComponent(b)};c.prototype.foreach=function(b,d){for(var f=Array.apply([],this.childNodes),a=f.length,k=0;k<a;k++)f[k].nodeType==
b&&d(f[k],this)};c.prototype.first=function(b,d){for(var f=this.childNodes,k=f.length,h=null,c=a(b),g=0;g<k;g++)if(c(f[g],b)&&(void 0===d||d(f[g],this))){h=f[g];break}return h};c.prototype.last=function(b,d){for(var f=this.childNodes,k=null,h=a(b),c=f.length-1;-1<c;c--)if(h(f[c],b)&&(void 0===d||d(f[c],this))){k=f[c];break}return k};c.prototype.contains=function(b){return b.parentElement?b==this?!0:this.contains(b.parentElement):!1};c.prototype.aKeys=function(){for(var d=[],f=this.element.attributes,
a=f.length,k=0;k<a;k++)d.push(new b(f[k].name,f[k].value));return d};c.prototype.reverseChild=function(){for(var b=this.childNodes.length-1;-1<--b;)this.appendChild(this.childNodes[b])};d[1](2,"IDOMElement",c)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,c){g.call(this,"data-"+a,c?encodeURIComponent(String(c)):"")}var e=K("System.utils"),g=e[0]("IKey");m(a,g);e[1](2,"DataKey",a)})();BotanJS.define("System.utils");
(function(){var a=K("System.utils"),e=M("System.Global");a[1](3,"objGetProp",function(a,h,c){if(a&&a[h]){var d=a[h].constructor.toString().match(/function ([^\(]+)/);if(d&&2==d.length&&d[1].toUpperCase()==c.toUpperCase())return a[h]}return null});a[1](3,"objSearch",function(a,h,c){for(var d in a)if(h(a[d]))return a[d][c]||a[d];return null});a[1](3,"objMap",function(a,h){for(var c in a)a[c]=h(a[c])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?e.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(e.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.K=!1;this.loop=function(){for(var h in this.steppers)this.steppers[h]();a++};n(this,"count",function(){return a})}var e=K("System");a.prototype.putStepper=function(a){var h=this.steppers.length;this.steppers[h]=a;return h};a.prototype.start=function(){this.K||(this.id=setInterval(this.loop.bind(this),0),this.K=!0)};a.prototype.stop=function(){this.K&&(this.K=!1,clearInterval(this.id))};a.prototype.steppers=[];n(a.prototype,"started",function(){return this.K});
e[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=K("System.Log"),e=[];a[1](3,"writeLine",function(a,h){h=void 0===h?16:h;var c=!1,d;for(d in e)e[d](a,h),c=!0;!c&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var h=-1;e[h=e.length]=a;return h});a[1](3,"removeHandler",function(a){delete e[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){h&&g.writeLine(Array.prototype.join.call(arguments," "),g.INFO)}var e=K("System.Debug"),g=M("System.Log"),h=M("System.Global").debug,c=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());e[1](3,"Error",function(d){c&&g.writeLine(d.name+"\n\t"+d.message+"\n\t"+d.stack,g.ERROR)});e[1](3,"Info",a);e[1](3,"turnOff",function(d){"info"==d?h=!1:"error"==d&&(c=!1)});e[1](3,"turnOn",function(d){"info"==d?h=!0:"error"==d&&(c=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(b){b.target.removeEventListener("NS_IMPORT",a);b=M("System.Cycle.TICK",!0);b!=d&&b.gb?(h.Info("[System.Cycle] Global Tick exists"),d=null):(h.Info("[System.Cycle] Creating global Tick"),d.start())}var e=K("System.Cycle");M("System.utils");var g=M("System.Tick"),h=M("System.Debug"),c=[],d=new g;d.putStepper(function(){var b=(new Date).getTime(),d;for(d in c){var f=c[d];if(f&&b>f[1]){try{f[0]()}catch(a){h.Error(a);delete c[d];continue}f[2]?delete c[d]:f[1]=b+f[4]}}});e.addEventListener("NS_IMPORT",
a);e[1](3,"next",function(b){c[c.length]=[b,0,!0]});e[1](3,"delay",function(b,d){c[c.length]=[b,(new Date).getTime()+d,!0]});e[1](3,"perma",function(b,d,f){for(var a in c)if(c[a][3]==b)return!1;c[c.length]=[d,(new Date).getTime()+f,!1,b,f]});e[1](3,"permaRemove",function(b){for(var d in c)c[d][3]==b&&delete c[d]});e[1](10,"TICK",function(){return d})})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.V={}}function e(a,c){this.ka=a+"";this.newLine=Boolean(c)}var g=K("Components.Vim.State");e.prototype.newLine=!1;e.prototype.toString=function(){return this.ka};e.prototype.indexOf=function(a,c){return this.ka.indexOf(a,c)};n(e.prototype,"length",function(){return this.ka.length});a.prototype.Ia=function(a){this.V['"']=a};a.prototype.yank=function(a,c){var d=new e(a,c);this.Ia(d);this.V[0]=d};a.prototype.change=function(a,c){var d=new e(a,c);this.Ia(d);for(var b=this.V,
k=9;1<k;k--)void 0!=b[k-1]&&(b[k]=b[k-1]);b[1]=d};a.prototype.get=function(a){a||0===a||(a='"');return this.V[a]};g[1](2,"Registers",a)})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var d=0;d<h;d++)for(var b=g[d],k=b.length,f=0;f<k;f++){var l=b[f];if(l[0]<=a&&a<=l[1]){a=b;break a}}a=[]}this.ab=a}var e=K("Components.Vim.Syntax"),g=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]]],h=g.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var d=this.ab,b=d.length;a=a.charCodeAt(0);for(var k=0;k<b;k++){var f=d[k];if(f[0]<=a&&a<=f[1])return!0}return!1};
e[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.va=this.Fa=this.P=this.U=-1;this.za=null}function e(b){this.Q=b;this.$={}}function g(b,d){if(!d)throw Error("Parent not found");var l=new a;l.va=d[2];l.U=d[0];l.P=d[1];if(-1<d[3]){var v=b.find(d[3]);l.za=g(b,v)}return l}function h(b,a){for(var l=a.length,v=b.split("\n"),c=v[0],v=v[1],h=[],g=[],e=0,t=[],w=c.length,x=v.length,y=0;y<l;y++){var B=a.substr(y,x);if(a.substr(y,w)==c)h[e]=y,e++,y+=w-1;else if(B==v){B=y;if(0==e)g.push(B);else{var A=[];A[0]=h[--e];A[1]=B;A[2]=
e;A[3]=0<e?h[e-1]:-1;t.push(A)}y+=x-1}}g.length&&d.Info('Unmatched opening "'+c+'"@'+g.join(", "));0<e&&d.Info('Unmatched closing "'+v+'"@'+h.slice(0,e));this.xa=t}var c=K("Components.Vim.Syntax"),d=M("System.Debug"),b=c[0]("Word");h.prototype.find=function(b,d){void 0==d&&(d=0);for(var a=this.xa,c=a.length,h=0;h<c;h++){var g=a[h];if(g[d]==b)return g}return null};e.prototype.bracketAt=function(b){var d=this.Q.content,l=1,c=null,h=d[b];switch(h){case "{":l=0;case "}":c=this.D("{\n}");break;case "[":l=
0;case "]":c=this.D("[\n]");break;case "(":l=0;case ")":c=this.D("(\n)");break;case "/":if("*"==d[b-1]){h="*/";b--;break}else if("*"==d[b+1]){h="/*";break}return new a;case "*":if("/"==d[b-1]){h="/*";b--;break}else if("/"==d[b+1]){h="*/";break}return new a;default:return new a}if(!c)switch(h){case "/*":l=0;case "*/":c=this.D("/*\n*/");break;default:return new a}d=c.find(b,l);c=g(c,d);c.Fa=b;return c};e.prototype.bracketIn=function(b,d){var l="{[(".indexOf(b);0>l&&(l="}])".indexOf(b));if(0>l)throw Error("Unsupported bracket: "+
b);for(var c=this.D("{[("[l]+"\n"+"}])"[l]),h=c.xa,e=h.length,r=null,l=0;l<e;l++){var p=h[l];p[0]<=d&&d<=p[1]&&(r&&r[2]<p[2]||!r)&&(r=p)}if(r){c=l=g(c,r);do c.U++,c.P--;while(c=c.parent);return l}return new a};e.prototype.D=function(b){if(this.$[b])return this.$[b];var d=new h(b,this.Q.content);return this.$[b]=d};e.prototype.reset=function(){this.$={}};e.prototype.quoteAt=function(b){switch(this.Q.content[b]){default:return{level:0,open:-1,close:-1}}};e.prototype.wordAt=function(d){var f=this.Q.content,
l=f.length,c=d,h=d,g=new b(f[d]);if(0<d)for(;g.test(f[--c]););if(d<l)for(;g.test(f[++h]););d=new a;d.U=0<c?c+1:0;d.P=h-1;return d};n(a.prototype,"parent",function(){return this.za});n(a.prototype,"open",function(){return this.U});n(a.prototype,"close",function(){return this.P});n(a.prototype,"level",function(){return this.va});n(a.prototype,"selected",function(){return this.Fa});c[1](2,"Analyzer",e);c[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,c){this.prev=null;this.cols=a;this.next=c;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=8;c&&(c.prev=this)}var e=K("Components.Vim");M("System.Debug");var g=M("System.utils.Perf.CountSubstr");a.prototype.N=function(a,c,d){this.lineNum=d;if(void 0==a||""===a)this.lineNum=++d,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.N(a,c,d+1);else{this.placeholder=!1;var b="",k=!1,f=0,l=0,g=this.tabWidth-1;if(c){for(;f<this.cols-l*g;f++){var q=a[f];if(void 0===
q)break;if("\n"==q){k=!0;f++;break}else"\t"==q&&l++;b+=q}k||f!=this.cols||"\n"!=a[f]||(f++,k=!0)}else for(k=!0;;f++){q=a[f];if(void 0===q)break;if("\n"==q){f++;break}else"\t"==q&&l++;f<this.cols-l*g&&(b+=q)}this.next&&(this.next.br=k,this.next.N(a.substr(f),c,k?d+1:d));this.content=b}};a.prototype.toString=function(){var a=this.cols-g(this.content,"\t")*(this.tabWidth-1);return this.content.length<a?this.content+" ":this.content||" "};n(a.prototype,"nextLine",function(){for(var a=this,c=this.lineNum;(a=
a.next)&&a.lineNum==c;);return a});n(a.prototype,"visualLines",function(){for(var a=[this],c=this;(c=c.next)&&!c.br;)a.push(c);return a});e[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");
(function(){function a(){this.L=[];this.Va=[];this.Ea=this.ta=this.d=0}var e=K("Components.Vim.State");a.prototype.undo=function(){var a=this.d-1;return-1!=a&&this.L.length?this.L[this.d=a]:null};a.prototype.redo=function(){var a=this.L[this.d];return a?(this.d++,a):null};a.prototype.save=function(){this.Ea=this.d};a.prototype.record=function(a){this.L[this.d++]=a;this.Va[this.ta++]=a;delete this.L[this.d];a.id=this.ta};n(a.prototype,"changed",function(){return this.Ea!=this.d});e[1](2,"Recorder",
a)})();BotanJS.define("Components.Vim");VIMRE_VERSION="1.0.0b";
(function(){function a(a,b,k){if(void 0==a[b])return b;var f=0;return a[b].replace(/%\d+/g,function(){return k[f++]})}var e=K("Components.Vim"),g={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL  --",VISLINE:"-- VISUAL LINE --",REGISTERS:"--- Registers ---",WRITE:'"%1" %2L, %3C written',WAIT_FOR_INPUT:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",
UNDO_LIMIT:"Already at oldest change",REDO_LIMIT:"Already at newest change",LINES_FEWER:"%1 fewer line(s)",LINES_MORE:"%1 more line(s)",LINES_YANKED:"%1 line(s) yanked",SEARCH_HIT_BOTTOM:"search hit BOTTOM, continuing at TOP",SEARCH_HIT_TOP:"search hit TOP, continuing at BOTTOM",REPLACE:"%1 substitution(s) on %2 line(s)"},h={E35:"No previous regular expression",E37:"No write since last change (add ! to override)",E481:"No range allowed",E492:"Not an editor command: %1",E486:"Pattern not found: %1",
EX1:"Pattern Error( %1 )",TODO:"%1 is not implemented yet",MISSING_FEATURE:'Sorry, I thought this command wasn\'t useful enough to implement. Please file a feature request titled "Implement %1" in github if you think this is important.'},c=new Audio("data:audio/ogg;base64,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");
e[1](3,"Message",function(d){return a(g,d,Array.prototype.slice.call(arguments,1))});e[1](3,"Error",function(d){return d+": "+a(h,d,Array.prototype.slice.call(arguments,1))});e[1](3,"Beep",function(){setTimeout(function(){c.pause();c.currentTime=0;c.play()},0)})})();BotanJS.define("Components.Vim.Actions.WRITE");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Components.Vim.Message"),h=M("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var d=this.a;a=d.Vim;a.content=d.feeder.content.slice(0,-1);a=g("WRITE",a.stage.element.id,h(a.content,"\n"),a.content.length);d.rec.save();for(var d=this.a.feeder.firstBuffer.cols,b=a.length;b<d;b++)a+=" ";
this.b=a};a.prototype.getMessage=function(){return this.b};e[1](2,"WRITE",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,h,c){if(void 0==a[h])return h;var d=0;return a[h].replace(/%\d+/g,function(){return c[d++]})}var e={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};K("Components.Vim.DateTime")[1](3,"String",function(g){return a(e,g,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(b,a){var d=b%10,l=b%100;if(1>=b)throw Error("Invalid number of Time units");return 2<=b&&4>=b?g(a[0],b):1==d&&11!=l?g(a[1],b):2<=d&&4>=d&&!(12<=l&&14>=l)?g(a[2],b):g(a[3],b)}var e=K("Components.Vim.DateTime"),g=e[0]("String"),h=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],c=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],d=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];e[1](3,"RelativeTime",function(b){var k=Math.round(.001*((new Date).getTime()-b.getTime()));if(31536E3<k)result=g("OverAYearAgo");else if(3952800<k)if(b=Math.round((k+1317600)/2635200),2<=b&&4>=b)result=g("XMonthsAgo_2To4",b);else if(5<=b&&12>=b)result=g("XMonthsAgo_5To12",b);else throw Error("Invalid number of Months");else if(2116800<=k)result=g("AboutAMonthAgo");else if(604800<=k)b=Math.round(k/604800),result=1<b?g("XWeeksAgo_2To4",b):g("AboutAWeekAgo");else{if(432E3<=k)switch(b.getDay()){case 1:b=
g("last Monday");break;case 2:b=g("last Tuesday");break;case 3:b=g("last Wednesday");break;case 4:b=g("last Thursday");break;case 5:b=g("last Friday");break;case 6:b=g("last Saturday");break;case 0:b=g("last Sunday");break;default:b=g("last Sunday")}else if(86400<=k)switch(b.getDay()){case 1:b=g("on Monday");break;case 2:b=g("on Tuesday");break;case 3:b=g("on Wednesday");break;case 4:b=g("on Thursday");break;case 5:b=g("on Friday");break;case 6:b=g("on Saturday");break;case 0:b=g("on Sunday");break;
default:b=g("on Sunday")}else b=7200<=k?a(Math.round(k/3600),h):3600<=k?g("AboutAnHourAgo"):120<=k?a(Math.round(k/60),c):60<=k?g("AboutAMinuteAgo"):a(1<k?k:2,d);result=b}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var e=K("Components.Vim.State"),g=M("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.sa=a;this.$a=new Date;this.id=0};a.prototype.play=function(){this.sa&&this.sa()};n(a.prototype,"time",function(){return g(this.$a)});e[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.FIND");
(function(){function a(b){this.a=b;this.b="";b.suppressEvent()}function e(b){for(var a="",d=b.length,l=1;l<d;l++)switch(b[l]){case "^I":a+="\t";break;case "\\":var c=b[++l];if(-1!="nrts.[]()^".indexOf(c))a+="\\"+c;else throw Error('Missing token impl: "'+c+'"');break;default:a+=b[l]}return new RegExp("("+a+")","g")}var g=K("Components.Vim.Actions");M("System.Debug");var h=M("Components.Vim.Error"),c=M("Components.Vim.Message"),d=[];a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=
function(a,k){a.preventDefault();if(k){if(2>k.length){if(1>d.length)return this.b=h("E35"),!0;k=d}d=k}if(1>d.length)return this.b=h("E35"),!0;var f;try{f=e(d)}catch(l){return this.b=h("EX1",l.message),!0}var g=this.a.feeder.content,q=this.a;k=q.aPos;for(var s,r,p,t=[];null!==(s=f.exec(g));){p||(p=s.index);if(k<s.index){r=s.index;break}t.push(s.index)}if(a.kMap("N")){if(r=t[t.length-2],void 0==r)for(this.b=c("SEARCH_HIT_TOP");null!==(s=f.exec(g));)r=s.index}else void 0!=p&&void 0==r?(r=p,this.b=c("SEARCH_HIT_BOTTOM")):
this.b=d.join("");void 0==r?this.b=h("E486",d.slice(1).join("")):q.moveTo(r)};a.prototype.getMessage=function(){return this.b};z(a,"Pattern",e);g[1](2,"FIND",a)})();BotanJS.define("Components.Vim.Actions.REPLACE");
(function(){function a(a){this.a=a;this.u=this.b="";this.Ba=0;this.ha=this.ha.bind(this);this.ga=0;this.ia=[];a.suppressEvent()}function e(a){for(var b="",d=a.length,c=[""],h=1;h<d;h++)switch(a[h]){case "^I":b+="\t";break;case "\\":h++;var g=a[h];if(-1!="$nrt\\".indexOf(g)){b+=JSON.parse('"\\'+g+'"');break}if(-1!="012345678".indexOf(g))c.push(b.length),b+=g;else{if("9"==g)throw Error("Back ref 9 is reserved for back ref 0");throw Error('Missing token impl: "'+tok+'"');}break;default:b+=a[h]}c[0]=
b;return c}var g=K("Components.Vim.Actions"),h=M("System.Debug"),c=M("Components.Vim.State.Stack"),d=M("Components.Vim.Error");M("Components.Vim.Message");M("System.utils.Perf.CountSubstr");var b=g[0]("FIND");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f){a.preventDefault();var l,c;try{var g=f.indexOf("/",0),s=f.indexOf("/",g+1);if(-1==g)return this.b=d("MISSING_FEATURE","REPLACE %s"),!0;if(-1==s)l=b.Pattern(f),c=f;else{c=f.slice(g,s);l=b.Pattern(c);var r=
f.indexOf("/",s+1);this.u=-1==r?e(f.slice(s)):e(f.slice(s,r));this.Ba=this.u[0].length}}catch(p){return this.b=d("EX1",p.message),!0}h.Info("Replace: "+l+", [ "+this.u+" ]");g=this.a.feeder;l=g.content.slice(0,-1).replace(l,this.ha)+"\n";this.ia.length||(this.b=d("E486",c.join("")));g.content=l;this.H();g.pan();g.softReset();return!0};a.prototype.ha=function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1,-2),d=this.ga+arguments[arguments.length-2],c="",h=this.u[0],g=0;g<this.Ba;g++)var e=
this.u.indexOf(g,1),c=-1==e?c+h[g]:c+b[h[this.u[e]]];b=c.length;this.ga+=b-a.length;h=[];h[0]=a;h[1]=d;h[2]=b;this.ia.push(h);return c};a.prototype.H=function(){var a=new c,b=this.ia,d=b.length,h=this.a,g=h.feeder;a.store(function(){for(var a=g.content,k="",c=0,e=-1,w=0;w<d;w++){var x=b[w],y=x[1],B=x[2],A=x[0],L=A.length,k=k+(a.substring(c,y)+A),c=x[1]+B;x[0]=a.substr(y,B);x[1]=k.length-L;x[2]=L;-1==e&&(e=y)}k+=a.substring(c);g.content=k;h.moveTo(e);g.pan()});h.rec.record(a)};a.prototype.getMessage=
function(){return this.b};g[1](2,"REPLACE",a)})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(a){this.a=a;this.j=a.aPos;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Components.Vim.Message"),h=M("Components.Vim.Beep"),c=M("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();if(!a.ModKeys&&!a.kMap("i")){var k=a.target.ba,f=this.a,l=!1,e=!1;if(void 0==b){l=!0;b=this.j;var q=f.aPos;if(this.j!=q)a.kMap("^")?b--:
a.kMap("l")?f.moveX(-1):a.kMap("h")?b=q:a.kMap("j")?(e=!0,f.lineEnd(!0),b=f.aPos,f.moveY(-1),f.lineStart(),this.j=f.aPos):a.kMap("k")?(e=!0,f.moveY(1),f.lineEnd(!0),b=f.aPos,f.moveY(-1),f.lineStart()):this.j<q&&(b=q,f.moveTo(this.j));else if(a.kMap("y"))e=!0,f.lineEnd(!0),b=f.aPos,f.lineStart();else if(a.range)b=a.range.close,f.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))b=f.aPos;else return h(),!0}}q=b;a=f.aPos;a<q&&(q=f.aPos,a=b);f.moveTo(q);f=f.feeder.content.substring(q,
a+1);k.yank(f,e);if(k=c(f,"\n"))this.b=g("LINES_YANKED",k);return l}};a.prototype.getMessage=function(){return this.b};e[1](2,"YANK",a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,h){this.a=a;this.Wa=void 0==h?a.aPos:h;this.Xa=this.Da()}var e=K("Components.Vim.State");a.prototype.save=function(a,h){var c=this.a,d=c.feeder,b=this.Wa;0>a&&(b+=a,a=0);var k=this.Xa,f=this.Da(),l=k;return function(){var e=d.content.substr(b,a);d.content=d.content.substring(0,b)+h+d.content.substring(b+a);a=h.length;h=e;c.PStart=l.c;c.PEnd=l.c+1;c.X=l.x;c.Y=l.y;d.panX=l.bb;d.panY=l.cb;d.pan();l=l==k?f:k}};a.prototype.Da=function(){var a=this.a,a={c:a.PStart,x:a.X,y:a.Y,bb:a.feeder.panX,
cb:a.feeder.panY};0<a.x&&(--a.c,--a.x);return a};e[1](2,"Stator",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(a){this.a=a;this.fa=0;this.j=a.aPos;this.ya=this.a.feeder.panY;a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Components.Vim.State.Stator"),h=M("Components.Vim.State.Stack"),c=M("Components.Vim.Message"),d=M("Components.Vim.Beep"),b=M("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,f){a.preventDefault();if(!a.ModKeys){var l=a.target.ba,c=this.a,
e=c.feeder,s=!1,r=!1;if(void 0==f){s=!0;f=this.j;var p=c.aPos;if(this.j!=p)a.kMap("^")?f--:a.kMap("l")?c.moveX(-1):a.kMap("h")?f=p:a.kMap("j")?(r=!0,c.lineEnd(!0),f=c.aPos,c.moveY(-1),c.lineStart(),this.j=c.aPos):a.kMap("k")?(r=!0,c.moveY(1),c.lineEnd(!0),f=c.aPos,c.moveY(-1),c.lineStart()):this.j<p&&(f=p,c.moveTo(this.j));else if(a.kMap("d"))r=!0,c.lineEnd(!0),f=c.aPos,c.lineStart();else if(a.range)f=a.range.close,c.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))f=c.aPos;else return d(),
!0}}var t=e.content,w=f;a=c.aPos;a<w&&(w=c.aPos,a=f);p=t.substring(w,a+1);l.change(p,r);this.fa=b(p,"\n");e.content=t.substring(0,w)+t.substring(a+1);e.pan(void 0,this.ya<e.panY?this.ya-e.panY:void 0);c.moveTo(w);var l=new g(c,w),e=new h,x=l.save(0,p);e.store(function(){x();c.moveX(1)});c.rec.record(e);return s}};a.prototype.getMessage=function(){return this.fa?c("LINES_FEWER",this.fa):""};e[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.Ca(a);this.b=g("VISUAL");a.blink=!1;a.pSpace=!0}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Components.Vim.Message"),h=e[0]("YANK"),c=e[0]("DELETE");a.prototype.Ca=function(a){this.a=a;this.v=a.aPos;this.J=this.Ga=a.PStart};a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.blink=!0;a.pSpace=!1;a.PStart=this.J;a.PEnd=this.J+1;a.feeder.wrap&&0<a.X&&(a.suppressEvent(),a.moveX(-1),a.moveX(1),a.unsuppressEvent())};a.prototype.handler=
function(a){a.preventDefault();if(!a.ModKeys){var b=this.a,k=null;a.kMap("y")?k=new h(b):a.kMap("d")&&(k=new c(b));if(k){b.suppressEvent();if(k.constructor==c&&this.v<b.aPos){var f=b.aPos;b.moveTo(this.v,!0);this.v=f}k.handler(a,this.v);k.constructor!=c&&b.moveTo(this.v);this.b=k.getMessage();k.dispose();b.unsuppressEvent();this.J=b.PStart;return!0}a.range&&(b.suppressEvent(),a=a.range,b.aPos==this.v&&(b.moveTo(a.open,!0),this.Ca(b)),b.unsuppressEvent(),b.moveTo(a.close,!0));a=this.Ga;k=b.PStart;
f=k-a;0<=f?(this.J=k,k+=1):0>f&&(a+=f,k=this.Ga+1,this.J=a);b.PStart=a;b.PEnd=k}};a.prototype.getMessage=function(){return this.b};e[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Actions.JOIN_LINES");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Components.Vim.State.Stator"),h=M("Components.Vim.State.Stack"),c=M("Components.Vim.Beep");M("Components.Vim.Message");M("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,b){a.preventDefault();var k=this.a,f=k.feeder,l,e,q,s;if(b)l=b.start;else{s=k.aPos;k.lineEnd(!0);q=new g(k);l=k.aPos;k.moveY(1);k.lineStart();
e=k.aPos;if(e<l)return k.moveTo(s),c(),!0;var r=f.content;s=f.content.substring(l,e);f.content=r.substring(0,l)+" "+r.substr(e)}f.pan();k.moveTo(l);f=new h;f.store(q.save(1,s));k.rec.record(f)};a.prototype.getMessage=function(){return this.b};e[1](2,"JOIN_LINES",a)})();BotanJS.define("Components.Vim.Actions.EDITOR_COMMAND");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions"),g=M("System.Debug"),h=M("Components.Vim.Error");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,d){a.preventDefault();var b=1,k="",f=[];if(-1!=".$%".indexOf(d[b]))k=d[b++];else for(;-1!="0123456789".indexOf(d[b]);b++)k+=d[b];var l="";if(-1!="/?".indexOf(d[b]))l=d[b];else for(var v=/\w/g,q=d[b];q=d[b];b++)if(q.match(v))l+=q;else break;v=!1;switch(l){case "s":case "su":case "substitute":v=
!0;f[1]="REPLACE";break;case "/":v=!0;f[1]="FIND";break;case "buffers":case "ls":f[1]="BUFFERS";break;case "w":case "write":f[1]="WRITE";break;case "q":case "quit":f[1]="QUIT";break;case "register":case "registers":f[1]="REGISTERS";break;case "ver":case "version":f[1]="VERSION";break;case "h":case "help":f[1]="HELP"}""!==k&&(v?f[0]=k:f[3]=h("E481"));f[2]=d.slice(b);if(f[3])return this.b=f[3],!0;if(!f[1])return this.b=h("E492",d.slice(1).join("")),!0;try{e[0](f[1])}catch(s){return this.b=h("TODO",
f[1]),!0}try{this.a.openRunAction(f[1],a,f[2],f[0]),this.b=this.a.message}catch(r){g.Error(r)}return!0};a.prototype.getMessage=function(){return this.b};e[1](2,"EDITOR_COMMAND",a)})();BotanJS.define("Components.Vim.Actions.QUIT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Components.Vim.Error");M("System.utils.Perf.CountSubstr");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=this.a;var c=a.Vim;if(a.rec.changed){a=g("E37");for(var c=this.a.feeder.firstBuffer.cols,d=a.length;d<c;d++)a+=" ";this.b=a}else return c.dispose(),!0};a.prototype.getMessage=function(){return this.b};e[1](2,"QUIT",
a)})();BotanJS.define("Components.Vim.Actions.BUFFERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");var g=M("Dandelion"),h=M("Components.Vim.Message");M("System.utils.Perf.CountSubstr");var c=M;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();g.tag("textarea");var b=this.a.Vim,k=c("Components.Vim.VimArea").Instances;a=":buffers";for(var f in k){var l=k[f],e=l.index+" ",q=l.contentFeeder.cursor,e=e+((l==b?"%a":"  ")+" "),e=e+
((q.rec.changed?"+":" ")+" "),e=e+('"'+l.stage.element.id+'" line '+(q.f().lineNum+1));a+="\n  "+e}b=h("WAIT_FOR_INPUT");k=this.a.feeder.firstBuffer.cols;for(f=a.length;f<k;f++)a+=" ";this.b=a+"\n"+b};a.prototype.getMessage=function(){return this.b};e[1](2,"BUFFERS",a)})();BotanJS.define("Components.Vim.Actions.UNDO");
(function(){function a(a){this.a=a;this.q="UNDO COMMAND"}var e=K("Components.Vim.Actions"),g=M("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(a.play(),this.q="<<TODO>>; before #"+a.id+"  "+a.time):this.q=g("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.q};e[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.REGISTERS");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");M("Components.Vim.Error");var g=M("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var c=a.target.ba;a=":register\n"+g("REGISTERS");for(var d=0,b='"0123456789-.:%/='[d];void 0!=b;d++,b='"0123456789-.:%/='[d]){var k=c.get(b);k&&(a+='\n"'+b+"   "+k.toString().replace("\t","^I").replace("\n","^J"))}c=g("WAIT_FOR_INPUT");
b=this.a.feeder.firstBuffer.cols;for(d=a.length;d<b;d++)a+=" ";this.b=a+"\n"+c};a.prototype.getMessage=function(){return this.b};e[1](2,"REGISTERS",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var e=K("Components.Vim.Actions");M("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var e=a.length,c=[],d=0;d<e;d++)c[d]="\n"==a[d]?"a":a.charCodeAt(d).toString(16),1==c[d].length?c[d]="0"+c[d]:0==c[d].length&&(c[d]="00");this.b=c.join(" ")};a.prototype.getMessage=function(){return this.b};e[1](2,"PRINT_HEX",a)})();BotanJS.define("Components.Vim.Actions.VERSION");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions");M("System.Debug");M("Components.Vim.Error");var g=M("Components.Vim.Message");a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();a=":version\nVim;Re - Vim; Reverse Engineered for textarea v"+VIMRE_VERSION;a+="\n  + BotanJS - v1.0.0b\nProject home - https://github.com/tgckpg/BotanJS-vim";a+="\n  by \u659f\u914c\u9d6c\u5144 (penguin) - https://blog.astropenguin.net/";
a+="\n";for(var c=g("WAIT_FOR_INPUT"),d=this.a.feeder.firstBuffer.cols,b=a.length;b<d;b++)a+=" ";this.b=a+"\n"+c};a.prototype.getMessage=function(){return this.b};e[1](2,"VERSION",a)})();BotanJS.define("Components.Vim.Actions.REDO");
(function(){function a(a){this.a=a;this.q="REDO COMMAND"}var e=K("Components.Vim.Actions"),g=M("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(a.play(),this.q="<<TODO>>; before #"+a.id+"  "+a.time):this.q=g("REDO_LIMIT")};a.prototype.getMessage=function(){return this.q};e[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.PUT");
(function(){function a(a){this.a=a;this.b="";a.suppressEvent()}var e=K("Components.Vim.Actions"),g=M("Components.Vim.State.Stator"),h=M("Components.Vim.State.Stack"),c=M("Components.Vim.Message"),d=M("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var k=this.a.Vim.ba.get(!1);if(!k)return!0;var f=k.length,l=d(k,"\n"),e=this.a,q=e.feeder,s=k.newLine,r=a.kMap("P")?0:-1;s&&(e.moveY(-r),
e.lineStart());a=new g(e);var p=e.aPos;q.content=q.content.substring(0,p)+k+q.content.substring(p);q.pan();e.moveTo(0<l?p:p+f,!0);k=new h;if(s){var t=a.save(f,"");k.store(function(){t();e.moveY(r)})}else k.store(a.save(f,""));e.rec.record(k);l&&(this.b=c("LINES_MORE",l));e.moveX(-1);return!0};a.prototype.getMessage=function(){return this.b};e[1](2,"PUT",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.Ya=new h(a);this.H("",!0);a=this.a.feeder.firstBuffer.cols;for(var b=c("INSERT"),k=b.length;k<a;k++)b+=" ";this.b=b}var e=K("Components.Vim.Actions"),g=M("Components.Vim.State.Stack"),h=M("Components.Vim.State.Stator");M("System.Debug");var c=M("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.b="";this.H("",!0);this.a.moveX(-1)};a.prototype.H=function(a,b){if(b||!this.W){if(this.W){if(0==this.s&&""===this.r)return;this.W.store(this.Ya.save(this.s,
this.r));this.a.rec.record(this.W)}this.s=0;this.r="";this.W=new g}this.s+=a.length};a.prototype.Ua=function(a){var b=this.a,c=b.feeder;if(a.kMap("BS")){if(0==b.X&&0==c.panY&&0==b.Y)return;b.moveX(-1,!0,!0);a=b.aPos;0>=this.s&&(this.r=c.content.substr(a,1)+this.r);c.content=c.content.substring(0,a)+c.content.substring(a+1);this.s--}else if(a.kMap("Del"))a=b.aPos,this.r+=c.content.substr(a,1),c.content=c.content.substring(0,a)+c.content.substring(a+1);else return;c.pan();c.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};
a.prototype.handler=function(a){a.preventDefault();var b;a:switch(b=a.key,b){case "Tab":b="\t";break a;case "Enter":b="\n";break a}if(1!=b.length)this.Ua(a);else{a=this.a;var c=a.feeder,f=a.aPos;c.content=c.content.substring(0,f)+b+c.content.substring(f);"\n"==b?(c.softReset(),c.pan(),a.moveY(1),a.lineStart()):(c.pan(),a.moveX(1,!1,!0));c.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.H(b)}};a.prototype.getMessage=function(){return this.b};e[1](2,"INSERT",a)})();BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new c;this.action=null;this.blink=!0;this.pSpace=!1;this.F=this.Z=0}function e(a,d){var f=a.f(),c=a.Y+d,e=a.Y;f||(f=a.feeder.firstBuffer,e=0,c=d);for(f!=a.feeder.firstBuffer&&e--;e<c&&!f.placeholder;f=f.nextLine)f.br&&e++;return e}var g=K("Components.Vim"),h=M("System.Debug"),c=M("Components.Vim.State.Recorder"),d=M("Components.Vim.Actions.*");a.prototype.Vim;a.prototype.moveTo=
function(a,d){var f=this.feeder.content,c=this.f(),e=c.lineNum;c.placeholder&&(this.Y=e=0);for(var g=0,h=0,r=f.indexOf("\n");0<=r&&!(a<=r);r=f.indexOf("\n",r))h=r,r++,g++;f=g-e;e=a<h?h-a:a-h;e+=Math.ceil(e/c.cols)-1;f&&this.moveY(f);0<this.f().lineNum&&h<=a&&e--;this.moveX(-Number.MAX_VALUE);this.moveX(e,!1,d)};a.prototype.moveX=function(a,d,f){var c=this.pX,e=Boolean(a);0<this.F&&(a+=this.F,this.F=0);e&&(c=this.X+a);a||(a=1);var g=this.feeder;if(d&&0>c&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),
this.lineEnd(f);else{var h=this.f(),r=h.visualLines.join("\n");d=r.length;var p=0,t=!0;if(1<d){for(var w=h.lineNum-1,p=g.content,t=p.indexOf("\n"),x=0;0<=t&&w!=x;t=p.indexOf("\n",t),x++)t++;0==x&&-1==t&&(t=0);w=p.indexOf("\n",t+1);w=-1==w?p.length:w;p=(t=0<(w-t-1)%h.cols)?f?d-1:d-2:f?d:d-1}h=r[c];(d=void 0==h||d==c+1&&" "==h)?c=0<a?p:0:"\n"==h&&(c+=a);g.wrap&&d&&!t&&f&&(this.F=1);this.X=c;e&&(this.pX=c,this.updatePosition())}};a.prototype.lineStart=function(){this.pX=0;this.moveX();this.updatePosition()};
a.prototype.lineEnd=function(a){this.moveX(Number.MAX_VALUE,!1,a)};a.prototype.updatePosition=function(){var a=0,d=0,f=this.feeder.lineBuffers[0];a:for(;f&&d<this.Y;d++)for(;f;){if(f.next&&f.next.placeholder)break a;a+=f.toString().length+1;if((f=f.next)&&f.br)break}this.PStart=a=this.X+a+this.F;this.PEnd=a+1;this.w()};a.prototype.w=function(){0<this.Z?h.Info("Event suppressed, suppression level is: "+this.Z):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=
function(a){var d=this.Y+a,f=this.feeder,c;if(0>d)f.pan(void 0,d),this.Y=0,this.moveX(),this.updatePosition(),f.softReset();else if(!f.EOF&&f.moreAt<d){f=this.feeder;if(f.linesTotal<d){for(;!f.EOF;)f.pan(void 0,1);a=e(this,a)}else{c=f.lastBuffer.lineNum;var d=d-f.moreAt,g=this.f().lineNum;f.EOF||f.pan(void 0,d);for(d=g+a;!f.EOF&&(f.lastBuffer.lineNum==c||f.lastBuffer.lineNum<d);)f.pan(void 0,1);this.Y=0;for(c=this.f();c&&c.lineNum!=d&&!c.placeholder;this.Y++,c=this.f());a=this.Y;f.EOF||f.lastBuffer.next.lineNum!=
c.lineNum||a--}this.Y=a;this.moveX();this.updatePosition();f.softReset()}else{if(0<a){c=this.f();if(c.nextLine.placeholder)return;d=e(this,a)}this.Y=d;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a){this.action&&this.action.dispose();h.Info("openAction: "+a);this.action=new d[a](this);this.t=null;this.w()};a.prototype.closeAction=function(){this.action&&(this.action.dispose(),this.t=this.action.getMessage(),this.action=null,h.Info("closeAction: "+this.t),this.Vim.contentAnalyzer.reset(),
this.w())};a.prototype.openRunAction=function(a,c,f,l,e,g,s){h.Info("OpenRunAction: "+a);a=new d[a](this);a.handler(c,f,l,e,g,s);this.t=a.getMessage();a.dispose();this.Vim.contentAnalyzer.reset();this.w()};a.prototype.suppressEvent=function(){++this.Z};a.prototype.unsuppressEvent=function(){--this.Z};a.prototype.f=function(){for(var a=this.feeder,d=a.firstBuffer,a=a.lastBuffer.next,f=0;d!=a;d=d.next)if(d.br&&f++,this.Y==f)return d;return null};n(a.prototype,"aX",function(){var a=this.X,d=1;if(this.feeder.wrap){var f=
this.f().visualLines,c;for(c in f){var e=f[c],g=e.content.toString().length,e=e.toString().length,a=a-(e+1);if(0<=a)d+=g;else if(0>a){d+=a+e;break}}}return d});n(a.prototype,"aPos",function(){var a=this.feeder,d=this.f().lineNum,f=0;if(0<d){f=a.content.indexOf("\n");for(i=1;-1!=f&&i<d;i++)f=a.content.indexOf("\n",f+1);a.wrap&&f++}return f+=this.aX});n(a.prototype,"face",function(){return"\u2588"});n(a.prototype,"message",function(){if(this.t){var a=this.t;this.t=null;return a}return this.action&&
this.action.getMessage()});n(a.prototype,"position",function(){return{start:this.PStart,end:this.PEnd}});g[1](2,"Cursor",a)})();BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,b){var c=[];c[a]=new g(b);for(var f=a-1;0<=f;f--)c[f]=new g(b,c[f+1]);this.lineBuffers=c;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new h(this);this.dispatcher=new D;this.C=null;this.T=-1;this.I=a}var e=K("Components.Vim");M("System.Debug");var g=e[0]("LineBuffer"),h=e[0]("Cursor"),c=M("System.utils.Perf.CountSubstr");a.prototype.init=function(a,b){this.content=a;this.setWrap(b);this.firstBuffer.N(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var b=this,c=a?function(){return!0}:function(a){return!a.placeholder};this.Sa=function(a,d){for(var e=(void 0==a?"":a)+"",g=!1,h=0;a&&h<d&&(a=a.next)&&c(a);h++)g||a.br&&d<h+a.visualLines.length?(g||(b.C=a),g=!0,e+="\n@"):e+="\n"+a;return e};this.Ta=function(){for(var a=b.lineBuffers[b.Ra],d=b.Aa+1,e=0;a&&e<d&&(a=a.next)&&c(a);e++)if(a.br&&d<e+a.visualLines.length){b.C=a;break}}};a.prototype.render=function(a,b){var c=this.lineBuffers;
if(void 0==a)a=0;else if(this.I<a)return"";if(void 0==b||this.I-a<b)b=this.rows-a;if(0==b)return"";this.Ra=a;this.Aa=b-1;return this.Sa(c[a],this.Aa)};a.prototype.pan=function(a,b){void 0==a&&(a=0);void 0==b&&(b=0);var c=this.panX+a,f=this.panY+b,e=-1,g=0;0>f&&(f=0);var h=this.content.slice(0,-1);if(0<f)for(e=h.indexOf("\n"),g=1;-1!=e&&g<f;g++){var s=h.indexOf("\n",e+1);if(-1==s){f=g;break}e=s}this.firstBuffer.N(this.content.substr(e+1),this.wrap,g);this.panX=c;this.panY=f};a.prototype.softReset=
function(){this.T=-1;this.C=null;this.Ta()};n(a.prototype,"linesTotal",function(){return c(this.content,"\n")});n(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});n(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.I-1]});n(a.prototype,"EOF",function(){return this.lineBuffers[this.I].placeholder});n(a.prototype,"moreAt",function(){if(0<this.T)return this.T;var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do{if(this.C==a)break;a.br&&b++}while(a=a.next);void 0==
a&&b--;return this.T=b});n(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,b=this.cursor.f(),c="",f=b.content.match(/\t/g);f&&(c="-"+(a+f.length*b.tabWidth));return b.lineNum+1+","+a+c});n(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY)a=this.EOF?"BOTTOM":Math.floor(this.panY/(this.linesTotal-(this.I-1))*100)+"%";else if(this.C||!this.EOF)a="TOP";return a});n(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do b++;while((a=a.next)&&
!a.placeholder);return b});e[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");
(function(){function a(a){this.cols=a;this.la={};this.override=null}var e=K("Components.Vim");M("System.Debug");e[0]("LineFeeder");a.prototype.stamp=function(a,e){this.la[a]=e};a.prototype.override;n(a.prototype,"statusText",function(){if(this.override)return this.override();for(var a="",e=this.cols,c=0;c<e;c++){var d=e-c,b=this.la[c]||this.la[-d];if(b){if(b=b(),void 0!=b&&""!==b){if(0==c&&e<=b.length)return b;a+=b.substr(0,d);c=a.length}}else a+=" "}return a});e[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.State.History");
(function(){function a(a){c[a]||(c[a]=[]);this.o=c[a];this.reset()}function e(a,b){var c=b.length;if(a.length<c)return!1;for(var f=0;f<c;f++)if(a[f]!=b[f])return!1;return!0}var g=K("Components.Vim.State"),h=M("System.Debug"),c={};a.prototype.push=function(a){var b;if(b=this.o.length)a:{b=this.o[this.o.length-1];for(var c=b.length<a.length?a.length:b.length,f=0;f<c;f++)if(b[f]!=a[f]){b=!1;break a}b=!0}b?h.Info("This is the previous command, skipping"):this.o.push(a)};a.prototype.prev=function(a){for(this.o.length<=
this.d&&this.reset();-1<this.d;){var b=this.o[this.d--];if(b&&e(b,a))return b.slice()}return null};a.prototype.next=function(a){0>this.d&&(this.d++,this.next(a));for(;this.d<this.o.length;){var b=this.o[this.d++];if(b&&e(b,a))return b.slice()}return null};a.prototype.reset=function(){this.d=this.o.length-1};g[1](2,"History",a)})();BotanJS.define("Components.Vim.Ex.Command");
(function(){function a(a,d){var e=this;if(!b[d])throw Error("Unsupport mode: "+d);this.a=a;this.Ha=a.Vim.statusBar;this.Pa=d;this.R=new c(b[d]);this.e=[];this.n=null;this.ma="ExCommandBlinkCycle"+h.uuid;this.h=0;var v=a.feeder,q=!1,s=!1;this.A=function(){s=q=!0};g.perma(this.ma,function(){s?s=!1:q=!q;v.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))},600);this.Oa=function(){for(var b="",d=e.e,c=e.h,f=d.length,g=0;g<f;g++){var h=d[g];q&&g==c&&(face=!0,h=a.face+h.substr(1));b+=h}q&&f<=c&&(b+=
a.face);return b};this.Ha.override=this.Oa}var e=K("Components.Vim.Ex"),g=M("System.Cycle");M("System.Debug");var h=M("System.utils.Perf"),c=M("Components.Vim.State.History");M("Components.Vim.Message");var d=M("Components.Vim.Beep"),b={"/":h.uuid,":":h.uuid};a.prototype.dispose=function(){this.Ha.override=null;g.permaRemove(this.ma);this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){this.A();var b=null,c=!1;if(a.kMap("Tab"))b=
"^I";else if(!a.kMap("C-v"))if(a.kMap("BS")){if(1==this.h&&1<this.e.length)return!1;this.e.splice(--this.h,1);if(0==this.e.length)return a.cancel(),!0}else if(a.kMap("Del"))this.e.splice(this.h,1);else{if(a.kMap("Enter"))return this.Qa(a),!0;if(a.kMap("Left"))1<this.h&&this.h--;else if(a.kMap("Right"))this.h<this.e.length&&this.h++;else if(c=a.kMap("Up")){this.n||(this.n=this.e);var e=this.R.prev(this.n);e?(this.e=e,this.h=e.length):d()}else(c=a.kMap("Down"))?(e=this.R.next(this.n))?(this.e=e,this.h=
e.length):this.n?(this.e=this.n,this.n=null):d():b=a.key}null!=b&&this.e.splice(this.h++,0,b);c||(this.R.reset(),this.n&&(this.n=this.e));a.cancel();this.a.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))}};a.prototype.Qa=function(a){this.R.push(this.e);var b="";switch(this.Pa){case "/":b="FIND";break;case ":":b="EDITOR_COMMAND"}var d=this.a;d.suppressEvent();this.a.openRunAction(b,a,this.e.slice());d.unsuppressEvent()};e[1](2,"Command",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,d){this.Za=a;this.oa=!1;if("string"==typeof d)this.ua=d,this.wa=0,this.S=g(d),this.ra=27==this.S;else{this.da=d;if(";"==d.key||":"==d.key)b=d.keyCode;var c=this.da.keyCode;this.ra=27==c||d.ctrlKey&&67==c;this.S=c+(d.shiftKey||d.getModifierState("CapsLock")?512:0)+(d.ctrlKey?1024:0)+(d.altKey?2048:0);this.wa=16==c||17==c||18==c;this.ua=d.key}this.G=null}function e(a){this.Ja=a;this.pa=a.contentFeeder;this.B=this.pa.cursor;this.i=null}function g(a){if(k[a])return k[a];var b=
a.split("-"),d=b[0],c=0;if(2==b.length){var e=!0;switch(b[0]){case "C":c=1024;break;case "A":c=2048;break;case "S":c=512;break;default:e=!1}e&&(d=b[1])}switch(d){case "BS":b=c+8;break;case "Del":b=c+46;break;case "Enter":b=c+13;break;case "Tab":b=c+9;break;case "Up":b=c+38;break;case "Down":b=c+40;break;case "Left":b=c+37;break;case "Right":b=c+39;break;case "A":c=512;case "a":b=c+65;break;case "B":c=512;case "b":b=c+66;break;case "C":c=512;case "c":b=c+67;break;case "D":c=512;case "d":b=c+68;break;
case "E":c=512;case "e":b=c+69;break;case "F":c=512;case "f":b=c+70;break;case "G":c=512;case "g":b=c+71;break;case "H":c=512;case "h":b=c+72;break;case "I":c=512;case "i":b=c+73;break;case "J":c=512;case "j":b=c+74;break;case "K":c=512;case "k":b=c+75;break;case "L":c=512;case "l":b=c+76;break;case "M":c=512;case "m":b=c+77;break;case "N":c=512;case "n":b=c+78;break;case "O":c=512;case "o":b=c+79;break;case "P":c=512;case "p":b=c+80;break;case "Q":c=512;case "q":b=c+81;break;case "R":c=512;case "r":b=
c+82;break;case "S":c=512;case "s":b=c+83;break;case "T":c=512;case "t":b=c+84;break;case "U":c=512;case "u":b=c+85;break;case "V":c=512;case "v":b=c+86;break;case "W":c=512;case "w":b=c+87;break;case "X":c=512;case "x":b=c+88;break;case "Y":c=512;case "y":b=c+89;break;case "Z":c=512;case "z":b=c+90;break;case "!":c=512;case "1":b=c+49;break;case "@":c=512;case "2":b=c+50;break;case "#":c=512;case "3":b=c+51;break;case "$":c=512;case "4":b=c+52;break;case "%":c=512;case "5":b=c+53;break;case "^":c=
512;case "6":b=c+54;break;case "&":c=512;case "7":b=c+55;break;case "*":c=512;case "8":b=c+56;break;case "(":c=512;case "9":b=c+57;break;case ")":c=512;case "0":b=c+48;break;case "<":c=512;case ",":b=c+188;break;case ">":c=512;case ".":b=c+190;break;default:throw Error("Unsupport keys: "+a);}return k[a]=b}var h=K("Components.Vim");M("System.Debug");var c=M("Components.Vim.Ex.Command"),d=h[0]("Beep"),b=59,k={};e.prototype.m=function(a,b){if(b)this.g||(this.g=[]),this.g.push({keys:Array.prototype.slice.call(arguments,
2),handler:b,Ka:0});else{for(var c=a.keyCode,e=0;e<this.g.length;e++){var g=this.g[e],h=g.keys;if(h[g.Ka++]==c){g.Ka==h.length&&(g.handler(a),this.g=null,this.p=!1);return}}this.g&&d();this.g=null;this.p=!1}};e.prototype.Na=function(f){var e=this.B;switch(f.keyCode){case 577:e.lineEnd();case 65:e.moveX(1,!0,!0);case 73:e.openAction("INSERT");break;case 83:""!=e.f().content&&e.openRunAction("DELETE",f,e.aPos);e.openAction("INSERT");break;case 591:e.lineStart();e.openAction("INSERT");e.action.handler(new a(f.eb,
"Enter"));e.moveY(-1);break;case 79:e.lineEnd(!0);e.openAction("INSERT");e.action.handler(new a(f.eb,"Enter"));break;case 85:e.openRunAction("UNDO",f);break;case 1106:e.openRunAction("REDO",f);break;case 68:e.openAction("DELETE");break;case 89:e.openAction("YANK");break;case 80:e.suppressEvent(),e.moveX(1,!1,!0),e.unsuppressEvent();case 592:e.openRunAction("PUT",f);break;case 600:if(!this.O(-1))break;case 88:if(""==e.f().content){d();break}e.openRunAction("DELETE",f,e.aPos);break;case 586:e.openRunAction("JOIN_LINES",
f);break;case 86:e.openAction("VISUAL");break;case 598:e.openAction("VISUAL_LINE");break;case 512+b:this.i=new c(e,":"),this.i.handler(f)}};e.prototype.O=function(a,b){var c=this.B,e=c.X;c.moveX(a,b,c.pSpace);return c.X==e?(d(),!1):!0};e.prototype.na=function(a){var b=this.B,c=this.pa,e=b.Y+c.panY;b.moveY(a);e!=b.Y+c.panY||0<a&&!c.EOF||d()};e.prototype.qa=function(a){var b=a.keyCode;if(this.p&&!a.ModKeys)return this.m(a),!0;var e=this.B,g=e.feeder,h=!0;switch(b){case 8:this.O(-1,!0);break;case 72:this.O(-1);
break;case 76:this.O(1);break;case 75:this.na(-1);break;case 74:this.na(1);break;case 1094:if(g.firstBuffer.nextLine.placeholder){d();break}g.pan(void 0,g.moreAt);g.softReset();e.moveY(-e.Y);break;case 1090:if(0==g.panY){d();break}g.pan(void 0,-g.moreAt);g.softReset();e.moveY(-e.Y);g.EOF||e.moveY(g.moreAt);break;case 584:break;case 588:break;case 566:e.lineStart();break;case 564:e.lineEnd(e.pSpace);break;case 583:e.moveY(Number.MAX_VALUE);e.moveX(Number.MAX_VALUE,!0);break;case 565:var k=this.Ja.contentAnalyzer,
b=k.bracketAt(e.aPos);if(-1==b.open){d();break}e.moveTo(b.selected==b.close?b.open:b.close);break;case 84:break;case 73:if(!e.action){h=!1;break}k=this.Ja.contentAnalyzer;this.p=!0;this.m(a,function(a){var b=k.wordAt(e.aPos);a.G=b},87);var b=function(a){var b=k.bracketIn("(",e.aPos);a.G=b},g=function(a){var b=k.bracketIn("{",e.aPos);a.G=b},p=function(a){var b=k.bracketIn("[",e.aPos);a.G=b};this.m(a,b,560);this.m(a,b,569);this.m(a,p,219);this.m(a,p,221);this.m(a,g,731);this.m(a,g,733);break;case 71:this.p=
!0;this.m(a,function(){e.moveY(-Number.MAX_VALUE);e.moveX(-Number.MAX_VALUE,!0)},71);this.m(a,function(){e.openRunAction("PRINT_HEX",a)},56);break;case 590:case 78:e.openRunAction("FIND",a);break;case 191:this.p=!0;this.i=new c(e,"/");this.i.handler(a);break;default:h=!1}return h};e.prototype.handler=function(a,b){if(!(2116==b.keyCode||112<b.keyCode&&123>=b.keyCode)){if(b.Escape){var c=!1;this.p=!1;this.g?(c=!0,this.g=null):this.i&&(c=!0,this.i.dispose(),this.i=null);if(c){d();return}}if(this.i&&
(this.i.handler(b)&&(this.i.dispose(),this.p=!1,this.i=null),b.canceled))return;c=this.B;if(c.action)if(b.Escape)b.preventDefault(),c.closeAction();else{if(c.action.allowMovement){var e=!this.g;this.qa(b);if(e&&this.g){b.preventDefault();return}}c.action.handler(b)&&c.closeAction()}else b.preventDefault(),this.qa(b)||this.Na(b)}};a.prototype.cancel=function(){this.oa=!0};n(a.prototype,"target",function(){return this.Za});n(a.prototype,"key",function(){return this.ua});n(a.prototype,"keyCode",function(){return this.S});
n(a.prototype,"ModKeys",function(){return this.wa});n(a.prototype,"Escape",function(){return this.ra});n(a.prototype,"canceled",function(){return this.oa});n(a.prototype,"range",function(){var a=this.G;return a&&-1==a.open&&-1==a.close?null:a});a.prototype.kMap=function(a){return this.S==g(a)};a.prototype.preventDefault=function(){this.da&&this.da.preventDefault()};h[1](2,"Controls",e);h[1](2,"InputEvent",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a){if(a){var d=a.element;if("TEXTAREA"!=d.nodeName)b.Error("Element is not compatible for VimArea");else{a.setAttribute(new h("vimarea",1));this.stage=a;this.rows=d.rows;this.cols=d.cols;this.ca=!1;var e=this;this.ja=[new c("Focus",function(){e.ca=!0}),new c("Blur",function(){e.ca=!1})];this.fb;this.La(d.value);this.ea=t++;p[this.ea]=this}}}function e(a,b){return function(c){c=c||window.event;c.keyCode?code=c.keyCode:c.which&&(code=c.which);b(a,new s(a,c))}}var g=K("Components.Vim");
M("Dandelion.IDOMElement");var h=M("System.utils.DataKey"),c=M("System.utils.EventKey"),d=M("System.Cycle"),b=M("System.Debug"),k=M("Components.Vim.State.Registers"),f=M("Components.Vim.Syntax.Analyzer"),l=g[0]("LineFeeder"),v=g[0]("StatusBar"),q=g[0]("Controls"),s=g[0]("InputEvent"),r=g[0]("Message"),p=[],t=0;a.prototype.select=function(a){if(this.ca){var b=this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.La=function(a){function b(){C.init(E.statusText);var a=C.linesOccupied;
h.value=t.render(a-1,p-a)+"\n"+C.render(0,a<p?a:p);g.A=!1;g.select(t.cursor.position)}var g=this;this.content=a;var h=this.stage.element,p=this.rows,s=this.cols,t=new l(p-1,s),N=new f(t);t.init(a+"\n");var C=new l(p,s);C.setRender(!1);t.cursor.Vim=this;C.cursor.Vim=this;var E=new v(s);E.stamp(-18,function(){return t.lineStat});E.stamp(-3,function(){return r(t.docPos)});E.stamp(0,function(){return t.cursor.message});C.init(E.statusText);t.dispatcher.addEventListener("VisualUpdate",b);b();this.w=b;
this.contentFeeder=t;this.contentAnalyzer=N;this.statusFeeder=C;this.statusBar=E;this.ba=new k;this.a=t.cursor;this.A=!0;d.perma("VimCursorBlinkCycle"+h.id,function(){g.select(!g.a.blink||(g.A=!g.A)?g.a.position:{start:0,end:0})},600);a=new q(this);this.ja.push(new c("KeyDown",e(this,a.handler.bind(a))));this.stage.addEventListeners(this.ja)};a.prototype.dispose=function(){var a=this.stage,c=this.ja,e=this.contentFeeder,f=a.element.id;b.Info("Destroy instance: "+f);e.dispatcher.removeEventListener("VisualUpdate",
this.w);a.removeAttribute("data-vimarea");d.permaRemove("VimCursorBlinkCycle"+f);for(var g in c)a.removeEventListener(c[g]);a.element.value=this.content;delete p[this.ea]};n(a.prototype,"index",function(){return this.ea+1});n(a,"Instances",function(){var a=[],b;for(b in p)a.push(p[b]);return a});g[1](2,"VimArea",a)})();})();
