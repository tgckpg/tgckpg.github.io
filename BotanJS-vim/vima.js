(function(){function l(a,e){a.prototype=Object.create(e.prototype);a.prototype.constructor=a}function m(a,e,c){Object.defineProperty(a,e,{get:c,set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:e})})}function n(a,e){Object.defineProperty(a,"propagating",{get:e,set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:"propagating"})})}
function v(a,e,c){Object.defineProperty(a,e,{get:function(){return c},set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:e})})}function BotanEvent(a,e){var c=!1,g=!1;v(this,"propagate",function(){g||(c=!0);g=!0});v(this,"stopPropagating",function(){c=!1});v(this,"type",a);n(this,function(){return c});v(this,"data",e);this.setTarget=function(a){v(this,"target",a);this.setTarget=void 0}.bind(this)}
function A(){function a(){this.M.propagate();for(var a in this.stack)if(this.M.propagating)this.stack[a](this.M);this.M.stopPropagating()}function e(a){c[a]||(c[a]=[]);return c[a]}var c={},g=this;this.addEventListener=function(a,d){var b=e(a);b[b.length]=d};this.removeEventListener=function(a,d){var b=e(a),h=b.indexOf(d);0>h||delete b[h]};this.dispatchEvent=function(c){var d=e(c.type);c.setTarget&&c.setTarget(g);setTimeout(a.bind({M:c,stack:d}),0)}}function C(){A.call(this)}C.prototype=[];
var D={},E={},G={},H=window.BotanJS,BotanJS=null,I=null,L=null;H&&(BotanJS=H.sg[0],I=H.sg[1],L=H.sg[2]);BotanJS=BotanJS||function(){var a=0,e=[],c=[],g=new A,f={write:function(d){e[e.length]=d}};v(f,"read",function(){return e[a++]});v(f,"end",function(){return e.length<=a});v(g,"log",f);v(g,"define",function(d){c[c.length]=d});v(g,"getDef",function(){return c.slice()});return g}();
I=I||function(a){if(E[a])return E[a];for(var e=a.split("."),c=e.length,g=D,f=0;f<c;f++)g[e[f]]=g[e[f]]||{},g=g[e[f]];g.pa=[];nsObj=new C;nsObj[1]=function(d,b,h){this.f[b]||(this.f[b]=[d,h],d=new BotanEvent("NS_EXPORT",{name:this.v+"."+b,type:d}),BotanJS.dispatchEvent(d))}.bind({f:g,v:a});nsObj[0]=function(d){if(!this.f[d])throw Error("["+this.v+"] Invoke failed: "+d+" does not exists");return this.f[d][1]}.bind({f:g,v:a});nsObj[10]=function(d,b){this.pa[d]=b}.bind(g);nsObj[11]=function(d,b){throw Error("["+
this.v+(b?"."+b:"")+"] "+d);}.bind({v:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return E[a]=nsObj};
L=L||function(a,e){var c=a.replace(".*","");E[c]&&E[c].dispatchEvent(new BotanEvent("NS_IMPORT",d));if(!e&&G[a])return G[a];for(var g=a.split("."),f=g.length,d=D,c=!1,b=0;b<f;b++){if("*"==g[b]){c=!0;break}d=d[g[b]];if(!d)throw Error("No such class: "+a);}if(d instanceof Array&&"*"!=g[b])return c=null,c=10==d[0]?d[1]():d[1],G[a]=c;g={};for(b in d)f=d[b],f instanceof Array&&(c&&2==f[0]?g[b]=f[1]:3==f[0]?g[b]=f[1]:0==f[0]?Object.defineProperty(g,b,{get:function(){return this.f[this.b][1]}.bind({b:b,
f:d}),set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:b})}):1==f[0]?Object.defineProperty(g,b,{get:function(){return this.f[this.b][1]()}.bind({b:b,f:d}),set:function(b){this.f[this.b][1](b)}.bind({b:b,f:d})}):10==f[0]&&Object.defineProperty(g,b,{get:f[1],set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:b})}));return G[a]=g};window.BotanJS={};window.BotanJS.version="0.2";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return L(a)}catch(e){if(H)return H["import"](a);throw e;}};window.BotanJS.sg=[BotanJS,I,L];BotanJS.define("System.utils.IKey");
(function(){function a(c,g){c&&"string"!=typeof c||(this.keyName=c,this.keyValue=g instanceof a?g:void 0!=g?String(g):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var e=I("System.utils");a.prototype.keyName="";a.prototype.keyValue="";v(a,"quickDef",function(){var c=arguments.length;if(0!=c%2)e[11]("Invalid Definition Count","IKey");for(var g=[],f=0;f<c;f+=2)g[g.length]=new a(arguments[f],arguments[f+1]);return g});e[1](2,"IKey",a)})();BotanJS.define("System.utils.Perf");
(function(){for(var a=I("System.utils.Perf"),e=[],c=0;256>c;c++)e[c]=(16>c?"0":"")+c.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,c=4294967295*Math.random()|0,d=4294967295*Math.random()|0,b=4294967295*Math.random()|0;return e[a&255]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255]+"-"+e[c&255]+e[c>>8&255]+"-"+e[c>>16&15|64]+e[c>>24&255]+"-"+e[d&63|128]+e[d>>8&255]+"-"+e[d>>16&255]+e[d>>24&255]+e[b&255]+e[b>>8&255]+e[b>>16&255]+e[b>>24&255]});a[1](3,"CountSubstr",function(a,c){if(0>=
c.length)return a.length+1;for(var d=0,b=a.indexOf(c);0<=b;b=a.indexOf(c,b))d++,b++;return d});a[1](3,"ArrayReverse",function(a){for(var c=null,d=a.length,b=null,c=0,b=d-1;c<b;c+=1,--b){var d=a[c],h=a[b],d=d^h,h=h^d,d=d^h;a[c]=d;a[b]=h}})})();BotanJS.define("System.Global");
(function(){var a=I("System.Global"),e=Boolean(document.all),c=window.allowed_origins||[],g=window.location.href.match(/^https:\/\//);a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",e);a[1](0,"ALLOWED_ORIGINS",c);a[1](0,"SECURE_HTTP",g)})();BotanJS.define("Dandelion");
(function(){function a(){if(r)return!0;try{return r=L("Dandelion.IDOMElement"),!0}catch(b){}return!1}function e(b,h){if(h&&a()){for(var d=b.length,k=[],c=0;c<d;c++)k[c]=r(b[c]);return k}return b}function c(b,h){b&&h(b)&&b.parentNode&&c(b.parentNode,h)}function g(b,h){return h(b)?b:b.parentNode&&g(b.parentNode,h)}function f(b){return document.createTextNode(b)}function d(h,d,a,c,f){h=document.createElement(h||"div");d&&(h.id=d);a&&(q?h.className=a:h.setAttribute("class",a));if(f)if(f instanceof Array)for(var g in f)h.setAttribute(f[g].keyName,
f[g].keyValue);else f instanceof k&&h.setAttribute(f.keyName,f.keyValue);c&&b(h,c);return h}function b(h,d){if(d instanceof Array)for(var a=d.length,k=0;k<a;k++)d[k]&&b(h,d[k]);else"string"==typeof d?h.appendChild(f(d)):d&&h.appendChild(d)}var h=I("Dandelion"),q=L("System.Global.IE"),k=L("System.utils.IKey"),r;h[1](3,"wrap",d);h[1](3,"wrapc",function(b,h,a){return d(!1,!1,b,h,a)});h[1](3,"wrape",function(b,h){return d(!1,!1,!1,b,h)});h[1](3,"wrapne",function(b,h,a){return d(b,!1,!1,h,a)});h[1](3,
"wrapna",function(b,h){return d(b,!1,!1,!1,h)});h[1](3,"textNode",f);h[1](3,"bubbleUp",g);h[1](3,"chainUpApply",c);h[1](3,"id",function(b,h){var d=document.getElementById(b);return d?h&&a()?r(d):d:d});h[1](3,"tag",function(b,h,d){d=void 0===d?document:d;return e(d.getElementsByTagName(b),h)});h[1](3,"name",function(b,h,d){d=void 0===d?document:d;return e(d.getElementsByName(b),h)});h[1](3,"glass",function(b,h,d){d=void 0===d?document:d;return e(d.getElementsByClassName(b),h)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,f){c.call(this,a,f);this.type=a.toLowerCase();this.handler=f}var e=I("System.utils"),c=e[0]("IKey");l(a,c);a.prototype.type="";a.prototype.handler=null;e[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(c,d){if(c instanceof a)return c;if(d)this.addEventListener=this.addEventListener.bind(c),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(c),this.removeEventListener=this.removeEventListener.bind(c);else{if(c)return new a(c,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function e(){}var c=I("Dandelion"),g=L("System.utils.EventKey");e.prototype.indexOf=function(a){for(var d=this.length,b=0;b<d;b++){var h=this[b];if(h.type==
a.type&&h.handler==a.handler)return b}return-1};l(e,Array);a.prototype.hasListener=function(a){return a instanceof g&&this.d&&-1!=this.d.indexOf(a)?this.d[this.d.indexOf(a)]:null};a.prototype.addEventListener=function(a,d){var b;if("string"==typeof a&&d)b=new g(a,d);else if(a instanceof g)b=a;else return!1;if(this.d)if(0>this.d.indexOf(b))this.d.push(b);else return!1;else this.d=new e,this.d[0]=b;this.addEventListener?this.addEventListener(b.type,b.handler,!1):this.attachEvent?this.attachEvent("on"+
b.type,b.handler):this["on"+b.type]=b.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var d in a)this.addEventListener(a[d])};a.prototype.removeEventListener=function(a,d){d&&(a=new g(a,d));this.d&&delete this.d[this.d.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};c[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(b){b=typeof b;return"number"==b?c:"string"==b?e:g}function e(b,h){return b.nodeName==h}function c(b,h){return b.nodeType==h}function g(){return!1}function f(b,d){if(b instanceof f)return b;if(d)q.call(this,b,!0),this.getDAttribute=this.getDAttribute.bind(b),this.lootChildren=this.lootChildren.bind(b),this.foreach=this.foreach.bind(b),this.reverseChild=this.reverseChild.bind(b),this.first=this.first.bind(b),this.last=this.last.bind(b),this.contains=this.contains.bind(b),this.style=
b.style,this.hasAttribute=function(){}.bind(b),this.removeAttribute=function(b){this.removeAttribute(b)}.bind(b),this.element=b,this.setAttribute=this.setAttribute.bind(b);else{if(b&&void 0!=b.nodeType&&1==b.nodeType)return new f(b,!0);if(void 0===b)return new f(h(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var d=I("Dandelion"),b=L("System.utils.IKey");L("System.utils.Perf");var h=d[0]("wrap"),q=d[0]("IDOMObject");l(f,q);f.prototype.setAttribute=function(h,d){if(h instanceof
b)this.setAttribute(h.keyName,h.keyValue);else if(h instanceof Array)for(var a in h)h[a]instanceof b&&this.setAttribute(h[a].keyName,h[a].keyValue);else this.setAttribute(h,d)};f.prototype.lootChildren=function(b){for(var h=b.childNodes;h.length;)this.appendChild(b.removeChild(h[0]))};f.prototype.getDAttribute=function(b){return(b=this.getAttribute("data-"+b))&&decodeURIComponent(b)};f.prototype.foreach=function(b,h){for(var d=Array.apply([],this.childNodes),a=d.length,c=0;c<a;c++)d[c].nodeType==
b&&h(d[c],this)};f.prototype.first=function(b,h){for(var d=this.childNodes,c=d.length,q=null,g=a(b),f=0;f<c;f++)if(g(d[f],b)&&(void 0===h||h(d[f],this))){q=d[f];break}return q};f.prototype.last=function(b,h){for(var d=this.childNodes,c=null,q=a(b),f=d.length-1;-1<f;f--)if(q(d[f],b)&&(void 0===h||h(d[f],this))){c=d[f];break}return c};f.prototype.contains=function(b){return b.parentElement?b==this?!0:this.contains(b.parentElement):!1};f.prototype.aKeys=function(){for(var h=[],d=this.element.attributes,
a=d.length,c=0;c<a;c++)h.push(new b(d[c].name,d[c].value));return h};f.prototype.reverseChild=function(){for(var b=this.childNodes.length-1;-1<--b;)this.appendChild(this.childNodes[b])};d[1](2,"IDOMElement",f)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,f){c.call(this,"data-"+a,f?encodeURIComponent(String(f)):"")}var e=I("System.utils"),c=e[0]("IKey");l(a,c);e[1](2,"DataKey",a)})();BotanJS.define("System.utils");
(function(){var a=I("System.utils"),e=L("System.Global");a[1](3,"objGetProp",function(a,g,f){if(a&&a[g]){var d=a[g].constructor.toString().match(/function ([^\(]+)/);if(d&&2==d.length&&d[1].toUpperCase()==f.toUpperCase())return a[g]}return null});a[1](3,"objSearch",function(a,g,f){for(var d in a)if(g(a[d]))return a[d][f]||a[d];return null});a[1](3,"objMap",function(a,g){for(var f in a)a[f]=g(a[f])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?e.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(e.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.t=!1;this.loop=function(){for(var g in this.steppers)this.steppers[g]();a++};m(this,"count",function(){return a})}var e=I("System");a.prototype.putStepper=function(a){var g=this.steppers.length;this.steppers[g]=a;return g};a.prototype.start=function(){this.t||(this.id=setInterval(this.loop.bind(this),0),this.t=!0)};a.prototype.stop=function(){this.t&&(this.t=!1,clearInterval(this.id))};a.prototype.steppers=[];m(a.prototype,"started",function(){return this.t});
e[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=I("System.Log"),e=[];a[1](3,"writeLine",function(a,g){g=void 0===g?16:g;var f=!1,d;for(d in e)e[d](a,g),f=!0;!f&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var g=-1;e[g=e.length]=a;return g});a[1](3,"removeHandler",function(a){delete e[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){g&&c.writeLine(Array.prototype.join.call(arguments," "),c.INFO)}var e=I("System.Debug"),c=L("System.Log"),g=L("System.Global").debug,f=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());e[1](3,"Error",function(d){f&&c.writeLine(d.name+"\n\t"+d.message+"\n\t"+d.stack,c.ERROR)});e[1](3,"Info",a);e[1](3,"turnOff",function(d){"info"==d?g=!1:"error"==d&&(f=!1)});e[1](3,"turnOn",function(d){"info"==d?g=!0:"error"==d&&(f=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(b){b.target.removeEventListener("NS_IMPORT",a);b=L("System.Cycle.TICK",!0);b!=d&&b.Ha?(g.Info("[System.Cycle] Global Tick exists"),d=null):(g.Info("[System.Cycle] Creating global Tick"),d.start())}var e=I("System.Cycle");L("System.utils");var c=L("System.Tick"),g=L("System.Debug"),f=[],d=new c;d.putStepper(function(){var b=(new Date).getTime(),h;for(h in f){var d=f[h];if(d&&b>d[1]){try{d[0]()}catch(a){g.Error(a);delete f[h];continue}d[2]?delete f[h]:d[1]=b+d[4]}}});e.addEventListener("NS_IMPORT",
a);e[1](3,"next",function(b){f[f.length]=[b,0,!0]});e[1](3,"delay",function(b,h){f[f.length]=[b,(new Date).getTime()+h,!0]});e[1](3,"perma",function(b,h,d){for(var a in f)if(f[a][3]==b)return!1;f[f.length]=[h,(new Date).getTime()+d,!1,b,d]});e[1](3,"permaRemove",function(b){for(var h in f)f[h][3]==b&&delete f[h]});e[1](10,"TICK",function(){return d})})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.S={}}var e=I("Components.Vim.State");a.prototype.unnamed=function(a){this.S['"']=a};a.prototype.yank=function(a){this.unnamed(a);this.S[0]=a};a.prototype.change=function(a){this.unnamed(a);for(var g=this.S,f=9;1<f;f--)void 0!=g[f-1]&&(g[f]=g[f-1]);g[1]=a};e[1](2,"Registers",a)})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var d=0;d<g;d++)for(var b=c[d],h=b.length,q=0;q<h;q++){var k=b[q];if(k[0]<=a&&a<=k[1]){a=b;break a}}a=[]}this.Da=a}var e=I("Components.Vim.Syntax"),c=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]]],g=c.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var d=this.Da,b=d.length;a=a.charCodeAt(0);for(var h=0;h<b;h++){var c=d[h];if(c[0]<=a&&a<=c[1])return!0}return!1};
e[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.ca=this.ia=this.B=this.G=-1;this.ea=null}function e(b){this.C=b;this.K={}}function c(b,d){if(!d)throw Error("Parent not found");var k=new a;k.ca=d[2];k.G=d[0];k.B=d[1];if(-1<d[3]){var g=b.find(d[3]);k.ea=c(b,g)}return k}function g(b,a){for(var c=a.length,g=b.split("\n"),f=g[0],g=g[1],e=[],p=[],s=0,F=[],J=f.length,K=g.length,w=0;w<c;w++){var y=a.substr(w,K);if(a.substr(w,J)==f)e[s]=w,s++,w+=J-1;else if(y==g){y=w;if(0==s)p.push(y);else{var t=[];t[0]=e[--s];t[1]=y;t[2]=
s;t[3]=0<s?e[s-1]:-1;F.push(t)}w+=K-1}}p.length&&d.Info('Unmatched opening "'+f+'"@'+p.join(", "));0<s&&d.Info('Unmatched closing "'+g+'"@'+e.slice(0,s));this.da=F}var f=I("Components.Vim.Syntax"),d=L("System.Debug"),b=f[0]("Word");g.prototype.find=function(b,a){void 0==a&&(a=0);for(var d=this.da,c=d.length,g=0;g<c;g++){var f=d[g];if(f[a]==b)return f}return null};e.prototype.bracketAt=function(b){var d=this.C.content,k=1,g=null,f=d[b];switch(f){case "{":k=0;case "}":g=this.o("{\n}");break;case "[":k=
0;case "]":g=this.o("[\n]");break;case "(":k=0;case ")":g=this.o("(\n)");break;case "/":if("*"==d[b-1]){f="*/";b--;break}else if("*"==d[b+1]){f="/*";break}return new a;case "*":if("/"==d[b-1]){f="/*";b--;break}else if("/"==d[b+1]){f="*/";break}return new a;default:return new a}if(!g)switch(f){case "/*":k=0;case "*/":g=this.o("/*\n*/");break;default:return new a}d=g.find(b,k);g=c(g,d);g.ia=b;return g};e.prototype.bracketIn=function(b,d){var k="{[(".indexOf(b);0>k&&(k="}])".indexOf(b));if(0>k)throw Error("Unsupported bracket: "+
b);for(var g=this.o("{[("[k]+"\n"+"}])"[k]),f=g.da,e=f.length,p=null,k=0;k<e;k++){var s=f[k];s[0]<=d&&d<=s[1]&&(p&&p[2]<s[2]||!p)&&(p=s)}g=k=c(g,p);do g.G++,g.B--;while(g=g.parent);return p?k:new a};e.prototype.o=function(b){if(this.K[b])return this.K[b];var a=new g(b,this.C.content);return this.K[b]=a};e.prototype.reset=function(){this.K={}};e.prototype.quoteAt=function(b){switch(this.C.content[b]){default:return{level:0,open:-1,close:-1}}};e.prototype.wordAt=function(d){var c=this.C.content,k=c.length,
g=d,f=d,e=new b(c[d]);if(0<d)for(;e.test(c[--g]););if(d<k)for(;e.test(c[++f]););d=new a;d.G=0<g?g+1:0;d.B=f-1;return d};m(a.prototype,"parent",function(){return this.ea});m(a.prototype,"open",function(){return this.G});m(a.prototype,"close",function(){return this.B});m(a.prototype,"level",function(){return this.ca});m(a.prototype,"selected",function(){return this.ia});f[1](2,"Analyzer",e);f[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,g){this.prev=null;this.cols=a;this.next=g;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=8;g&&(g.prev=this)}var e=I("Components.Vim");L("System.Debug");a.prototype.w=function(a,g,f){this.lineNum=f;if(void 0==a||""===a)this.lineNum=++f,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.w(a,g,f+1);else{this.placeholder=!1;var d="",b=!1,h=0,q=0,k=this.tabWidth-1;if(g)for(;h<this.cols-q*k;h++){var e=a[h];if(void 0===e)break;if("\n"==e){b=!0;h++;break}else"\t"==
e&&q++;d+=e}else for(b=!0;;h++){e=a[h];if(void 0===e)break;if("\n"==e){h++;break}else"\t"==e&&q++;h<this.cols-q*k&&(d+=e)}this.next&&(this.next.br=b,this.next.w(a.substr(h),g,b?f+1:f));this.content=d}};a.prototype.toString=function(){return this.content.length<this.cols?this.content+" ":this.content||" "};m(a.prototype,"nextLine",function(){for(var a=this,g=this.lineNum;(a=a.next)&&a.lineNum==g;);return a});m(a.prototype,"visualLines",function(){for(var a=[this],g=this;(g=g.next)&&!g.br;)a.push(g);
return a});e[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");(function(){function a(){this.u=[];this.ya=[];this.$=this.j=0}var e=I("Components.Vim.State");a.prototype.undo=function(){var a=this.j-1;return-1!=a&&this.u.length?this.u[this.j=a]:null};a.prototype.redo=function(){var a=this.u[this.j];return a?(this.j++,a):null};a.prototype.record=function(a){this.u[this.j++]=a;this.ya[this.$++]=a;delete this.u[this.j];a.id=this.$};e[1](2,"Recorder",a)})();BotanJS.define("Components.Vim");
(function(){function a(a,b,h){if(void 0==a[b])return b;var c=0;return a[b].replace(/%\d+/g,function(){return h[c++]})}var e=I("Components.Vim"),c={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL  --",VISLINE:"-- VISUAL LINE --",WRITE:'"%1" %2L, %3C written',CONTINUE:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",UNDO_LIMIT:"Already at oldest change",
REDO_LIMIT:"Already at newest change",LINE_FEWER:"%1 fewer lines"},g={E486:"E486: Pattern not found: %1"},f=new Audio("data:audio/ogg;base64,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");
e[1](3,"Message",function(d){return a(c,d,Array.prototype.slice.call(arguments,1))});e[1](3,"Error",function(d){return a(g,d,Array.prototype.slice.call(arguments,1))});e[1](3,"Beep",function(){setTimeout(function(){f.pause();f.currentTime=0;f.play()},0)})})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(a){this.a=a}var e=I("Components.Vim.Actions");L("Components.Vim.Message");a.prototype.allowMovement=!0;a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault()};a.prototype.getMessage=function(){return"<TODO> YANK COMMAND"};e[1](2,"YANK",a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,g){this.a=a;this.za=void 0==g?a.aPos:g;this.Aa=this.ha()}var e=I("Components.Vim.State");a.prototype.save=function(a,g){var f=this.a,d=f.feeder,b=this.za;0>a&&(b+=a,a=0);var h=this.Aa,e=this.ha(),k=h;return function(){var r=d.content.substr(b,a);d.content=d.content.substring(0,b)+g+d.content.substring(b+a);a=g.length;g=r;f.PStart=k.b;f.PEnd=k.b+1;f.X=k.x;f.Y=k.y;d.panX=k.Ea;d.panY=k.Fa;d.pan();k=k==h?e:h}};a.prototype.ha=function(){var a=this.a,a={b:a.PStart,x:a.X,y:a.Y,Ea:a.feeder.panX,
Fa:a.feeder.panY};0<a.x&&(--a.b,--a.x);return a};e[1](2,"Stator",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,g,f){if(void 0==a[g])return g;var d=0;return a[g].replace(/%\d+/g,function(){return f[d++]})}var e={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};I("Components.Vim.DateTime")[1](3,"String",function(c){return a(e,c,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(b,a){var d=b%10,g=b%100;if(1>=b)throw Error("Invalid number of Time units");return 2<=b&&4>=b?c(a[0],b):1==d&&11!=g?c(a[1],b):2<=d&&4>=d&&!(12<=g&&14>=g)?c(a[2],b):c(a[3],b)}var e=I("Components.Vim.DateTime"),c=e[0]("String"),g=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],f=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],d=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];e[1](3,"RelativeTime",function(b){var h=Math.round(.001*((new Date).getTime()-b.getTime()));if(31536E3<h)result=c("OverAYearAgo");else if(3952800<h)if(b=Math.round((h+1317600)/2635200),2<=b&&4>=b)result=c("XMonthsAgo_2To4",b);else if(5<=b&&12>=b)result=c("XMonthsAgo_5To12",b);else throw Error("Invalid number of Months");else if(2116800<=h)result=c("AboutAMonthAgo");else if(604800<=h)b=Math.round(h/604800),result=1<b?c("XWeeksAgo_2To4",b):c("AboutAWeekAgo");else{if(432E3<=h)switch(b.getDay()){case 1:b=
c("last Monday");break;case 2:b=c("last Tuesday");break;case 3:b=c("last Wednesday");break;case 4:b=c("last Thursday");break;case 5:b=c("last Friday");break;case 6:b=c("last Saturday");break;case 0:b=c("last Sunday");break;default:b=c("last Sunday")}else if(86400<=h)switch(b.getDay()){case 1:b=c("on Monday");break;case 2:b=c("on Tuesday");break;case 3:b=c("on Wednesday");break;case 4:b=c("on Thursday");break;case 5:b=c("on Friday");break;case 6:b=c("on Saturday");break;case 0:b=c("on Sunday");break;
default:b=c("on Sunday")}else b=7200<=h?a(Math.round(h/3600),g):3600<=h?c("AboutAnHourAgo"):120<=h?a(Math.round(h/60),f):60<=h?c("AboutAMinuteAgo"):a(1<h?h:2,d);result=b}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var e=I("Components.Vim.State"),c=L("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.Z=a;this.Ca=new Date;this.id=0};a.prototype.play=function(){this.Z&&this.Z()};m(a.prototype,"time",function(){return c(this.Ca)});e[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(b){this.a=b;this.Q=0;this.ka=b.aPos}var e=I("Components.Vim.Actions");L("System.Debug");var c=L("Components.Vim.State.Stator"),g=L("Components.Vim.State.Stack"),f=L("Components.Vim.Message"),d=L("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){};a.prototype.handler=function(b,a){b.preventDefault();var f=b.target.Ga,k=this.a,e=k.feeder,x=!1;if(void 0==a)if(this.ka!=k.aPos)x=!0,b.kMap("l")&&k.moveX(-1),a=this.ka;else return;var u=e.content,
p=a;b=k.aPos;b<p&&(p=k.aPos,b=a);var s=u.substring(p,b+1);f.change(s);this.Q=d(s,"\n");e.content=u.substring(0,p)+u.substring(b+1);f=new c(k,p);p=new g;u=u[b+1];if("\n"==u||void 0==u)k.suppressEvent(),k.moveX(-1),k.unsuppressEvent();var F=f.save(0,s);p.store(function(){F();k.moveX(1)});k.rec.record(p);e.pan();return x};a.prototype.getMessage=function(){return this.Q?f("LINE_FEWER",this.Q):""};e[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.ga(a);this.F=c("VISUAL");this.ba="";a.blink=!1;a.pSpace=!0}var e=I("Components.Vim.Actions");L("System.Debug");var c=L("Components.Vim.Message"),g=e[0]("YANK"),f=e[0]("DELETE");a.prototype.ga=function(a){this.a=a;this.s=a.aPos;this.r=this.ja=a.PStart};a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.F=this.ba;this.a.blink=!0;this.a.pSpace=!1;this.a.PStart=this.r;this.a.PEnd=this.r+1};a.prototype.handler=function(a){a.preventDefault();if(!a.ModKeys){var b=
this.a,h=null;a.kMap("y")?h=new g(b):a.kMap("d")&&(h=new f(b));if(h){b.suppressEvent();if(h.constructor==f&&this.s<b.aPos){var c=b.aPos;b.moveTo(this.s,!0);this.s=c}h.handler(a,this.s);this.ba=h.getMessage();h.dispose();b.unsuppressEvent();this.r=b.PStart;return!0}a.range&&(b.suppressEvent(),a=a.range,b.aPos==this.s&&(b.moveTo(a.open,!0),this.ga(b)),b.unsuppressEvent(),b.moveTo(a.close,!0));a=this.ja;h=b.PStart;c=h-a;0<=c?(this.r=h,h+=1):0>c&&(a+=c,h=this.ja+1,this.r=a);b.PStart=a;b.PEnd=h}};a.prototype.getMessage=
function(){return this.F};e[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Actions.UNDO");(function(){function a(a){this.a=a;this.h="UNDO COMMAND"}var e=I("Components.Vim.Actions"),c=L("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(a.play(),this.h="<<TODO>>; before #"+a.id+"  "+a.time):this.h=c("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.h};e[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var e=I("Components.Vim.Actions");L("Components.Vim.State.Stack");L("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var g=a.length,f=[],d=0;d<g;d++)f[d]="\n"==a[d]?"a":a.charCodeAt(d).toString(16),1==f[d].length?f[d]="0"+f[d]:0==f[d].length&&(f[d]="00");this.F=f.join(" ")};a.prototype.getMessage=function(){return this.F};e[1](2,"PRINT_HEX",a)})();
BotanJS.define("Components.Vim.Actions.REDO");(function(){function a(a){this.a=a;this.h="REDO COMMAND"}var e=I("Components.Vim.Actions"),c=L("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(a.play(),this.h="<<TODO>>; before #"+a.id+"  "+a.time):this.h=c("REDO_LIMIT")};a.prototype.getMessage=function(){return this.h};e[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.oa=new g(a);this.R("",!0)}var e=I("Components.Vim.Actions"),c=L("Components.Vim.State.Stack"),g=L("Components.Vim.State.Stator");L("System.Debug");var f=L("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.R("",!0);this.a.moveX(-1)};a.prototype.R=function(a,b){if(b||!this.I){if(this.I){if(0==this.k&&""===this.i)return;this.I.store(this.oa.save(this.k,this.i));this.a.rec.record(this.I)}this.k=0;this.i="";this.I=new c}this.k+=
a.length};a.prototype.xa=function(a){var b=this.a,h=b.feeder;if(a.kMap("BS")){if(0==b.X&&0==h.panY&&0==b.Y)return;b.moveX(-1,!0,!0);a=b.aPos;0>=this.k&&(this.i=h.content.substr(a,1)+this.i);h.content=h.content.substring(0,a)+h.content.substring(a+1);this.k--}else if(a.kMap("Del"))a=b.aPos,this.i+=h.content.substr(a,1),h.content=h.content.substring(0,a)+h.content.substring(a+1);else return;h.pan();h.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.handler=function(a){a.preventDefault();
var b;a:switch(b=a.key,b){case "Tab":b="\t";break a;case "Enter":b="\n";break a}if(1!=b.length)this.xa(a);else{a=this.a;var h=a.feeder,c=a.aPos;h.content=h.content.substring(0,c)+b+h.content.substring(c);"\n"==b?(h.softReset(),h.pan(),a.moveY(1),a.lineStart()):(h.pan(),a.moveX(1,!1,!0));h.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.R(b)}};a.prototype.getMessage=function(){for(var a=this.a.feeder.firstBuffer.cols,b=f("INSERT"),h=b.length;h<a;h++)b+=" ";return b};e[1](2,"INSERT",a)})();
BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new f;this.action=null;this.blink=!0;this.pSpace=!1;this.J=0}function e(a,d){var c=a.e(),k=a.Y+d,g=a.Y;for(c!=a.feeder.firstBuffer&&g--;g<k&&!c.placeholder;c=c.nextLine)c.br&&g++;return g}var c=I("Components.Vim"),g=L("System.Debug"),f=L("Components.Vim.State.Recorder"),d=L("Components.Vim.Actions.*");a.prototype.Vim;a.prototype.moveTo=function(a,d){for(var c=this.feeder.content,
k=this.e().lineNum,g=0,f=0,e=c.indexOf("\n");0<=e&&!(a<=e);e=c.indexOf("\n",e))f=e,e++,g++;c=g-k;k=a<f?f-a:a-f;c&&this.moveY(c);0<this.e().lineNum&&f<=a&&k--;this.moveX(-Number.MAX_VALUE);this.moveX(k,!1,d)};a.prototype.moveX=function(a,d,c){var k=this.pX,g=Boolean(a);g&&(k=this.X+a);a||(a=1);if(d&&0>k&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),this.lineEnd(c);else{var f=this.e().visualLines.join("\n");d=f.length;f=f[k];c&&d-1<=k||1==d&&void 0==f?k=0<a?d-1:0:2<=d&&k==d-1&&" "==f||void 0==f?k=
0<a?d-2:0:"\n"==f&&(k+=a);this.X=k;g&&(this.pX=k,this.updatePosition())}};a.prototype.lineStart=function(){this.pX=0;this.moveX();this.updatePosition()};a.prototype.lineEnd=function(a){this.moveX(Number.MAX_VALUE,!1,a)};a.prototype.updatePosition=function(){var a=0,d=0,c=this.feeder.lineBuffers[0];a:for(;c&&d<this.Y;d++)for(;c;){if(c.next&&c.next.placeholder)break a;a+=c.toString().length+1;if((c=c.next)&&c.br)break}this.PStart=a=this.X+a;this.PEnd=a+1;this.L()};a.prototype.L=function(){0<this.J?
g.Info("Event suppressed, suppression level is: "+this.J):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=function(a){var d=this.Y+a,c=this.feeder,g;if(0>d)c.pan(void 0,d),this.Y=0,this.moveX(),this.updatePosition(),c.softReset();else if(!c.EOF&&c.moreAt<d){c=this.feeder;if(c.linesTotal<d){for(;!c.EOF;)c.pan(void 0,1);a=e(this,a)}else{g=c.lastBuffer.lineNum;var d=d-c.moreAt,f=this.e().lineNum;c.EOF||c.pan(void 0,d);for(d=f+a;!c.EOF&&(c.lastBuffer.lineNum==g||
c.lastBuffer.lineNum<d);)c.pan(void 0,1);this.Y=0;for(g=this.e();g&&g.lineNum!=d&&!g.placeholder;this.Y++,g=this.e());a=this.Y;c.EOF||c.lastBuffer.next.lineNum!=g.lineNum||a--}this.Y=a;this.moveX();this.updatePosition();c.softReset()}else{if(0<a){g=this.e();if(g.nextLine.placeholder)return;d=e(this,a)}this.Y=d;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a){this.action&&this.action.dispose();this.action=new d[a](this);this.p=null;this.L()};a.prototype.closeAction=function(){this.action&&
(this.action.dispose(),this.p=this.action.getMessage(),this.action=null,this.Vim.contentAnalyzer.reset(),this.L())};a.prototype.openRunAction=function(a,h){var c=new d[a](this);c.handler(h);this.p=c.getMessage();c.dispose();this.Vim.contentAnalyzer.reset();this.L()};a.prototype.suppressEvent=function(){++this.J};a.prototype.unsuppressEvent=function(){--this.J};a.prototype.e=function(){for(var a=this.feeder,d=a.firstBuffer,a=a.lastBuffer.next,c=0;d!=a;d=d.next)if(d.br&&c++,this.Y==c)return d;return null};
m(a.prototype,"aX",function(){var a=this.X,d=1;if(this.feeder.wrap){var c=this.e().visualLines,g;for(g in c){var f=c[g],e=f.content.toString().length,f=f.toString().length,a=a-(f+1);if(0<=a)d+=e;else if(0>a){d+=a+f;break}}}return d});m(a.prototype,"aPos",function(){var a=this.feeder,d=this.e().lineNum,c=0;if(0<d){c=a.content.indexOf("\n");for(i=1;-1!=c&&i<d;i++)c=a.content.indexOf("\n",c+1);a.wrap&&c++}return c+=this.aX});m(a.prototype,"message",function(){if(this.p){var a=this.p;this.p=null;return a}return this.action&&
this.action.getMessage()});m(a.prototype,"position",function(){return{start:this.PStart,end:this.PEnd}});c[1](2,"Cursor",a)})();BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,b){var h=[];h[a]=new c(b);for(var f=a-1;0<=f;f--)h[f]=new c(b,h[f+1]);this.lineBuffers=h;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new g(this);this.dispatcher=new A;this.n=null;this.D=-1;this.H=a}var e=I("Components.Vim");L("System.Debug");var c=e[0]("LineBuffer"),g=e[0]("Cursor"),f=L("System.utils.Perf.CountSubstr");a.prototype.init=function(a,b){this.content=a;this.setWrap(b);this.firstBuffer.w(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var b=this,h=a?function(){return!0}:function(a){return!a.placeholder};this.va=function(a,d){for(var c=(void 0==a?"":a)+"",g=!1,f=0;a&&f<d&&(a=a.next)&&h(a);f++)g||a.br&&d<f+a.visualLines.length?(g||(b.n=a),g=!0,c+="\n@"):c+="\n"+a;return c};this.wa=function(){for(var a=b.lineBuffers[b.ua],d=b.fa+1,c=0;a&&c<d&&(a=a.next)&&h(a);c++)if(a.br&&d<c+a.visualLines.length){b.n=a;break}}};a.prototype.render=function(a,b){var h=this.lineBuffers;
if(void 0==a)a=0;else if(this.H<a)return"";if(void 0==b||this.H-a<b)b=this.rows-a;if(0==b)return"";this.ua=a;this.fa=b-1;return this.va(h[a],this.fa)};a.prototype.pan=function(a,b){void 0==a&&(a=0);void 0==b&&(b=0);var h=this.panX+a,c=this.panY+b,g=-1,f=0;0>c&&(c=0);var e=this.content.slice(0,-1);if(0<c)for(g=e.indexOf("\n"),f=1;-1!=g&&f<c;f++){var u=e.indexOf("\n",g+1);if(-1==u){c=f;break}g=u}this.firstBuffer.w(this.content.substr(g+1),this.wrap,f);this.panX=h;this.panY=c};a.prototype.softReset=
function(){this.D=-1;this.n=null;this.wa()};m(a.prototype,"linesTotal",function(){return f(this.content,"\n")});m(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});m(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.H-1]});m(a.prototype,"EOF",function(){return this.lineBuffers[this.H].placeholder});m(a.prototype,"moreAt",function(){if(0<this.D)return this.D;var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do{if(this.n==a)break;a.br&&b++}while(a=a.next);void 0==
a&&b--;return this.D=b});m(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,b=this.cursor.e(),c="",g=b.content.match(/\t/g);g&&(c="-"+(a+g.length*b.tabWidth));return b.lineNum+1+","+a+c});m(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY&&this.EOF)a="BOTTOM";else if(this.n||!this.EOF)a="TOP";return a});m(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do b++;while((a=a.next)&&!a.placeholder);return b});e[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");
(function(){function a(a){this.cols=a;this.T={}}var e=I("Components.Vim");L("System.Debug");e[0]("LineFeeder");a.prototype.stamp=function(a,g){this.T[a]=g};m(a.prototype,"statusText",function(){for(var a="",g=this.cols,f=0;f<g;f++){var d=g-f,b=this.T[f]||this.T[-d];b?(b=b(),void 0!=b&&""!==b&&(a+=b.substr(0,d),f=a.length)):a+=" "}return a});e[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,b){this.P=b;this.Ba=a;var h=this.P.keyCode;this.ra=27==h||b.ctrlKey&&67==h;this.aa=h+(b.shiftKey||b.getModifierState("CapsLock")?512:0)+(b.ctrlKey?1024:0)+(b.altKey?2048:0);this.ta=16==h||17==h||18==h;this.sa=b.key;this.q=null}function e(a){this.la=a;this.V=a.contentFeeder;this.m=this.V.cursor}var c=I("Components.Vim");L("System.Debug");var g=c[0]("Beep"),f={};e.prototype.c=function(a,b){if(b)return this.g||(this.g=[]),this.g.push({keys:Array.prototype.slice.call(arguments,
2),handler:b,ma:0}),!0;for(var h=a.keyCode,c=0;c<this.g.length;c++){var f=this.g[c],e=f.keys;if(e[f.ma++]==h)return f.ma==e.length&&(f.handler(a),this.g=null,this.l=!1),!0}this.g&&g();this.g=null;return this.l=!1};e.prototype.qa=function(a){var b=this.m;switch(a.keyCode){case 577:b.lineEnd();case 65:this.A(1,!0,!0);case 73:b.openAction("INSERT");break;case 85:b.openRunAction("UNDO",a);break;case 1106:b.openRunAction("REDO",a);break;case 68:b.openAction("DELETE");break;case 86:b.openAction("VISUAL");
break;case 598:b.openAction("VISUAL_LINE")}};e.prototype.A=function(a,b,c){var f=this.m,e=f.X;f.moveX(a,b,c||f.pSpace);f.X==e&&g()};e.prototype.U=function(a){var b=this.m,c=this.V,f=b.Y+c.panY;b.moveY(a);f!=b.Y+c.panY||0<a&&!c.EOF||g()};e.prototype.W=function(a){var b=a.keyCode;if(this.l&&this.c&&!a.ModKeys)return this.c(a),!0;var c=this.m,f=c.feeder,e=!0;switch(b){case 8:this.A(-1,!0);break;case 72:this.A(-1);break;case 76:this.A(1);break;case 75:this.U(-1);break;case 74:this.U(1);break;case 1094:if(f.firstBuffer.nextLine.placeholder){g();
break}f.pan(void 0,f.moreAt);f.softReset();c.moveY(-c.Y);break;case 1090:if(0==f.panY){g();break}f.pan(void 0,-f.moreAt);f.softReset();c.moveY(-c.Y);f.EOF||c.moveY(f.moreAt);break;case 584:break;case 588:break;case 566:c.lineStart();break;case 564:c.lineEnd(c.pSpace);break;case 583:c.moveY(Number.MAX_VALUE);c.moveX(Number.MAX_VALUE,!0);break;case 565:var r=this.la.contentAnalyzer,b=r.bracketAt(c.aPos);if(-1==b.open){g();break}c.moveTo(b.selected==b.close?b.open:b.close);break;case 84:break;case 73:if(!c.action){e=
!1;break}r=this.la.contentAnalyzer;this.l=!0;this.c(a,function(a){var b=r.wordAt(c.aPos);a.q=b},87);var b=function(a){var b=r.bracketIn("(",c.aPos);a.q=b},f=function(a){var b=r.bracketIn("{",c.aPos);a.q=b},x=function(a){var b=r.bracketIn("[",c.aPos);a.q=b};this.c(a,b,560);this.c(a,b,569);this.c(a,x,219);this.c(a,x,221);this.c(a,f,731);this.c(a,f,733);break;case 71:this.l=!0;this.c(a,function(){c.moveY(-Number.MAX_VALUE);c.moveX(-Number.MAX_VALUE,!0)},71);this.c(a,function(){c.openRunAction("PRINT_HEX",
a)},56);break;default:e=!1}return e};e.prototype.handler=function(a,b){if(!(2116==b.keyCode||112<b.keyCode&&123>=b.keyCode))if(b.Escape&&this.g)this.g=null,this.l=!1,g();else{var c=this.m;c.action?b.Escape?(b.preventDefault(),c.closeAction()):(c.action.allowMovement&&this.W(b),c.action.handler(b)&&c.closeAction()):(b.preventDefault(),this.W(b)||this.qa(b))}};m(a.prototype,"target",function(){return this.Ba});m(a.prototype,"key",function(){return this.sa});m(a.prototype,"keyCode",function(){return this.aa});
m(a.prototype,"ModKeys",function(){return this.ta});m(a.prototype,"Escape",function(){return this.ra});m(a.prototype,"range",function(){var a=this.q;return a&&-1==a.open&&-1==a.close?null:a});a.prototype.kMap=function(a){var b=this.aa;if(f[a])a=f[a];else{var c=a.split("-"),g=c[0],e=0;if(2==c.length){var r=!0;switch(c[0]){case "C":e=1024;break;case "A":e=2048;break;case "S":e=512;break;default:r=!1}r&&(g=c[1])}switch(g){case "BS":c=e+8;break;case "Del":c=e+46;break;case "A":e=512;case "a":c=e+65;break;
case "B":e=512;case "b":c=e+66;break;case "C":e=512;case "c":c=e+67;break;case "D":e=512;case "d":c=e+68;break;case "E":e=512;case "e":c=e+69;break;case "F":e=512;case "f":c=e+70;break;case "G":e=512;case "g":c=e+71;break;case "H":e=512;case "h":c=e+72;break;case "I":e=512;case "i":c=e+73;break;case "J":e=512;case "j":c=e+74;break;case "K":e=512;case "k":c=e+75;break;case "L":e=512;case "l":c=e+76;break;case "M":e=512;case "m":c=e+77;break;case "N":e=512;case "n":c=e+78;break;case "O":e=512;case "o":c=
e+79;break;case "P":e=512;case "p":c=e+80;break;case "Q":e=512;case "q":c=e+81;break;case "R":e=512;case "r":c=e+82;break;case "S":e=512;case "s":c=e+83;break;case "T":e=512;case "t":c=e+84;break;case "U":e=512;case "u":c=e+85;break;case "V":e=512;case "v":c=e+86;break;case "W":e=512;case "w":c=e+87;break;case "X":e=512;case "x":c=e+88;break;case "Y":e=512;case "y":c=e+89;break;case "Z":e=512;case "z":c=e+90;break;case "!":e=512;case "1":c=e+49;break;case "@":e=512;case "2":c=e+50;break;case "#":e=
512;case "3":c=e+51;break;case "$":e=512;case "4":c=e+52;break;case "%":e=512;case "5":c=e+53;break;case "^":e=512;case "6":c=e+54;break;case "&":e=512;case "7":c=e+55;break;case "*":e=512;case "8":c=e+56;break;case "(":e=512;case "9":c=e+57;break;case ")":e=512;case "0":c=e+48;break;case "<":e=512;case ",":c=e+188;break;case ">":e=512;case ".":c=e+190;break;default:throw Error("Unsupport keys: "+a);}a=f[a]=c}return b==a};a.prototype.preventDefault=function(){this.P&&this.P.preventDefault()};c[1](2,
"Controls",e);c[1](2,"InputEvent",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a){if(a){var b=a.element;if("TEXTAREA"!=b.nodeName)d.Error("Element is not compatible for VimArea");else{a.setAttribute(new g("vimarea",1));this.stage=a;this.rows=b.rows;this.cols=b.cols;this.N=!1;var c=this;a.addEventListener("Focus",function(){c.N=!0});a.addEventListener("Blur",function(){c.N=!1});this.na(b.value);p.push(this)}}}function e(a,b){return function(c){c=c||window.event;c.keyCode?code=c.keyCode:c.which&&(code=c.which);b(a,new x(a,c))}}var c=I("Components.Vim");
L("Dandelion.IDOMElement");var g=L("System.utils.DataKey"),f=L("System.Cycle"),d=L("System.Debug"),b=L("Components.Vim.State.Registers"),h=L("Components.Vim.Syntax.Analyzer"),q=c[0]("LineFeeder"),k=c[0]("StatusBar"),r=c[0]("Controls"),x=c[0]("InputEvent"),u=c[0]("Message"),p=[];a.prototype.select=function(a){if(this.N){var b=this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.na=function(a){function c(){z.init(B.statusText);g.value=t.render(0,p-z.linesOccupied)+"\n"+
z.render();d.O=!1;d.select(t.cursor.position)}var d=this,g=this.stage.element,p=this.rows,y=this.cols,t=new q(p-1,y),x=new h(t);t.init(a+"\n");var z=new q(p,y);z.setRender(!1);t.cursor.Vim=this;z.cursor.Vim=this;var B=new k(y);B.stamp(-18,function(){return t.lineStat});B.stamp(-3,function(){return u(t.docPos)});B.stamp(0,function(){return t.cursor.message});z.init(B.statusText);t.dispatcher.addEventListener("VisualUpdate",c);c();this.contentFeeder=t;this.contentAnalyzer=x;this.statusFeeder=z;this.statusBar=
B;this.Ga=new b;this.a=t.cursor;this.O=!0;f.perma("VimCursorBlinkCycle"+g.id,function(){d.select(!d.a.blink||(d.O=!d.O)?d.a.position:{start:0,end:0})},600);a=new r(this);this.stage.addEventListener("KeyDown",e(this,a.handler.bind(a)))};m(a,"Instances",function(){return p.slice()});m(a.prototype,"content",function(){return this.contentFeeder.content.slice(0,-1)});c[1](2,"VimArea",a)})();})();
