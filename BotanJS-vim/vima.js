(function(){function l(a,g){a.prototype=Object.create(g.prototype);a.prototype.constructor=a}function p(a,g,d){Object.defineProperty(a,g,{get:d,set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:g})})}function s(a,g){Object.defineProperty(a,"propagating",{get:g,set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:"propagating"})})}
function y(a,g,d){Object.defineProperty(a,g,{get:function(){return d},set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:g})})}function BotanEvent(a,g){var d=!1,h=!1;y(this,"propagate",function(){h||(d=!0);h=!0});y(this,"stopPropagating",function(){d=!1});y(this,"type",a);s(this,function(){return d});y(this,"data",g);this.setTarget=function(a){y(this,"target",a);this.setTarget=void 0}.bind(this)}
function C(){function a(){this.O.propagate();for(var a in this.stack)if(this.O.propagating)this.stack[a](this.O);this.O.stopPropagating()}function g(a){d[a]||(d[a]=[]);return d[a]}var d={},h=this;this.addEventListener=function(a,c){var b=g(a);b[b.length]=c};this.removeEventListener=function(a,c){var b=g(a),f=b.indexOf(c);0>f||delete b[f]};this.dispatchEvent=function(e){var c=g(e.type);e.setTarget&&e.setTarget(h);setTimeout(a.bind({O:e,stack:c}),0)}}function E(){C.call(this)}E.prototype=[];
var F={},G={},I={},J=window.BotanJS,BotanJS=null,K=null,L=null;J&&(BotanJS=J.sg[0],K=J.sg[1],L=J.sg[2]);BotanJS=BotanJS||function(){var a=0,g=[],d=[],h=new C,e={write:function(c){g[g.length]=c}};y(e,"read",function(){return g[a++]});y(e,"end",function(){return g.length<=a});y(h,"log",e);y(h,"define",function(c){d[d.length]=c});y(h,"getDef",function(){return d.slice()});return h}();
K=K||function(a){if(G[a])return G[a];for(var g=a.split("."),d=g.length,h=F,e=0;e<d;e++)h[g[e]]=h[g[e]]||{},h=h[g[e]];h.sa=[];nsObj=new E;nsObj[1]=function(c,b,f){this.i[b]||(this.i[b]=[c,f],c=new BotanEvent("NS_EXPORT",{name:this.C+"."+b,type:c}),BotanJS.dispatchEvent(c))}.bind({i:h,C:a});nsObj[0]=function(c){if(!this.i[c])throw Error("["+this.C+"] Invoke failed: "+c+" does not exists");return this.i[c][1]}.bind({i:h,C:a});nsObj[10]=function(c,b){this.sa[c]=b}.bind(h);nsObj[11]=function(c,b){throw Error("["+
this.C+(b?"."+b:"")+"] "+c);}.bind({C:a});BotanJS.dispatchEvent(new BotanEvent("NS_INIT",a));return G[a]=nsObj};
L=L||function(a,g){var d=a.replace(".*","");G[d]&&G[d].dispatchEvent(new BotanEvent("NS_IMPORT",c));if(!g&&I[a])return I[a];for(var h=a.split("."),e=h.length,c=F,d=!1,b=0;b<e;b++){if("*"==h[b]){d=!0;break}c=c[h[b]];if(!c)throw Error("No such class: "+a);}if(c instanceof Array&&"*"!=h[b])return d=null,d=10==c[0]?c[1]():c[1],I[a]=d;h={};for(b in c)e=c[b],e instanceof Array&&(d&&2==e[0]?h[b]=e[1]:3==e[0]?h[b]=e[1]:0==e[0]?Object.defineProperty(h,b,{get:function(){return this.i[this.b][1]}.bind({b:b,
i:c}),set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:b})}):1==e[0]?Object.defineProperty(h,b,{get:function(){return this.i[this.b][1]()}.bind({b:b,i:c}),set:function(b){this.i[this.b][1](b)}.bind({b:b,i:c})}):10==e[0]&&Object.defineProperty(h,b,{get:e[1],set:function(){throw Error("Setting a read-only property: "+this.b);}.bind({b:b})}));return I[a]=h};window.BotanJS={};window.BotanJS.version="0.2";window.BotanJS.codename="Botanical framework.js";
window.BotanJS["import"]=function(a){try{return L(a)}catch(g){if(J)return J["import"](a);throw g;}};window.BotanJS.sg=[BotanJS,K,L];BotanJS.define("System.utils.IKey");
(function(){function a(d,h){d&&"string"!=typeof d||(this.keyName=d,this.keyValue=h instanceof a?h:void 0!=h?String(h):"",this.keyName=this.keyName,this.keyValue=this.keyValue)}var g=K("System.utils");a.prototype.keyName="";a.prototype.keyValue="";y(a,"quickDef",function(){var d=arguments.length;if(0!=d%2)g[11]("Invalid Definition Count","IKey");for(var h=[],e=0;e<d;e+=2)h[h.length]=new a(arguments[e],arguments[e+1]);return h});g[1](2,"IKey",a)})();BotanJS.define("System.utils.Perf");
(function(){for(var a=K("System.utils.Perf"),g=[],d=0;256>d;d++)g[d]=(16>d?"0":"")+d.toString(16);a[1](10,"uuid",function(){var a=4294967295*Math.random()|0,e=4294967295*Math.random()|0,c=4294967295*Math.random()|0,b=4294967295*Math.random()|0;return g[a&255]+g[a>>8&255]+g[a>>16&255]+g[a>>24&255]+"-"+g[e&255]+g[e>>8&255]+"-"+g[e>>16&15|64]+g[e>>24&255]+"-"+g[c&63|128]+g[c>>8&255]+"-"+g[c>>16&255]+g[c>>24&255]+g[b&255]+g[b>>8&255]+g[b>>16&255]+g[b>>24&255]});a[1](3,"CountSubstr",function(a,e){if(0>=
e.length)return a.length+1;for(var c=0,b=a.indexOf(e);0<=b;b=a.indexOf(e,b))c++,b++;return c});a[1](3,"ArrayReverse",function(a){for(var e=null,c=a.length,b=null,e=0,b=c-1;e<b;e+=1,--b){var c=a[e],f=a[b],c=c^f,f=f^c,c=c^f;a[e]=c;a[b]=f}})})();BotanJS.define("System.Global");
(function(){var a=K("System.Global"),g=Boolean(document.all),d=window.allowed_origins||[],h=window.location.href.match(/^https:\/\//);a[1](10,"debug",function(){return window.debugEnv&&window.debugEnv});a[1](0,"IE",g);a[1](0,"ALLOWED_ORIGINS",d);a[1](0,"SECURE_HTTP",h)})();BotanJS.define("Dandelion");
(function(){function a(){if(v)return!0;try{return v=L("Dandelion.IDOMElement"),!0}catch(b){}return!1}function g(b,f){if(f&&a()){for(var c=b.length,m=[],k=0;k<c;k++)m[k]=v(b[k]);return m}return b}function d(b,f){b&&f(b)&&b.parentNode&&d(b.parentNode,f)}function h(b,f){return f(b)?b:b.parentNode&&h(b.parentNode,f)}function e(b){return document.createTextNode(b)}function c(f,c,a,e,d){f=document.createElement(f||"div");c&&(f.id=c);a&&(k?f.className=a:f.setAttribute("class",a));if(d)if(d instanceof Array)for(var h in d)f.setAttribute(d[h].keyName,
d[h].keyValue);else d instanceof m&&f.setAttribute(d.keyName,d.keyValue);e&&b(f,e);return f}function b(f,c){if(c instanceof Array)for(var a=c.length,m=0;m<a;m++)c[m]&&b(f,c[m]);else"string"==typeof c?f.appendChild(e(c)):c&&f.appendChild(c)}var f=K("Dandelion"),k=L("System.Global.IE"),m=L("System.utils.IKey"),v;f[1](3,"wrap",c);f[1](3,"wrapc",function(b,f,a){return c(!1,!1,b,f,a)});f[1](3,"wrape",function(b,f){return c(!1,!1,!1,b,f)});f[1](3,"wrapne",function(b,f,a){return c(b,!1,!1,f,a)});f[1](3,
"wrapna",function(b,f){return c(b,!1,!1,!1,f)});f[1](3,"textNode",e);f[1](3,"bubbleUp",h);f[1](3,"chainUpApply",d);f[1](3,"id",function(b,f){var c=document.getElementById(b);return c?f&&a()?v(c):c:c});f[1](3,"tag",function(b,f,c){c=void 0===c?document:c;return g(c.getElementsByTagName(b),f)});f[1](3,"name",function(b,f,c){c=void 0===c?document:c;return g(c.getElementsByName(b),f)});f[1](3,"glass",function(b,f,c){c=void 0===c?document:c;return g(c.getElementsByClassName(b),f)})})();BotanJS.define("System.utils.EventKey");
(function(){function a(a,e){d.call(this,a,e);this.type=a.toLowerCase();this.handler=e}var g=K("System.utils"),d=g[0]("IKey");l(a,d);a.prototype.type="";a.prototype.handler=null;g[1](2,"EventKey",a)})();BotanJS.define("Dandelion.IDOMObject");
(function(){function a(d,c){if(d instanceof a)return d;if(c)this.addEventListener=this.addEventListener.bind(d),this.addEventListeners=this.addEventListeners.bind(this),this.hasListener=this.hasListener.bind(d),this.removeEventListener=this.removeEventListener.bind(d);else{if(d)return new a(d,!0);throw Error("[Dandelion.IDOMObject] Invalid argument");}}function g(){}var d=K("Dandelion"),h=L("System.utils.EventKey");g.prototype.indexOf=function(a){for(var c=this.length,b=0;b<c;b++){var f=this[b];if(f.type==
a.type&&f.handler==a.handler)return b}return-1};l(g,Array);a.prototype.hasListener=function(a){return a instanceof h&&this.g&&-1!=this.g.indexOf(a)?this.g[this.g.indexOf(a)]:null};a.prototype.addEventListener=function(a,c){var b;if("string"==typeof a&&c)b=new h(a,c);else if(a instanceof h)b=a;else return!1;if(this.g)if(0>this.g.indexOf(b))this.g.push(b);else return!1;else this.g=new g,this.g[0]=b;this.addEventListener?this.addEventListener(b.type,b.handler,!1):this.attachEvent?this.attachEvent("on"+
b.type,b.handler):this["on"+b.type]=b.handler;return!0};a.prototype.addEventListeners=function(a){if(a instanceof Array)for(var c in a)this.addEventListener(a[c])};a.prototype.removeEventListener=function(a,c){c&&(a=new h(a,c));this.g&&delete this.g[this.g.indexOf(a)];this.removeEventListener?this.removeEventListener(a.type,a.handler):this.detachEvent?this.detachEvent("on"+a.type,a.handler):this["on"+a.type]=null};d[1](2,"IDOMObject",a)})();BotanJS.define("Dandelion.IDOMElement");
(function(){function a(b){b=typeof b;return"number"==b?d:"string"==b?g:h}function g(b,f){return b.nodeName==f}function d(b,f){return b.nodeType==f}function h(){return!1}function e(b,c){if(b instanceof e)return b;if(c)k.call(this,b,!0),this.getDAttribute=this.getDAttribute.bind(b),this.lootChildren=this.lootChildren.bind(b),this.foreach=this.foreach.bind(b),this.reverseChild=this.reverseChild.bind(b),this.first=this.first.bind(b),this.last=this.last.bind(b),this.contains=this.contains.bind(b),this.style=
b.style,this.hasAttribute=function(){}.bind(b),this.removeAttribute=function(b){this.removeAttribute(b)}.bind(b),this.element=b,this.setAttribute=this.setAttribute.bind(b);else{if(b&&void 0!=b.nodeType&&1==b.nodeType)return new e(b,!0);if(void 0===b)return new e(f(),!0);throw Error("[Dandelion.IDOMElement] Invalid argument");}return this}var c=K("Dandelion"),b=L("System.utils.IKey");L("System.utils.Perf");var f=c[0]("wrap"),k=c[0]("IDOMObject");l(e,k);e.prototype.setAttribute=function(f,c){if(f instanceof
b)this.setAttribute(f.keyName,f.keyValue);else if(f instanceof Array)for(var a in f)f[a]instanceof b&&this.setAttribute(f[a].keyName,f[a].keyValue);else this.setAttribute(f,c)};e.prototype.lootChildren=function(b){for(var f=b.childNodes;f.length;)this.appendChild(b.removeChild(f[0]))};e.prototype.getDAttribute=function(b){return(b=this.getAttribute("data-"+b))&&decodeURIComponent(b)};e.prototype.foreach=function(b,f){for(var c=Array.apply([],this.childNodes),a=c.length,k=0;k<a;k++)c[k].nodeType==
b&&f(c[k],this)};e.prototype.first=function(b,f){for(var c=this.childNodes,k=c.length,d=null,e=a(b),h=0;h<k;h++)if(e(c[h],b)&&(void 0===f||f(c[h],this))){d=c[h];break}return d};e.prototype.last=function(b,f){for(var c=this.childNodes,k=null,d=a(b),e=c.length-1;-1<e;e--)if(d(c[e],b)&&(void 0===f||f(c[e],this))){k=c[e];break}return k};e.prototype.contains=function(b){return b.parentElement?b==this?!0:this.contains(b.parentElement):!1};e.prototype.aKeys=function(){for(var f=[],c=this.element.attributes,
a=c.length,k=0;k<a;k++)f.push(new b(c[k].name,c[k].value));return f};e.prototype.reverseChild=function(){for(var b=this.childNodes.length-1;-1<--b;)this.appendChild(this.childNodes[b])};c[1](2,"IDOMElement",e)})();BotanJS.define("System.utils.DataKey");(function(){function a(a,e){d.call(this,"data-"+a,e?encodeURIComponent(String(e)):"")}var g=K("System.utils"),d=g[0]("IKey");l(a,d);g[1](2,"DataKey",a)})();BotanJS.define("System.utils");
(function(){var a=K("System.utils"),g=L("System.Global");a[1](3,"objGetProp",function(a,h,e){if(a&&a[h]){var c=a[h].constructor.toString().match(/function ([^\(]+)/);if(c&&2==c.length&&c[1].toUpperCase()==e.toUpperCase())return a[h]}return null});a[1](3,"objSearch",function(a,h,e){for(var c in a)if(h(a[c]))return a[c][e]||a[c];return null});a[1](3,"objMap",function(a,h){for(var e in a)a[e]=h(a[e])});a[1](3,"siteProto",function(a){return a.match(/^https?:\/\//)?g.SECURE_HTTP?a.replace(/^http:\/\//,
"https://"):a.replace(/^https:\/\//,"http://"):"http"+(g.SECURE_HTTP?"s":"")+"://"+a})})();BotanJS.define("System.Tick");
(function(){function a(){var a=0;this.A=!1;this.loop=function(){for(var h in this.steppers)this.steppers[h]();a++};p(this,"count",function(){return a})}var g=K("System");a.prototype.putStepper=function(a){var h=this.steppers.length;this.steppers[h]=a;return h};a.prototype.start=function(){this.A||(this.id=setInterval(this.loop.bind(this),0),this.A=!0)};a.prototype.stop=function(){this.A&&(this.A=!1,clearInterval(this.id))};a.prototype.steppers=[];p(a.prototype,"started",function(){return this.A});
g[1](2,"Tick",a)})();BotanJS.define("System.Log");(function(){var a=K("System.Log"),g=[];a[1](3,"writeLine",function(a,h){h=void 0===h?16:h;var e=!1,c;for(c in g)g[c](a,h),e=!0;!e&&window.console&&console.log&&console.log(a)});a[1](3,"registerHandler",function(a){var h=-1;g[h=g.length]=a;return h});a[1](3,"removeHandler",function(a){delete g[a]});a[1](0,"INFO",16);a[1](0,"ERROR",32);a[1](0,"SYSTEM",1)})();BotanJS.define("System.Debug");
(function(){function a(){h&&d.writeLine(Array.prototype.join.call(arguments," "),d.INFO)}var g=K("System.Debug"),d=L("System.Log"),h=L("System.Global").debug,e=!0;for(BotanJS.log.write=a;!BotanJS.log.end();)a(BotanJS.log.read());g[1](3,"Error",function(c){e&&d.writeLine(c.name+"\n\t"+c.message+"\n\t"+c.stack,d.ERROR)});g[1](3,"Info",a);g[1](3,"turnOff",function(c){"info"==c?h=!1:"error"==c&&(e=!1)});g[1](3,"turnOn",function(c){"info"==c?h=!0:"error"==c&&(e=!0)})})();BotanJS.define("System.Cycle");
(function(){function a(b){b.target.removeEventListener("NS_IMPORT",a);b=L("System.Cycle.TICK",!0);b!=c&&b.Ka?(h.Info("[System.Cycle] Global Tick exists"),c=null):(h.Info("[System.Cycle] Creating global Tick"),c.start())}var g=K("System.Cycle");L("System.utils");var d=L("System.Tick"),h=L("System.Debug"),e=[],c=new d;c.putStepper(function(){var b=(new Date).getTime(),f;for(f in e){var c=e[f];if(c&&b>c[1]){try{c[0]()}catch(a){h.Error(a);delete e[f];continue}c[2]?delete e[f]:c[1]=b+c[4]}}});g.addEventListener("NS_IMPORT",
a);g[1](3,"next",function(b){e[e.length]=[b,0,!0]});g[1](3,"delay",function(b,f){e[e.length]=[b,(new Date).getTime()+f,!0]});g[1](3,"perma",function(b,f,c){for(var a in e)if(e[a][3]==b)return!1;e[e.length]=[f,(new Date).getTime()+c,!1,b,c]});g[1](3,"permaRemove",function(b){for(var f in e)e[f][3]==b&&delete e[f]});g[1](10,"TICK",function(){return c})})();BotanJS.define("Components.Vim.State.Registers");
(function(){function a(){this.J={}}function g(a,d){this.V=a+"";this.newLine=Boolean(d)}var d=K("Components.Vim.State");g.prototype.newLine=!1;g.prototype.toString=function(){return this.V};g.prototype.indexOf=function(a,d){return this.V.indexOf(a,d)};p(g.prototype,"length",function(){return this.V.length});a.prototype.oa=function(a){this.J['"']=a};a.prototype.yank=function(a,d){var c=new g(a,d);this.oa(c);this.J[0]=c};a.prototype.change=function(a,d){var c=new g(a,d);this.oa(c);for(var b=this.J,f=
9;1<f;f--)void 0!=b[f-1]&&(b[f]=b[f-1]);b[1]=c};a.prototype.get=function(a){a||0===a||(a='"');return this.J[a]};d[1](2,"Registers",a)})();BotanJS.define("Components.Vim.Syntax.Word");
(function(){function a(a){a:{a=a.charCodeAt(0);for(var c=0;c<h;c++)for(var b=d[c],f=b.length,k=0;k<f;k++){var m=b[k];if(m[0]<=a&&a<=m[1]){a=b;break a}}a=[]}this.Ha=a}var g=K("Components.Vim.Syntax"),d=[[[48,57]],[[65,90],[97,122],[192,255],[256,383],[384,591],[7424,7551],[7552,7615],[7616,7679],[7680,7935],[7936,8191]],[[592,687],[688,767],[768,879],[880,1023],[1024,1279],[1280,1327],[1328,1423]],[[1424,1535],[1536,1791],[1792,1871],[1872,1919],[1920,1983],[1984,2047],[2048,2111],[2112,2143],[2208,
2303]],[[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3456,3583],[3584,3711],[3712,3839],[3840,4095],[4096,4255],[4256,4351],[4352,4607],[4608,4991],[4992,5023],[5024,5119],[5120,5759],[5760,5791],[5792,5887]],[[5888,5919],[5920,5951],[5952,5983],[5984,6015],[6016,6143],[6144,6319],[6320,6399],[6400,6479]],[[6480,6527],[6528,6623],[6624,6655],[6656,6687],[6688,6831],[6832,6911],[6912,7039],[7040,7103],[7104,7167],[7168,7247],[7248,7295],
[7360,7375],[7376,7423]],[[8192,8303],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703],[8704,8959],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[10176,10223],[10224,10239],[10240,10495],[10496,10623],[10624,10751],[10752,11007],[11008,11263],[11264,11359],[11360,11391],[11392,11519],[11520,11567],[11568,11647],[11648,11743],[11744,11775],[11776,11903]],[[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12352,
12447],[12448,12543],[12544,12591],[12592,12687],[12688,12703],[12704,12735],[12736,12783],[12784,12799],[12800,13055],[13056,13311],[13312,19903],[19904,19967],[19968,40959],[40960,42127],[42128,42191],[42192,42239],[42240,42559],[42560,42655],[42656,42751],[42752,42783],[42784,43007],[43008,43055],[43056,43071],[43072,43135],[43136,43231],[43232,43263],[43264,43311],[43312,43359],[43360,43391],[43392,43487],[43488,43519],[43520,43615],[43616,43647],[43648,43743],[43744,43775],[43776,43823],[43824,
43887],[43888,43967],[43968,44031],[44032,55215],[55216,55295]],[[55296,56319],[56320,57343],[57344,63743],[63744,64255],[64256,64335],[64336,65023],[65024,65039],[65040,65055],[65056,65071],[65072,65103],[65104,65135],[65136,65279],[65280,65519],[65520,65535]],[[33,47],[58,64],[91,96],[123,126],[161,172],[174,191]]],h=d.length;a.prototype.test=function(a){if(void 0==a||null==a||!a.charCodeAt)return!1;var c=this.Ha,b=c.length;a=a.charCodeAt(0);for(var f=0;f<b;f++){var k=c[f];if(k[0]<=a&&a<=k[1])return!0}return!1};
g[1](2,"Word",a)})();BotanJS.define("Components.Vim.Syntax.Analyzer");
(function(){function a(){this.fa=this.ma=this.F=this.I=-1;this.ia=null}function g(b){this.G=b;this.M={}}function d(b,c){if(!c)throw Error("Parent not found");var m=new a;m.fa=c[2];m.I=c[0];m.F=c[1];if(-1<c[3]){var e=b.find(c[3]);m.ia=d(b,e)}return m}function h(b,a){for(var d=a.length,e=b.split("\n"),h=e[0],e=e[1],g=[],r=[],q=0,t=[],w=h.length,A=e.length,z=0;z<d;z++){var H=a.substr(z,A);if(a.substr(z,w)==h)g[q]=z,q++,z+=w-1;else if(H==e){H=z;if(0==q)r.push(H);else{var u=[];u[0]=g[--q];u[1]=H;u[2]=
q;u[3]=0<q?g[q-1]:-1;t.push(u)}z+=A-1}}r.length&&c.Info('Unmatched opening "'+h+'"@'+r.join(", "));0<q&&c.Info('Unmatched closing "'+e+'"@'+g.slice(0,q));this.ga=t}var e=K("Components.Vim.Syntax"),c=L("System.Debug"),b=e[0]("Word");h.prototype.find=function(b,c){void 0==c&&(c=0);for(var a=this.ga,d=a.length,e=0;e<d;e++){var h=a[e];if(h[c]==b)return h}return null};g.prototype.bracketAt=function(b){var c=this.G.content,m=1,e=null,h=c[b];switch(h){case "{":m=0;case "}":e=this.s("{\n}");break;case "[":m=
0;case "]":e=this.s("[\n]");break;case "(":m=0;case ")":e=this.s("(\n)");break;case "/":if("*"==c[b-1]){h="*/";b--;break}else if("*"==c[b+1]){h="/*";break}return new a;case "*":if("/"==c[b-1]){h="/*";b--;break}else if("/"==c[b+1]){h="*/";break}return new a;default:return new a}if(!e)switch(h){case "/*":m=0;case "*/":e=this.s("/*\n*/");break;default:return new a}c=e.find(b,m);e=d(e,c);e.ma=b;return e};g.prototype.bracketIn=function(b,c){var e="{[(".indexOf(b);0>e&&(e="}])".indexOf(b));if(0>e)throw Error("Unsupported bracket: "+
b);for(var h=this.s("{[("[e]+"\n"+"}])"[e]),g=h.ga,x=g.length,r=null,e=0;e<x;e++){var q=g[e];q[0]<=c&&c<=q[1]&&(r&&r[2]<q[2]||!r)&&(r=q)}if(r){h=e=d(h,r);do h.I++,h.F--;while(h=h.parent);return e}return new a};g.prototype.s=function(b){if(this.M[b])return this.M[b];var c=new h(b,this.G.content);return this.M[b]=c};g.prototype.reset=function(){this.M={}};g.prototype.quoteAt=function(b){switch(this.G.content[b]){default:return{level:0,open:-1,close:-1}}};g.prototype.wordAt=function(c){var k=this.G.content,
d=k.length,e=c,h=c,g=new b(k[c]);if(0<c)for(;g.test(k[--e]););if(c<d)for(;g.test(k[++h]););c=new a;c.I=0<e?e+1:0;c.F=h-1;return c};p(a.prototype,"parent",function(){return this.ia});p(a.prototype,"open",function(){return this.I});p(a.prototype,"close",function(){return this.F});p(a.prototype,"level",function(){return this.fa});p(a.prototype,"selected",function(){return this.ma});e[1](2,"Analyzer",g);e[1](2,"TokenMatch",a)})();BotanJS.define("Components.Vim.LineBuffer");
(function(){function a(a,d){this.prev=null;this.cols=a;this.next=d;this.br=!1;this.placeholder=!0;this.lineNum=0;this.tabWidth=8;d&&(d.prev=this)}var g=K("Components.Vim");L("System.Debug");var d=L("System.utils.Perf.CountSubstr");a.prototype.D=function(a,d,c){this.lineNum=c;if(void 0==a||""===a)this.lineNum=++c,this.content="~",this.placeholder=this.br=!0,this.next&&this.next.D(a,d,c+1);else{this.placeholder=!1;var b="",f=!1,k=0,m=0,g=this.tabWidth-1;if(d){for(;k<this.cols-m*g;k++){var n=a[k];if(void 0===
n)break;if("\n"==n){f=!0;k++;break}else"\t"==n&&m++;b+=n}f||k!=this.cols||"\n"!=a[k]||(k++,f=!0)}else for(f=!0;;k++){n=a[k];if(void 0===n)break;if("\n"==n){k++;break}else"\t"==n&&m++;k<this.cols-m*g&&(b+=n)}this.next&&(this.next.br=f,this.next.D(a.substr(k),d,f?c+1:c));this.content=b}};a.prototype.toString=function(){var a=this.cols-d(this.content,"\t")*(this.tabWidth-1);return this.content.length<a?this.content+" ":this.content||" "};p(a.prototype,"nextLine",function(){for(var a=this,d=this.lineNum;(a=
a.next)&&a.lineNum==d;);return a});p(a.prototype,"visualLines",function(){for(var a=[this],d=this;(d=d.next)&&!d.br;)a.push(d);return a});g[1](2,"LineBuffer",a)})();BotanJS.define("Components.Vim.State.Recorder");
(function(){function a(){this.B=[];this.Ba=[];this.da=this.m=0}var g=K("Components.Vim.State");a.prototype.undo=function(){var a=this.m-1;return-1!=a&&this.B.length?this.B[this.m=a]:null};a.prototype.redo=function(){var a=this.B[this.m];return a?(this.m++,a):null};a.prototype.record=function(a){this.B[this.m++]=a;this.Ba[this.da++]=a;delete this.B[this.m];a.id=this.da};g[1](2,"Recorder",a)})();BotanJS.define("Components.Vim");
(function(){function a(c,b,a){if(void 0==c[b])return b;var k=0;return c[b].replace(/%\d+/g,function(){return a[k++]})}var g=K("Components.Vim"),d={INSERT:"-- INSERT --",REPLACE:"-- REPLACE --",MORE:"-- MORE --",VISUAL:"-- VISUAL  --",VISLINE:"-- VISUAL LINE --",WRITE:'"%1" %2L, %3C written',CONTINUE:"Press ENTER or type command to continue",SEARCH_HIT_BOTTOM:"Seach hit BOTTOM, contining at TOP",TOP:"Top",BOTTOM:"Bot",ALL:"All",EXIT:"Type :quit<Enter>  to exit Vim",UNDO_LIMIT:"Already at oldest change",
REDO_LIMIT:"Already at newest change",LINES_FEWER:"%1 fewer line(s)",LINES_MORE:"%1 more line(s)",LINES_YANKED:"%1 line(s) yanked"},h={E486:"E486: Pattern not found: %1"},e=new Audio("data:audio/ogg;base64,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");
g[1](3,"Message",function(c){return a(d,c,Array.prototype.slice.call(arguments,1))});g[1](3,"Error",function(c){return a(h,c,Array.prototype.slice.call(arguments,1))});g[1](3,"Beep",function(){setTimeout(function(){e.pause();e.currentTime=0;e.play()},0)})})();BotanJS.define("Components.Vim.Actions.YANK");
(function(){function a(c){this.a=c;this.f=c.aPos;this.c="";c.suppressEvent()}var g=K("Components.Vim.Actions");L("System.Debug");var d=L("Components.Vim.Message"),h=L("Components.Vim.Beep"),e=L("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(c,b){c.preventDefault();if(!c.ModKeys&&!c.kMap("i")){var a=c.target.W,k=this.a,m=!1,g=!1;if(void 0==b){m=!0;b=this.f;var n=k.aPos;if(this.f!=n)c.kMap("^")?b--:
c.kMap("l")?k.moveX(-1):c.kMap("h")?b=n:c.kMap("j")?(g=!0,k.lineEnd(!0),b=k.aPos,k.moveY(-1),k.lineStart(),this.f=k.aPos):c.kMap("k")?(g=!0,k.moveY(1),k.lineEnd(!0),b=k.aPos,k.moveY(-1),k.lineStart()):this.f<n&&(b=n,k.moveTo(this.f));else if(c.kMap("y"))g=!0,k.lineEnd(!0),b=k.aPos,k.lineStart();else if(c.range)b=c.range.close,k.moveTo(c.range.open,!0);else{if(c.kMap("^"))return!0;if(c.kMap("$"))b=k.aPos;else return h(),!0}}n=b;c=k.aPos;c<n&&(n=k.aPos,c=b);k.moveTo(n);k=k.feeder.content.substring(n,
c+1);a.yank(k,g);if(a=e(k,"\n"))this.c=d("LINES_YANKED",a);return m}};a.prototype.getMessage=function(){return this.c};g[1](2,"YANK",a)})();BotanJS.define("Components.Vim.State.Stator");
(function(){function a(a,h){this.a=a;this.Ca=void 0==h?a.aPos:h;this.Da=this.la()}var g=K("Components.Vim.State");a.prototype.save=function(a,h){var e=this.a,c=e.feeder,b=this.Ca;0>a&&(b+=a,a=0);var f=this.Da,k=this.la(),m=f;return function(){var g=c.content.substr(b,a);c.content=c.content.substring(0,b)+h+c.content.substring(b+a);a=h.length;h=g;e.PStart=m.b;e.PEnd=m.b+1;e.X=m.x;e.Y=m.y;c.panX=m.Ia;c.panY=m.Ja;c.pan();m=m==f?k:f}};a.prototype.la=function(){var a=this.a,a={b:a.PStart,x:a.X,y:a.Y,Ia:a.feeder.panX,
Ja:a.feeder.panY};0<a.x&&(--a.b,--a.x);return a};g[1](2,"Stator",a)})();BotanJS.define("Components.Vim.DateTime.String");
(function(){function a(a,h,e){if(void 0==a[h])return h;var c=0;return a[h].replace(/%\d+/g,function(){return e[c++]})}var g={AboutAMinuteAgo:"about a minute ago",AboutAMonthAgo:"about a month ago",AboutAnHourAgo:"about an hour ago",AboutAWeekAgo:"about a week ago","last Friday":"last Friday","last Monday":"last Monday","last Saturday":"last Saturday","last Sunday":"last Sunday","last Thursday":"last Thursday","last Tuesday":"last Tuesday","last Wednesday":"last Wednesday","on Friday":"on Friday",
"on Monday":"on Monday","on Saturday":"on Saturday","on Sunday":"on Sunday","on Thursday":"on Thursday","on Tuesday":"on Tuesday","on Wednesday":"on Wednesday",OverAYearAgo:"over a year ago",XHoursAgo_2To4:"%1 hours ago",XHoursAgo_EndsIn1Not11:"%1 hours ago",XHoursAgo_EndsIn2To4Not12To14:"%1 hours ago",XHoursAgo_Other:"%1 hours ago",XMinutesAgo_2To4:"%1 minutes ago",XMinutesAgo_EndsIn1Not11:"%1 minutes ago",XMinutesAgo_EndsIn2To4Not12To14:"%1 minutes ago",XMinutesAgo_Other:"%1 minutes ago",XMonthsAgo_2To4:"%1 months ago",
XMonthsAgo_5To12:"%1 months ago",XSecondsAgo_2To4:"%1 seconds ago",XSecondsAgo_EndsIn1Not11:"%1 seconds ago",XSecondsAgo_EndsIn2To4Not12To14:"%1 seconds ago",XSecondsAgo_Other:"%1 seconds ago",XWeeksAgo_2To4:"%1 weeks ago"};K("Components.Vim.DateTime")[1](3,"String",function(d){return a(g,d,Array.prototype.slice.call(arguments,1))})})();BotanJS.define("Components.Vim.DateTime");
(function(){function a(b,a){var c=b%10,e=b%100;if(1>=b)throw Error("Invalid number of Time units");return 2<=b&&4>=b?d(a[0],b):1==c&&11!=e?d(a[1],b):2<=c&&4>=c&&!(12<=e&&14>=e)?d(a[2],b):d(a[3],b)}var g=K("Components.Vim.DateTime"),d=g[0]("String"),h=["XHoursAgo_2To4","XHoursAgo_EndsIn1Not11","XHoursAgo_EndsIn2To4Not12To14","XHoursAgo_Other"],e=["XMinutesAgo_2To4","XMinutesAgo_EndsIn1Not11","XMinutesAgo_EndsIn2To4Not12To14","XMinutesAgo_Other"],c=["XSecondsAgo_2To4","XSecondsAgo_EndsIn1Not11","XSecondsAgo_EndsIn2To4Not12To14",
"XSecondsAgo_Other"];g[1](3,"RelativeTime",function(b){var f=Math.round(.001*((new Date).getTime()-b.getTime()));if(31536E3<f)result=d("OverAYearAgo");else if(3952800<f)if(b=Math.round((f+1317600)/2635200),2<=b&&4>=b)result=d("XMonthsAgo_2To4",b);else if(5<=b&&12>=b)result=d("XMonthsAgo_5To12",b);else throw Error("Invalid number of Months");else if(2116800<=f)result=d("AboutAMonthAgo");else if(604800<=f)b=Math.round(f/604800),result=1<b?d("XWeeksAgo_2To4",b):d("AboutAWeekAgo");else{if(432E3<=f)switch(b.getDay()){case 1:b=
d("last Monday");break;case 2:b=d("last Tuesday");break;case 3:b=d("last Wednesday");break;case 4:b=d("last Thursday");break;case 5:b=d("last Friday");break;case 6:b=d("last Saturday");break;case 0:b=d("last Sunday");break;default:b=d("last Sunday")}else if(86400<=f)switch(b.getDay()){case 1:b=d("on Monday");break;case 2:b=d("on Tuesday");break;case 3:b=d("on Wednesday");break;case 4:b=d("on Thursday");break;case 5:b=d("on Friday");break;case 6:b=d("on Saturday");break;case 0:b=d("on Sunday");break;
default:b=d("on Sunday")}else b=7200<=f?a(Math.round(f/3600),h):3600<=f?d("AboutAnHourAgo"):120<=f?a(Math.round(f/60),e):60<=f?d("AboutAMinuteAgo"):a(1<f?f:2,c);result=b}return result})})();BotanJS.define("Components.Vim.State.Stack");
(function(){function a(){}var g=K("Components.Vim.State"),d=L("Components.Vim.DateTime.RelativeTime");a.prototype.store=function(a){this.ca=a;this.Ga=new Date;this.id=0};a.prototype.play=function(){this.ca&&this.ca()};p(a.prototype,"time",function(){return d(this.Ga)});g[1](2,"Stack",a)})();BotanJS.define("Components.Vim.Actions.DELETE");
(function(){function a(b){this.a=b;this.T=0;this.f=b.aPos;this.ha=this.a.feeder.panY;b.suppressEvent()}var g=K("Components.Vim.Actions");L("System.Debug");var d=L("Components.Vim.State.Stator"),h=L("Components.Vim.State.Stack"),e=L("Components.Vim.Message"),c=L("Components.Vim.Beep"),b=L("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!0;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a,k){a.preventDefault();if(!a.ModKeys){var e=a.target.W,g=this.a,
n=g.feeder,x=!1,r=!1;if(void 0==k){x=!0;k=this.f;var q=g.aPos;if(this.f!=q)a.kMap("^")?k--:a.kMap("l")?g.moveX(-1):a.kMap("h")?k=q:a.kMap("j")?(r=!0,g.lineEnd(!0),k=g.aPos,g.moveY(-1),g.lineStart(),this.f=g.aPos):a.kMap("k")?(r=!0,g.moveY(1),g.lineEnd(!0),k=g.aPos,g.moveY(-1),g.lineStart()):this.f<q&&(k=q,g.moveTo(this.f));else if(a.kMap("d"))r=!0,g.lineEnd(!0),k=g.aPos,g.lineStart();else if(a.range)k=a.range.close,g.moveTo(a.range.open,!0);else{if(a.kMap("^"))return!0;if(a.kMap("$"))k=g.aPos;else return c(),
!0}}var t=n.content,w=k;a=g.aPos;a<w&&(w=g.aPos,a=k);q=t.substring(w,a+1);e.change(q,r);this.T=b(q,"\n");n.content=t.substring(0,w)+t.substring(a+1);n.pan(void 0,this.ha<n.panY?this.ha-n.panY:void 0);g.moveTo(w);var e=new d(g,w),n=new h,A=e.save(0,q);n.store(function(){A();g.moveX(1)});g.rec.record(n);return x}};a.prototype.getMessage=function(){return this.T?e("LINES_FEWER",this.T):""};g[1](2,"DELETE",a)})();BotanJS.define("Components.Vim.Actions.VISUAL");
(function(){function a(a){this.ka(a);this.c=d("VISUAL");a.blink=!1;a.pSpace=!0}var g=K("Components.Vim.Actions");L("System.Debug");var d=L("Components.Vim.Message"),h=g[0]("YANK"),e=g[0]("DELETE");a.prototype.ka=function(a){this.a=a;this.p=a.aPos;this.w=this.na=a.PStart};a.prototype.allowMovement=!0;a.prototype.dispose=function(){var a=this.a;a.blink=!0;a.pSpace=!1;a.PStart=this.w;a.PEnd=this.w+1;a.feeder.wrap&&0<a.X&&(a.suppressEvent(),a.moveX(-1),a.moveX(1),a.unsuppressEvent())};a.prototype.handler=
function(a){a.preventDefault();if(!a.ModKeys){var b=this.a,f=null;a.kMap("y")?f=new h(b):a.kMap("d")&&(f=new e(b));if(f){b.suppressEvent();if(f.constructor==e&&this.p<b.aPos){var k=b.aPos;b.moveTo(this.p,!0);this.p=k}f.handler(a,this.p);f.constructor!=e&&b.moveTo(this.p);this.c=f.getMessage();f.dispose();b.unsuppressEvent();this.w=b.PStart;return!0}a.range&&(b.suppressEvent(),a=a.range,b.aPos==this.p&&(b.moveTo(a.open,!0),this.ka(b)),b.unsuppressEvent(),b.moveTo(a.close,!0));a=this.na;f=b.PStart;
k=f-a;0<=k?(this.w=f,f+=1):0>k&&(a+=k,f=this.na+1,this.w=a);b.PStart=a;b.PEnd=f}};a.prototype.getMessage=function(){return this.c};g[1](2,"VISUAL",a)})();BotanJS.define("Components.Vim.Actions.UNDO");
(function(){function a(a){this.a=a;this.j="UNDO COMMAND"}var g=K("Components.Vim.Actions"),d=L("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.undo())?(a.play(),this.j="<<TODO>>; before #"+a.id+"  "+a.time):this.j=d("UNDO_LIMIT")};a.prototype.getMessage=function(){return this.j};g[1](2,"UNDO",a)})();BotanJS.define("Components.Vim.Actions.PRINT_HEX");
(function(){function a(a){this.a=a}var g=K("Components.Vim.Actions");L("Components.Vim.State.Stack");L("System.Debug");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();a=unescape(encodeURIComponent(this.a.feeder.content[this.a.aPos]));for(var g=a.length,e=[],c=0;c<g;c++)e[c]="\n"==a[c]?"a":a.charCodeAt(c).toString(16),1==e[c].length?e[c]="0"+e[c]:0==e[c].length&&(e[c]="00");this.c=e.join(" ")};a.prototype.getMessage=function(){return this.c};g[1](2,"PRINT_HEX",a)})();
BotanJS.define("Components.Vim.Actions.REDO");(function(){function a(a){this.a=a;this.j="REDO COMMAND"}var g=K("Components.Vim.Actions"),d=L("Components.Vim.Message");a.prototype.dispose=function(){};a.prototype.handler=function(a){a.preventDefault();(a=this.a.rec.redo())?(a.play(),this.j="<<TODO>>; before #"+a.id+"  "+a.time):this.j=d("REDO_LIMIT")};a.prototype.getMessage=function(){return this.j};g[1](2,"REDO",a)})();BotanJS.define("Components.Vim.Actions.PUT");
(function(){function a(a){this.a=a;this.c="";a.suppressEvent()}var g=K("Components.Vim.Actions"),d=L("Components.Vim.Message"),h=L("Components.Vim.State.Stator"),e=L("Components.Vim.State.Stack"),d=L("Components.Vim.Message"),c=L("System.utils.Perf.CountSubstr");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.a.unsuppressEvent()};a.prototype.handler=function(a){a.preventDefault();var f=this.a.Vim.W.get(!1);if(!f)return!0;var k=f.length,g=c(f,"\n"),v=this.a,n=v.feeder,x=f.newLine,
r=a.kMap("P")?0:-1;x&&(v.moveY(-r),v.lineStart());a=new h(v);var q=v.aPos;n.content=n.content.substring(0,q)+f+n.content.substring(q);n.pan();v.moveTo(0<g?q:q+k,!0);f=new e;if(x){var t=a.save(k,"");f.store(function(){t();v.moveY(r)})}else f.store(a.save(k,""));v.rec.record(f);g&&(this.c=d("LINES_MORE",g));v.moveX(-1);return!0};a.prototype.getMessage=function(){return this.c};g[1](2,"PUT",a)})();BotanJS.define("Components.Vim.Actions.INSERT");
(function(){function a(a){this.a=a;this.Ea=new h(a);this.U("",!0);a=this.a.feeder.firstBuffer.cols;for(var b=e("INSERT"),f=b.length;f<a;f++)b+=" ";this.c=b}var g=K("Components.Vim.Actions"),d=L("Components.Vim.State.Stack"),h=L("Components.Vim.State.Stator");L("System.Debug");var e=L("Components.Vim.Message");a.prototype.allowMovement=!1;a.prototype.dispose=function(){this.c="";this.U("",!0);this.a.moveX(-1)};a.prototype.U=function(a,b){if(b||!this.K){if(this.K){if(0==this.n&&""===this.l)return;this.K.store(this.Ea.save(this.n,
this.l));this.a.rec.record(this.K)}this.n=0;this.l="";this.K=new d}this.n+=a.length};a.prototype.Aa=function(a){var b=this.a,f=b.feeder;if(a.kMap("BS")){if(0==b.X&&0==f.panY&&0==b.Y)return;b.moveX(-1,!0,!0);a=b.aPos;0>=this.n&&(this.l=f.content.substr(a,1)+this.l);f.content=f.content.substring(0,a)+f.content.substring(a+1);this.n--}else if(a.kMap("Del"))a=b.aPos,this.l+=f.content.substr(a,1),f.content=f.content.substring(0,a)+f.content.substring(a+1);else return;f.pan();f.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};
a.prototype.handler=function(a){a.preventDefault();var b;a:switch(b=a.key,b){case "Tab":b="\t";break a;case "Enter":b="\n";break a}if(1!=b.length)this.Aa(a);else{a=this.a;var f=a.feeder,k=a.aPos;f.content=f.content.substring(0,k)+b+f.content.substring(k);"\n"==b?(f.softReset(),f.pan(),a.moveY(1),a.lineStart()):(f.pan(),a.moveX(1,!1,!0));f.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"));this.U(b)}};a.prototype.getMessage=function(){return this.c};g[1](2,"INSERT",a)})();BotanJS.define("Components.Vim.Cursor");
(function(){function a(a){this.feeder=a;this.cols=a.firstBuffer.cols;this.PStart=this.Y=this.X=this.pX=0;this.PEnd=1;this.rec=new e;this.action=null;this.blink=!0;this.pSpace=!1;this.t=this.L=0}function g(a,c){var k=a.h(),g=a.Y+c,e=a.Y;for(k!=a.feeder.firstBuffer&&e--;e<g&&!k.placeholder;k=k.nextLine)k.br&&e++;return e}var d=K("Components.Vim"),h=L("System.Debug"),e=L("Components.Vim.State.Recorder"),c=L("Components.Vim.Actions.*");a.prototype.Vim;a.prototype.moveTo=function(a,c){var k=this.feeder.content,
e=this.h(),g=e.lineNum;e.placeholder&&(this.Y=g=0);for(var d=0,h=0,r=k.indexOf("\n");0<=r&&!(a<=r);r=k.indexOf("\n",r))h=r,r++,d++;k=d-g;g=a<h?h-a:a-h;g+=Math.ceil(g/e.cols)-1;k&&this.moveY(k);0<this.h().lineNum&&h<=a&&g--;this.moveX(-Number.MAX_VALUE);this.moveX(g,!1,c)};a.prototype.moveX=function(a,c,k){var g=this.pX,e=Boolean(a);0<this.t&&(a+=this.t,this.t=0);e&&(g=this.X+a);a||(a=1);var d=this.feeder;if(c&&0>g&&(0<this.feeder.panY||0<this.Y))this.moveY(-1),this.lineEnd(k);else{var h=this.h(),
r=h.visualLines.join("\n");c=r.length;var q=0,t=!0;if(1<c){for(var w=h.lineNum-1,q=d.content,t=q.indexOf("\n"),A=0;0<=t&&w!=A;t=q.indexOf("\n",t),A++)t++;0==A&&-1==t&&(t=0);w=q.indexOf("\n",t+1);w=-1==w?q.length:w;q=(t=0<(w-t-1)%h.cols)?k?c-1:c-2:k?c:c-1}h=r[g];(c=void 0==h||c==g+1&&" "==h)?g=0<a?q:0:"\n"==h&&(g+=a);d.wrap&&c&&!t&&k&&(this.t=1);this.X=g;e&&(this.pX=g,this.updatePosition())}};a.prototype.lineStart=function(){this.pX=0;this.moveX();this.updatePosition()};a.prototype.lineEnd=function(a){this.moveX(Number.MAX_VALUE,
!1,a)};a.prototype.updatePosition=function(){var a=0,c=0,g=this.feeder.lineBuffers[0];a:for(;g&&c<this.Y;c++)for(;g;){if(g.next&&g.next.placeholder)break a;a+=g.toString().length+1;if((g=g.next)&&g.br)break}this.PStart=a=this.X+a+this.t;this.PEnd=a+1;this.N()};a.prototype.N=function(){0<this.L?h.Info("Event suppressed, suppression level is: "+this.L):this.feeder.dispatcher.dispatchEvent(new BotanEvent("VisualUpdate"))};a.prototype.moveY=function(a){var c=this.Y+a,e=this.feeder,d;if(0>c)e.pan(void 0,
c),this.Y=0,this.moveX(),this.updatePosition(),e.softReset();else if(!e.EOF&&e.moreAt<c){e=this.feeder;if(e.linesTotal<c){for(;!e.EOF;)e.pan(void 0,1);a=g(this,a)}else{d=e.lastBuffer.lineNum;var c=c-e.moreAt,h=this.h().lineNum;e.EOF||e.pan(void 0,c);for(c=h+a;!e.EOF&&(e.lastBuffer.lineNum==d||e.lastBuffer.lineNum<c);)e.pan(void 0,1);this.Y=0;for(d=this.h();d&&d.lineNum!=c&&!d.placeholder;this.Y++,d=this.h());a=this.Y;e.EOF||e.lastBuffer.next.lineNum!=d.lineNum||a--}this.Y=a;this.moveX();this.updatePosition();
e.softReset()}else{if(0<a){d=this.h();if(d.nextLine.placeholder)return;c=g(this,a)}this.Y=c;this.moveX();this.updatePosition()}};a.prototype.openAction=function(a){this.action&&this.action.dispose();h.Info("openAction: "+a);this.action=new c[a](this);this.o=null;this.N()};a.prototype.closeAction=function(){this.action&&(this.action.dispose(),this.o=this.action.getMessage(),this.action=null,h.Info("closeAction: "+this.o),this.Vim.contentAnalyzer.reset(),this.N())};a.prototype.openRunAction=function(a,
f){var e=new c[a](this);e.handler(f);this.o=e.getMessage();e.dispose();this.Vim.contentAnalyzer.reset();this.N()};a.prototype.suppressEvent=function(){++this.L};a.prototype.unsuppressEvent=function(){--this.L};a.prototype.h=function(){for(var a=this.feeder,c=a.firstBuffer,a=a.lastBuffer.next,e=0;c!=a;c=c.next)if(c.br&&e++,this.Y==e)return c;return null};p(a.prototype,"aX",function(){var a=this.X,c=1;if(this.feeder.wrap){var e=this.h().visualLines,g;for(g in e){var d=e[g],h=d.content.toString().length,
d=d.toString().length,a=a-(d+1);if(0<=a)c+=h;else if(0>a){c+=a+d;break}}}return c});p(a.prototype,"aPos",function(){var a=this.feeder,c=this.h().lineNum,e=0;if(0<c){e=a.content.indexOf("\n");for(i=1;-1!=e&&i<c;i++)e=a.content.indexOf("\n",e+1);a.wrap&&e++}return e+=this.aX});p(a.prototype,"message",function(){if(this.o){var a=this.o;this.o=null;return a}return this.action&&this.action.getMessage()});p(a.prototype,"position",function(){return{start:this.PStart,end:this.PEnd}});d[1](2,"Cursor",a)})();
BotanJS.define("Components.Vim.LineFeeder");
(function(){function a(a,b){var f=[];f[a]=new d(b);for(var e=a-1;0<=e;e--)f[e]=new d(b,f[e+1]);this.lineBuffers=f;this.panY=this.panX=0;this.wrap=!0;this.setRender();this.cursor=new h(this);this.dispatcher=new C;this.r=null;this.H=-1;this.v=a}var g=K("Components.Vim");L("System.Debug");var d=g[0]("LineBuffer"),h=g[0]("Cursor"),e=L("System.utils.Perf.CountSubstr");a.prototype.init=function(a,b){this.content=a;this.setWrap(b);this.firstBuffer.D(a,this.wrap,0)};a.prototype.setWrap=function(a){void 0!=
a&&(this.wrap=a)};a.prototype.setRender=function(a){void 0==a&&(a=!0);var b=this,f=a?function(){return!0}:function(a){return!a.placeholder};this.ya=function(a,c){for(var e=(void 0==a?"":a)+"",g=!1,d=0;a&&d<c&&(a=a.next)&&f(a);d++)g||a.br&&c<d+a.visualLines.length?(g||(b.r=a),g=!0,e+="\n@"):e+="\n"+a;return e};this.za=function(){for(var a=b.lineBuffers[b.xa],c=b.ja+1,e=0;a&&e<c&&(a=a.next)&&f(a);e++)if(a.br&&c<e+a.visualLines.length){b.r=a;break}}};a.prototype.render=function(a,b){var f=this.lineBuffers;
if(void 0==a)a=0;else if(this.v<a)return"";if(void 0==b||this.v-a<b)b=this.rows-a;if(0==b)return"";this.xa=a;this.ja=b-1;return this.ya(f[a],this.ja)};a.prototype.pan=function(a,b){void 0==a&&(a=0);void 0==b&&(b=0);var f=this.panX+a,e=this.panY+b,g=-1,d=0;0>e&&(e=0);var h=this.content.slice(0,-1);if(0<e)for(g=h.indexOf("\n"),d=1;-1!=g&&d<e;d++){var x=h.indexOf("\n",g+1);if(-1==x){e=d;break}g=x}this.firstBuffer.D(this.content.substr(g+1),this.wrap,d);this.panX=f;this.panY=e};a.prototype.softReset=
function(){this.H=-1;this.r=null;this.za()};p(a.prototype,"linesTotal",function(){return e(this.content,"\n")});p(a.prototype,"firstBuffer",function(){return this.lineBuffers[0]});p(a.prototype,"lastBuffer",function(){return this.lineBuffers[this.v-1]});p(a.prototype,"EOF",function(){return this.lineBuffers[this.v].placeholder});p(a.prototype,"moreAt",function(){if(0<this.H)return this.H;var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do{if(this.r==a)break;a.br&&b++}while(a=a.next);void 0==
a&&b--;return this.H=b});p(a.prototype,"lineStat",function(){var a=this.cursor.aX+1,b=this.cursor.h(),f="",e=b.content.match(/\t/g);e&&(f="-"+(a+e.length*b.tabWidth));return b.lineNum+1+","+a+f});p(a.prototype,"docPos",function(){var a="ALL";if(0<this.panY)a=this.EOF?"BOTTOM":Math.floor(this.panY/(this.linesTotal-(this.v-1))*100)+"%";else if(this.r||!this.EOF)a="TOP";return a});p(a.prototype,"linesOccupied",function(){var a=this.firstBuffer;if(a.placeholder)return 0;var b=0;do b++;while((a=a.next)&&
!a.placeholder);return b});g[1](2,"LineFeeder",a)})();BotanJS.define("Components.Vim.StatusBar");(function(){function a(a){this.cols=a;this.Z={}}var g=K("Components.Vim");L("System.Debug");g[0]("LineFeeder");a.prototype.stamp=function(a,g){this.Z[a]=g};p(a.prototype,"statusText",function(){for(var a="",g=this.cols,e=0;e<g;e++){var c=g-e,b=this.Z[e]||this.Z[-c];b?(b=b(),void 0!=b&&""!==b&&(a+=b.substr(0,c),e=a.length)):a+=" "}return a});g[1](2,"StatusBar",a)})();BotanJS.define("Components.Vim.Controls");
(function(){function a(a,b){this.S=b;this.Fa=a;var f=this.S.keyCode;this.ua=27==f||b.ctrlKey&&67==f;this.ea=f+(b.shiftKey||b.getModifierState("CapsLock")?512:0)+(b.ctrlKey?1024:0)+(b.altKey?2048:0);this.wa=16==f||17==f||18==f;this.va=b.key;this.u=null}function g(a){this.pa=a;this.aa=a.contentFeeder;this.q=this.aa.cursor}var d=K("Components.Vim");L("System.Debug");var h=d[0]("Beep"),e={};g.prototype.d=function(a,b){if(b)return this.e||(this.e=[]),this.e.push({keys:Array.prototype.slice.call(arguments,
2),handler:b,qa:0}),!0;for(var f=a.keyCode,e=0;e<this.e.length;e++){var g=this.e[e],d=g.keys;if(d[g.qa++]==f)return g.qa==d.length&&(g.handler(a),this.e=null,this.k=!1),!0}this.e&&h();this.e=null;return this.k=!1};g.prototype.ta=function(a){var b=this.q;switch(a.keyCode){case 577:b.lineEnd();case 65:b.moveX(1,!0,!0);case 73:b.openAction("INSERT");break;case 85:b.openRunAction("UNDO",a);break;case 1106:b.openRunAction("REDO",a);break;case 68:b.openAction("DELETE");break;case 89:b.openAction("YANK");
break;case 80:b.suppressEvent(),b.moveX(1,!1,!0),b.unsuppressEvent();case 592:b.openRunAction("PUT",a);break;case 86:b.openAction("VISUAL");break;case 598:b.openAction("VISUAL_LINE")}};g.prototype.R=function(a,b){var f=this.q,e=f.X;f.moveX(a,b,f.pSpace);f.X==e&&h()};g.prototype.$=function(a){var b=this.q,f=this.aa,e=b.Y+f.panY;b.moveY(a);e!=b.Y+f.panY||0<a&&!f.EOF||h()};g.prototype.ba=function(a){var b=a.keyCode;if(this.k&&this.d&&!a.ModKeys)return this.d(a),!0;var f=this.q,e=f.feeder,g=!0;switch(b){case 8:this.R(-1,
!0);break;case 72:this.R(-1);break;case 76:this.R(1);break;case 75:this.$(-1);break;case 74:this.$(1);break;case 1094:if(e.firstBuffer.nextLine.placeholder){h();break}e.pan(void 0,e.moreAt);e.softReset();f.moveY(-f.Y);break;case 1090:if(0==e.panY){h();break}e.pan(void 0,-e.moreAt);e.softReset();f.moveY(-f.Y);e.EOF||f.moveY(e.moreAt);break;case 584:break;case 588:break;case 566:f.lineStart();break;case 564:f.lineEnd(f.pSpace);break;case 583:f.moveY(Number.MAX_VALUE);f.moveX(Number.MAX_VALUE,!0);break;
case 565:var d=this.pa.contentAnalyzer,b=d.bracketAt(f.aPos);if(-1==b.open){h();break}f.moveTo(b.selected==b.close?b.open:b.close);break;case 84:break;case 73:if(!f.action){g=!1;break}d=this.pa.contentAnalyzer;this.k=!0;this.d(a,function(a){var b=d.wordAt(f.aPos);a.u=b},87);var b=function(a){var b=d.bracketIn("(",f.aPos);a.u=b},e=function(a){var b=d.bracketIn("{",f.aPos);a.u=b},n=function(a){var b=d.bracketIn("[",f.aPos);a.u=b};this.d(a,b,560);this.d(a,b,569);this.d(a,n,219);this.d(a,n,221);this.d(a,
e,731);this.d(a,e,733);break;case 71:this.k=!0;this.d(a,function(){f.moveY(-Number.MAX_VALUE);f.moveX(-Number.MAX_VALUE,!0)},71);this.d(a,function(){f.openRunAction("PRINT_HEX",a)},56);break;case 191:case 191:this.k=!0;break;default:g=!1}return g};g.prototype.handler=function(a,b){if(!(2116==b.keyCode||112<b.keyCode&&123>=b.keyCode))if(b.Escape&&this.e)this.e=null,this.k=!1,h();else{var e=this.q;if(e.action)if(b.Escape)b.preventDefault(),e.closeAction();else{if(e.action.allowMovement){var g=!this.e;
this.ba(b);if(g&&this.e){b.preventDefault();return}}e.action.handler(b)&&e.closeAction()}else b.preventDefault(),this.ba(b)||this.ta(b)}};p(a.prototype,"target",function(){return this.Fa});p(a.prototype,"key",function(){return this.va});p(a.prototype,"keyCode",function(){return this.ea});p(a.prototype,"ModKeys",function(){return this.wa});p(a.prototype,"Escape",function(){return this.ua});p(a.prototype,"range",function(){var a=this.u;return a&&-1==a.open&&-1==a.close?null:a});a.prototype.kMap=function(a){var b=
this.ea;if(e[a])a=e[a];else{var f=a.split("-"),g=f[0],d=0;if(2==f.length){var h=!0;switch(f[0]){case "C":d=1024;break;case "A":d=2048;break;case "S":d=512;break;default:h=!1}h&&(g=f[1])}switch(g){case "BS":f=d+8;break;case "Del":f=d+46;break;case "A":d=512;case "a":f=d+65;break;case "B":d=512;case "b":f=d+66;break;case "C":d=512;case "c":f=d+67;break;case "D":d=512;case "d":f=d+68;break;case "E":d=512;case "e":f=d+69;break;case "F":d=512;case "f":f=d+70;break;case "G":d=512;case "g":f=d+71;break;
case "H":d=512;case "h":f=d+72;break;case "I":d=512;case "i":f=d+73;break;case "J":d=512;case "j":f=d+74;break;case "K":d=512;case "k":f=d+75;break;case "L":d=512;case "l":f=d+76;break;case "M":d=512;case "m":f=d+77;break;case "N":d=512;case "n":f=d+78;break;case "O":d=512;case "o":f=d+79;break;case "P":d=512;case "p":f=d+80;break;case "Q":d=512;case "q":f=d+81;break;case "R":d=512;case "r":f=d+82;break;case "S":d=512;case "s":f=d+83;break;case "T":d=512;case "t":f=d+84;break;case "U":d=512;case "u":f=
d+85;break;case "V":d=512;case "v":f=d+86;break;case "W":d=512;case "w":f=d+87;break;case "X":d=512;case "x":f=d+88;break;case "Y":d=512;case "y":f=d+89;break;case "Z":d=512;case "z":f=d+90;break;case "!":d=512;case "1":f=d+49;break;case "@":d=512;case "2":f=d+50;break;case "#":d=512;case "3":f=d+51;break;case "$":d=512;case "4":f=d+52;break;case "%":d=512;case "5":f=d+53;break;case "^":d=512;case "6":f=d+54;break;case "&":d=512;case "7":f=d+55;break;case "*":d=512;case "8":f=d+56;break;case "(":d=
512;case "9":f=d+57;break;case ")":d=512;case "0":f=d+48;break;case "<":d=512;case ",":f=d+188;break;case ">":d=512;case ".":f=d+190;break;default:throw Error("Unsupport keys: "+a);}a=e[a]=f}return b==a};a.prototype.preventDefault=function(){this.S&&this.S.preventDefault()};d[1](2,"Controls",g);d[1](2,"InputEvent",a)})();BotanJS.define("Components.Vim.VimArea");
(function(){function a(a){if(a){var b=a.element;if("TEXTAREA"!=b.nodeName)c.Error("Element is not compatible for VimArea");else{a.setAttribute(new h("vimarea",1));this.stage=a;this.rows=b.rows;this.cols=b.cols;this.P=!1;var e=this;a.addEventListener("Focus",function(){e.P=!0});a.addEventListener("Blur",function(){e.P=!1});this.ra(b.value);r.push(this)}}}function g(a,b){return function(c){c=c||window.event;c.keyCode?code=c.keyCode:c.which&&(code=c.which);b(a,new n(a,c))}}var d=K("Components.Vim");
L("Dandelion.IDOMElement");var h=L("System.utils.DataKey"),e=L("System.Cycle"),c=L("System.Debug"),b=L("Components.Vim.State.Registers"),f=L("Components.Vim.Syntax.Analyzer"),k=d[0]("LineFeeder"),m=d[0]("StatusBar"),v=d[0]("Controls"),n=d[0]("InputEvent"),x=d[0]("Message"),r=[];a.prototype.select=function(a){if(this.P){var b=this.stage.element;a&&(b.selectionStart=a.start,b.selectionEnd=a.end)}};a.prototype.ra=function(a){function c(){B.init(D.statusText);h.value=u.render(0,n-B.linesOccupied)+"\n"+
B.render();d.Q=!1;d.select(u.cursor.position)}var d=this,h=this.stage.element,n=this.rows,r=this.cols,u=new k(n-1,r),M=new f(u);u.init(a+"\n");var B=new k(n,r);B.setRender(!1);u.cursor.Vim=this;B.cursor.Vim=this;var D=new m(r);D.stamp(-18,function(){return u.lineStat});D.stamp(-3,function(){return x(u.docPos)});D.stamp(0,function(){return u.cursor.message});B.init(D.statusText);u.dispatcher.addEventListener("VisualUpdate",c);c();this.contentFeeder=u;this.contentAnalyzer=M;this.statusFeeder=B;this.statusBar=
D;this.W=new b;this.a=u.cursor;this.Q=!0;e.perma("VimCursorBlinkCycle"+h.id,function(){d.select(!d.a.blink||(d.Q=!d.Q)?d.a.position:{start:0,end:0})},600);a=new v(this);this.stage.addEventListener("KeyDown",g(this,a.handler.bind(a)))};p(a,"Instances",function(){return r.slice()});p(a.prototype,"content",function(){return this.contentFeeder.content.slice(0,-1)});d[1](2,"VimArea",a)})();})();
